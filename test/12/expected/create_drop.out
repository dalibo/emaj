-- create_drop.sql : test emaj_create_group(), emaj_comment_group(),
-- emaj_assign_table(), emaj_assign_tables(), emaj_assign_sequence(), emaj_assign_sequences(),
-- emaj_export_groups_configuration(), emaj_import_groups_configuration(),
-- emaj_drop_group() and emaj_force_drop_group() functions
--
SET client_min_messages TO WARNING;
-- define and create the temp file directory to be used by the script
\setenv EMAJTESTTMPDIR '/tmp/emaj_'`echo $PGVER`'/create_drop'
\set EMAJTESTTMPDIR `echo $EMAJTESTTMPDIR`
\! mkdir -p $EMAJTESTTMPDIR
-- set sequence restart value
select public.handle_emaj_sequences(1000);
 handle_emaj_sequences 
-----------------------
 
(1 row)

-----------------------------
-- emaj_create_group() tests
-----------------------------
-- invalid group names
select emaj.emaj_create_group(NULL);
ERROR:  emaj_create_group: The group name can't be NULL or empty.
CONTEXT:  PL/pgSQL function emaj.emaj_create_group(text,boolean) line 15 at RAISE
select emaj.emaj_create_group('',false);
ERROR:  emaj_create_group: The group name can't be NULL or empty.
CONTEXT:  PL/pgSQL function emaj.emaj_create_group(text,boolean) line 15 at RAISE
-- should be OK
select emaj.emaj_create_group('emptyGroup');
 emaj_create_group 
-------------------
                 1
(1 row)

select emaj.emaj_create_group('myGroup1');
 emaj_create_group 
-------------------
                 1
(1 row)

select emaj.emaj_create_group('myGroup2');
 emaj_create_group 
-------------------
                 1
(1 row)

select emaj.emaj_create_group('phil''s group#3",',false);
 emaj_create_group 
-------------------
                 1
(1 row)

select emaj.emaj_create_group('myGroup4');
 emaj_create_group 
-------------------
                 1
(1 row)

select emaj.emaj_create_group('myGroup5',false);
 emaj_create_group 
-------------------
                 1
(1 row)

select emaj.emaj_create_group('myGroup6');
 emaj_create_group 
-------------------
                 1
(1 row)

-- already created
select emaj.emaj_create_group('myGroup1');
ERROR:  emaj_create_group: The group "myGroup1" already exists.
CONTEXT:  PL/pgSQL function emaj.emaj_create_group(text,boolean) line 23 at RAISE
-----------------------------
-- emaj_comment_group() tests
-----------------------------
-- unknown group
select emaj.emaj_comment_group(NULL,NULL);
ERROR:  _check_group_names: No group to process.
CONTEXT:  PL/pgSQL function emaj._check_group_names(text[],boolean,boolean,boolean,boolean,boolean,boolean) line 30 at RAISE
SQL statement "SELECT emaj._check_group_names(p_groupNames := ARRAY[p_groupName], p_mayBeNull := FALSE, p_lockGroups := TRUE)"
PL/pgSQL function emaj.emaj_comment_group(text,text) line 7 at PERFORM
select emaj.emaj_comment_group('unknownGroup',NULL);
ERROR:  _check_group_names: The group "unknownGroup" does not exist.
CONTEXT:  PL/pgSQL function emaj._check_group_names(text[],boolean,boolean,boolean,boolean,boolean,boolean) line 42 at RAISE
SQL statement "SELECT emaj._check_group_names(p_groupNames := ARRAY[p_groupName], p_mayBeNull := FALSE, p_lockGroups := TRUE)"
PL/pgSQL function emaj.emaj_comment_group(text,text) line 7 at PERFORM
-- should be OK
select emaj.emaj_comment_group('myGroup1','a first comment for group #1');
 emaj_comment_group 
--------------------
 
(1 row)

select emaj.emaj_comment_group('myGroup1','a better comment for group #1');
 emaj_comment_group 
--------------------
 
(1 row)

select emaj.emaj_comment_group('emptyGroup','an empty group');
 emaj_comment_group 
--------------------
 
(1 row)

select group_name, group_comment from emaj.emaj_group where group_name = 'myGroup1';
 group_name |         group_comment         
------------+-------------------------------
 myGroup1   | a better comment for group #1
(1 row)

select emaj.emaj_comment_group('myGroup1',NULL);
 emaj_comment_group 
--------------------
 
(1 row)

select group_name, group_comment from emaj.emaj_group where group_name = 'myGroup1';
 group_name | group_comment 
------------+---------------
 myGroup1   | 
(1 row)

-----------------------------------
-- emaj_assign_table
-----------------------------------
-- error cases
-- bad group name
select emaj.emaj_assign_table('myschema1','mytbl1','dummyGroup');
ERROR:  _check_group_names: The group "dummyGroup" does not exist.
CONTEXT:  PL/pgSQL function emaj._check_group_names(text[],boolean,boolean,boolean,boolean,boolean,boolean) line 42 at RAISE
SQL statement "SELECT emaj._check_group_names(p_groupNames := ARRAY[p_group], p_mayBeNull := FALSE, p_lockGroups := TRUE)"
PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 35 at PERFORM
PL/pgSQL function emaj.emaj_assign_table(text,text,text,jsonb,text) line 7 at RETURN
-- bad schema
select emaj.emaj_assign_table('dummySchema','mytbl1','myGroup1');
ERROR:  _assign_tables: The schema "dummySchema" does not exist.
CONTEXT:  PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 45 at RAISE
PL/pgSQL function emaj.emaj_assign_table(text,text,text,jsonb,text) line 7 at RETURN
select emaj.emaj_assign_table('emaj','mytbl1','myGroup1');
ERROR:  _assign_tables: The schema "emaj" is an E-Maj schema.
CONTEXT:  PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 52 at RAISE
PL/pgSQL function emaj.emaj_assign_table(text,text,text,jsonb,text) line 7 at RETURN
-- bad table
select emaj.emaj_assign_table('myschema1','dummyTable','myGroup1');
ERROR:  _assign_tables: In schema myschema1, some tables ("dummyTable") do not exist.
CONTEXT:  PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 78 at RAISE
PL/pgSQL function emaj.emaj_assign_table(text,text,text,jsonb,text) line 7 at RETURN
-- partitionned table
select emaj.emaj_assign_table('myschema4','mytblp','myGroup1');
ERROR:  _assign_tables: In schema myschema4, some tables (mytblp) are partitionned tables (only elementary partitions are supported by E-Maj).
CONTEXT:  PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 90 at RAISE
PL/pgSQL function emaj.emaj_assign_table(text,text,text,jsonb,text) line 7 at RETURN
select emaj.emaj_remove_table('myschema4','mytblp');
WARNING:  _check_tblseqs_array: In schema "myschema4", some tables (mytblp) do not exist.
ERROR:  _check_tblseqs_array: In schema "myschema4", some tables (mytblp) do not currently belong to any tables group.
CONTEXT:  PL/pgSQL function emaj._check_tblseqs_array(text,text[],text,boolean) line 87 at RAISE
PL/pgSQL function emaj._remove_tables(text,text[],text,boolean,boolean) line 26 at assignment
PL/pgSQL function emaj.emaj_remove_table(text,text,text) line 6 at RETURN
-- temp table
DO LANGUAGE plpgsql
$$
begin
  CREATE TEMPORARY TABLE myTempTbl (
    col1       INT     NOT NULL,
    PRIMARY KEY (col1)
  );
  begin
    select emaj.emaj_assign_table(nspname,'mytemptbl','myGroup1') from pg_class, pg_namespace
      where relnamespace = pg_namespace.oid and relname = 'mytemptbl';
    return;
  exception when raise_exception then
    raise exception 'Error trapped on emaj_assign_table() call';
  end;
end;
$$;
ERROR:  Error trapped on emaj_assign_table() call
CONTEXT:  PL/pgSQL function inline_code_block line 12 at RAISE
-- UNLOGGED table on a rollbackable group
select emaj.emaj_assign_table('myschema5','myunloggedtbl','myGroup1');
ERROR:  _assign_tables: In schema myschema5, some tables (myunloggedtbl) are UNLOGGED tables.
CONTEXT:  PL/pgSQL function emaj._check_tables_for_rollbackable_group(text,text[],boolean,text) line 44 at RAISE
PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 127 at assignment
PL/pgSQL function emaj.emaj_assign_table(text,text,text,jsonb,text) line 7 at RETURN
-- table WITH OIDS on a rollbackable group - should fail
select emaj.emaj_assign_table('myschema5','myoidstbl','myGroup1');
 emaj_assign_table 
-------------------
                 1
(1 row)

-- the table is removed with PG12+: in these version the myoids table has no OIDS as this propertiy doesn't exist anymore
select emaj.emaj_remove_table('myschema5','myoidstbl');
 emaj_remove_table 
-------------------
                 1
(1 row)

-- table without PKEY on a rollbackable group
select emaj.emaj_assign_table('phil''s schema3','myTbl2\','myGroup1');
ERROR:  _assign_tables: In schema "phil's schema3", some tables ("myTbl2\") have no PRIMARY KEY.
CONTEXT:  PL/pgSQL function emaj._check_tables_for_rollbackable_group(text,text[],boolean,text) line 27 at RAISE
PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 127 at assignment
PL/pgSQL function emaj.emaj_assign_table(text,text,text,jsonb,text) line 7 at RETURN
-- invalid priority
select emaj.emaj_assign_table('myschema1','mytbl1','myGroup1','{"priority":"not_numeric"}'::jsonb);
ERROR:  _check_json_table_properties: the "priority" property must be numeric.
CONTEXT:  PL/pgSQL function emaj._check_json_table_properties(jsonb) line 18 at RAISE
SQL statement "SELECT *                                                                                            FROM emaj._check_json_table_properties(p_properties)"
PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 151 at SQL statement
PL/pgSQL function emaj.emaj_assign_table(text,text,text,jsonb,text) line 7 at RETURN
-- invalid tablespace
select emaj.emaj_assign_table('myschema1','mytbl1','myGroup1','{"log_data_tablespace":1}'::jsonb);
ERROR:  _check_json_table_properties: the log data tablespace must be a string.
CONTEXT:  PL/pgSQL function emaj._check_json_table_properties(jsonb) line 33 at RAISE
SQL statement "SELECT *                                                                                            FROM emaj._check_json_table_properties(p_properties)"
PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 151 at SQL statement
PL/pgSQL function emaj.emaj_assign_table(text,text,text,jsonb,text) line 7 at RETURN
select emaj.emaj_assign_table('myschema1','mytbl1','myGroup1','{"log_data_tablespace":"dummytsp"}'::jsonb);
ERROR:  _check_json_table_properties: the log data tablespace "dummytsp" does not exists.
CONTEXT:  PL/pgSQL function emaj._check_json_table_properties(jsonb) line 30 at RAISE
SQL statement "SELECT *                                                                                            FROM emaj._check_json_table_properties(p_properties)"
PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 151 at SQL statement
PL/pgSQL function emaj.emaj_assign_table(text,text,text,jsonb,text) line 7 at RETURN
select emaj.emaj_assign_table('myschema1','mytbl1','myGroup1','{"log_index_tablespace":1}'::jsonb);
ERROR:  _check_json_table_properties: the log index tablespace must be a string.
CONTEXT:  PL/pgSQL function emaj._check_json_table_properties(jsonb) line 47 at RAISE
SQL statement "SELECT *                                                                                            FROM emaj._check_json_table_properties(p_properties)"
PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 151 at SQL statement
PL/pgSQL function emaj.emaj_assign_table(text,text,text,jsonb,text) line 7 at RETURN
select emaj.emaj_assign_table('myschema1','mytbl1','myGroup1','{"log_index_tablespace":"dummytsp"}'::jsonb);
ERROR:  _check_json_table_properties: the log index tablespace "dummytsp" does not exists.
CONTEXT:  PL/pgSQL function emaj._check_json_table_properties(jsonb) line 44 at RAISE
SQL statement "SELECT *                                                                                            FROM emaj._check_json_table_properties(p_properties)"
PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 151 at SQL statement
PL/pgSQL function emaj.emaj_assign_table(text,text,text,jsonb,text) line 7 at RETURN
-- invalid ignored_triggers
select emaj.emaj_assign_table('myschema1','mytbl1','myGroup1','{"ignored_triggers":1}'::jsonb);
ERROR:  _check_json_table_properties: the "ignored_triggers" property must be an array or a string.
CONTEXT:  PL/pgSQL function emaj._check_json_table_properties(jsonb) line 68 at RAISE
SQL statement "SELECT *                                                                                            FROM emaj._check_json_table_properties(p_properties)"
PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 151 at SQL statement
PL/pgSQL function emaj.emaj_assign_table(text,text,text,jsonb,text) line 7 at RETURN
select emaj.emaj_assign_table('myschema1','mytbl1','myGroup1','{"ignored_triggers":"emaj_log_trg"}'::jsonb);
ERROR:  _check_json_table_properties: E-Maj triggers are not allowed in the "ignored_triggers" property.
CONTEXT:  PL/pgSQL function emaj._check_json_table_properties(jsonb) line 72 at RAISE
SQL statement "SELECT *                                                                                            FROM emaj._check_json_table_properties(p_properties)"
PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 151 at SQL statement
PL/pgSQL function emaj.emaj_assign_table(text,text,text,jsonb,text) line 7 at RETURN
select emaj.emaj_assign_table('myschema1','mytbl1','myGroup1','{"ignored_triggers":["emaj_trunc_trg"]}'::jsonb);
ERROR:  _check_json_table_properties: E-Maj triggers are not allowed in the "ignored_triggers" property.
CONTEXT:  PL/pgSQL function emaj._check_json_table_properties(jsonb) line 72 at RAISE
SQL statement "SELECT *                                                                                            FROM emaj._check_json_table_properties(p_properties)"
PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 151 at SQL statement
PL/pgSQL function emaj.emaj_assign_table(text,text,text,jsonb,text) line 7 at RETURN
select emaj.emaj_assign_table('myschema1','mytbl1','myGroup1','{"ignored_triggers":["dummy"]}'::jsonb);
ERROR:  _assign_tables: some triggers (dummy) have not been found in the table myschema1.mytbl1.
CONTEXT:  PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 228 at RAISE
PL/pgSQL function emaj.emaj_assign_table(text,text,text,jsonb,text) line 7 at RETURN
-- invalid ignored_triggers_profiles
select emaj.emaj_assign_table('myschema1','mytbl1','myGroup1','{"ignored_triggers_profiles":1}'::jsonb);
ERROR:  _check_json_table_properties: the "ignored_triggers_profiles" property must be an array or a string.
CONTEXT:  PL/pgSQL function emaj._check_json_table_properties(jsonb) line 85 at RAISE
SQL statement "SELECT *                                                                                            FROM emaj._check_json_table_properties(p_properties)"
PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 151 at SQL statement
PL/pgSQL function emaj.emaj_assign_table(text,text,text,jsonb,text) line 7 at RETURN
-- unknown property
select emaj.emaj_assign_table('myschema1','mytbl1','myGroup1','{"unknown_property":null}'::jsonb);
ERROR:  _check_json_table_properties: properties "{"unknown_property": null}" are unknown.
CONTEXT:  PL/pgSQL function emaj._check_json_table_properties(jsonb) line 92 at RAISE
SQL statement "SELECT *                                                                                            FROM emaj._check_json_table_properties(p_properties)"
PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 151 at SQL statement
PL/pgSQL function emaj.emaj_assign_table(text,text,text,jsonb,text) line 7 at RETURN
-- bad mark
select emaj.emaj_assign_table('myschema1','mytbl1','myGroup1',null,'EMAJ_LAST_MARK');
ERROR:  _check_new_mark: "EMAJ_LAST_MARK" is not an allowed name for a new mark.
CONTEXT:  PL/pgSQL function emaj._check_new_mark(text[],text) line 14 at RAISE
SQL statement "SELECT emaj._check_new_mark(array[p_group], p_mark)"
PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 155 at SQL statement
PL/pgSQL function emaj.emaj_assign_table(text,text,text,jsonb,text) line 7 at RETURN
-- erroneously existing log schema
begin;
  create schema emaj_myschema1;
  select emaj.emaj_assign_table('myschema1','mytbl1','myGroup1');
ERROR:  _assign_tables: The schema "emaj_myschema1" should not exist. Drop it manually.
CONTEXT:  PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 184 at RAISE
PL/pgSQL function emaj.emaj_assign_table(text,text,text,jsonb,text) line 7 at RETURN
rollback;
-- bad alter_log_table parameter
begin;
  insert into emaj.emaj_param (param_key, param_value_text) values ('alter_log_table','dummmy content');
  select emaj.emaj_assign_table('myschema1','mytbl1','myGroup1');
ERROR:  syntax error at or near "dummmy"
LINE 1: ALTER TABLE emaj_myschema1.mytbl1_log dummmy content
                                              ^
QUERY:  ALTER TABLE emaj_myschema1.mytbl1_log dummmy content
CONTEXT:  PL/pgSQL function emaj._create_tbl(text,text,text,integer,text,text,text[],bigint,boolean) line 93 at EXECUTE
SQL statement "SELECT emaj._create_tbl(p_schema, p_table, p_group, p_priority, p_logDatTsp, p_logIdxTsp, p_ignoredTriggers,
                             p_timeId, p_groupIsLogging)"
PL/pgSQL function emaj._add_tbl(text,text,text,integer,text,text,text[],boolean,bigint,text) line 18 at PERFORM
SQL statement "SELECT emaj._add_tbl(p_schema, v_oneTable, p_group, v_priority, v_logDatTsp, v_logIdxTsp, v_selectedIgnoredTrgs,
                              v_groupIsLogging, v_timeId, v_function)"
PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 247 at PERFORM
PL/pgSQL function emaj.emaj_assign_table(text,text,text,jsonb,text) line 7 at RETURN
rollback;
-- attempting to assign emaj objects: referencing an emaj schema
select emaj.emaj_assign_table('emaj','emaj_param','myGroup1');
ERROR:  _assign_tables: The schema "emaj" is an E-Maj schema.
CONTEXT:  PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 52 at RAISE
PL/pgSQL function emaj.emaj_assign_table(text,text,text,jsonb,text) line 7 at RETURN
select emaj.emaj_assign_table('emaj_myschema1','mytbl1_log','myGroup1');
ERROR:  _assign_tables: The schema "emaj_myschema1" does not exist.
CONTEXT:  PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 45 at RAISE
PL/pgSQL function emaj.emaj_assign_table(text,text,text,jsonb,text) line 7 at RETURN
-- ok
--   various way to specify the triggers to ignore at rollback time
begin;
  select emaj.emaj_assign_table('myschema1','mytbl2','myGroup1','{"ignored_triggers":"mytbl2trg1"}'::jsonb);
WARNING:  _create_tbl: The table "myschema1.mytbl2" has triggers that will be automatically disabled during E-Maj rollback operations (mytbl2trg2). Use the emaj_modify_table() function to change this behaviour.
 emaj_assign_table 
-------------------
                 1
(1 row)

  select rel_ignored_triggers from emaj.emaj_relation where rel_schema = 'myschema1' and rel_tblseq = 'mytbl2';
 rel_ignored_triggers 
----------------------
 {mytbl2trg1}
(1 row)

rollback;
begin;
  select emaj.emaj_assign_table('myschema1','mytbl2','myGroup1','{"ignored_triggers_profiles":["mytbl2trg\\d"]}'::jsonb);
 emaj_assign_table 
-------------------
                 1
(1 row)

  select rel_ignored_triggers from emaj.emaj_relation where rel_schema = 'myschema1' and rel_tblseq = 'mytbl2';
  rel_ignored_triggers   
-------------------------
 {mytbl2trg1,mytbl2trg2}
(1 row)

rollback;
begin;
  select emaj.emaj_assign_tables('myschema1','.*', null, 'myGroup1','{"ignored_triggers_profiles":["trg1$", "trg2$"]}'::jsonb);
 emaj_assign_tables 
--------------------
                  5
(1 row)

  select rel_tblseq, rel_ignored_triggers from emaj.emaj_relation where rel_schema = 'myschema1';
 rel_tblseq |  rel_ignored_triggers   
------------+-------------------------
 myTbl3     | 
 mytbl1     | 
 mytbl2     | {mytbl2trg1,mytbl2trg2}
 mytbl2b    | 
 mytbl4     | 
(5 rows)

rollback;
begin;
  select emaj.emaj_assign_tables('myschema1','{"mytbl2"}','myGroup1','{"ignored_triggers":"mytbl2trg1", "ignored_triggers_profiles":["trg2$"]}'::jsonb);
 emaj_assign_tables 
--------------------
                  1
(1 row)

  select rel_ignored_triggers from emaj.emaj_relation where rel_schema = 'myschema1' and rel_tblseq = 'mytbl2';
  rel_ignored_triggers   
-------------------------
 {mytbl2trg1,mytbl2trg2}
(1 row)

rollback;
select emaj.emaj_assign_table('myschema1','mytbl1','myGroup1','{"priority":20, "ignored_triggers":null}'::jsonb);
 emaj_assign_table 
-------------------
                 1
(1 row)

select emaj.emaj_assign_table('myschema1','mytbl2','myGroup1','{"log_data_tablespace":"tsplog1", "log_index_tablespace":"tsplog1", "ignored_triggers":["mytbl2trg1", "mytbl2trg2"]}'::jsonb);
 emaj_assign_table 
-------------------
                 1
(1 row)

select emaj.emaj_assign_table('myschema1','mytbl2b','myGroup1','{"log_data_tablespace":"tsp log''2", "log_index_tablespace":"tsp log''2"}'::jsonb);
 emaj_assign_table 
-------------------
                 1
(1 row)

select emaj.emaj_assign_table('myschema1','myTbl3','myGroup1','{"priority":10, "log_data_tablespace":"tsplog1", "log_index_tablespace":null}'::jsonb);
 emaj_assign_table 
-------------------
                 1
(1 row)

select emaj.emaj_assign_table('myschema1','mytbl4','myGroup1','{"priority":20, "log_data_tablespace":"tsplog1", "log_index_tablespace":"tsp log''2"}'::jsonb);
 emaj_assign_table 
-------------------
                 1
(1 row)

-- already assigned table in the same group
select emaj.emaj_assign_table('myschema1','mytbl1','myGroup1');
ERROR:  _assign_tables: In schema myschema1, some tables (mytbl1) already belong to a group.
CONTEXT:  PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 137 at RAISE
PL/pgSQL function emaj.emaj_assign_table(text,text,text,jsonb,text) line 7 at RETURN
-----------------------------------
-- emaj_assign_tables with array
-----------------------------------
-- error cases
-- bad group name
select emaj.emaj_assign_tables('dummySchema',array['dummyTable'],'dummyGroup');
ERROR:  _check_group_names: The group "dummyGroup" does not exist.
CONTEXT:  PL/pgSQL function emaj._check_group_names(text[],boolean,boolean,boolean,boolean,boolean,boolean) line 42 at RAISE
SQL statement "SELECT emaj._check_group_names(p_groupNames := ARRAY[p_group], p_mayBeNull := FALSE, p_lockGroups := TRUE)"
PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 35 at PERFORM
PL/pgSQL function emaj.emaj_assign_tables(text,text[],text,jsonb,text) line 7 at RETURN
-- bad tables
select emaj.emaj_assign_tables('myschema1',array['dummytbl1','dummytbl2'],'phil''s group#3",');
ERROR:  _assign_tables: In schema myschema1, some tables (dummytbl1, dummytbl2) do not exist.
CONTEXT:  PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 78 at RAISE
PL/pgSQL function emaj.emaj_assign_tables(text,text[],text,jsonb,text) line 7 at RETURN
-- empty tables array
select emaj.emaj_assign_tables('myschema1',array[]::text[],'phil''s group#3",');
WARNING:  _assign_tables: No table to process.
 emaj_assign_tables 
--------------------
                  0
(1 row)

select emaj.emaj_assign_tables('myschema1',null,'phil''s group#3",');
WARNING:  _assign_tables: No table to process.
 emaj_assign_tables 
--------------------
                  0
(1 row)

select emaj.emaj_assign_tables('myschema1',array[''],'phil''s group#3",');
WARNING:  _assign_tables: No table to process.
 emaj_assign_tables 
--------------------
                  0
(1 row)

-- ok (with a duplicate table name)
select emaj.emaj_assign_tables('phil''s schema3',array['phil''s tbl1',E'myTbl2\\','phil''s tbl1'],'phil''s group#3",');
 emaj_assign_tables 
--------------------
                  2
(1 row)

-----------------------------------
-- emaj_assign_tables with filters
-----------------------------------
-- error cases
-- bad group name
select emaj.emaj_assign_tables('dummySchema','dummyIncludeFilter','dummyExcludeFilter','dummyGroup');
ERROR:  _check_group_names: The group "dummyGroup" does not exist.
CONTEXT:  PL/pgSQL function emaj._check_group_names(text[],boolean,boolean,boolean,boolean,boolean,boolean) line 42 at RAISE
SQL statement "SELECT emaj._check_group_names(p_groupNames := ARRAY[p_group], p_mayBeNull := FALSE, p_lockGroups := TRUE)"
PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 35 at PERFORM
PL/pgSQL function emaj.emaj_assign_tables(text,text,text,text,jsonb,text) line 26 at RETURN
-- bad schema
select emaj.emaj_assign_tables('dummySchema','dummyIncludeFilter','dummyExcludeFilter','myGroup2');
ERROR:  _assign_tables: The schema "dummySchema" does not exist.
CONTEXT:  PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 45 at RAISE
PL/pgSQL function emaj.emaj_assign_tables(text,text,text,text,jsonb,text) line 26 at RETURN
select emaj.emaj_assign_tables('emaj','dummyIncludeFilter','dummyExcludeFilter','myGroup2');
ERROR:  _assign_tables: The schema "emaj" is an E-Maj schema.
CONTEXT:  PL/pgSQL function emaj._assign_tables(text,text[],text,jsonb,text,boolean,boolean) line 52 at RAISE
PL/pgSQL function emaj.emaj_assign_tables(text,text,text,text,jsonb,text) line 26 at RETURN
-- empty tables array
select emaj.emaj_assign_tables('myschema2',null,null,'myGroup2');
WARNING:  _assign_tables: No table to process.
 emaj_assign_tables 
--------------------
                  0
(1 row)

select emaj.emaj_assign_tables('myschema2','','','myGroup2');
WARNING:  _assign_tables: No table to process.
 emaj_assign_tables 
--------------------
                  0
(1 row)

select emaj.emaj_assign_tables('myschema2','mytbl1','mytbl1','myGroup2');
WARNING:  _assign_tables: No table to process.
 emaj_assign_tables 
--------------------
                  0
(1 row)

-- excluded tables
-- bad types
select emaj.emaj_assign_tables('myschema4','mytblp$','','myGroup2');
WARNING:  _assign_tables: Some partitionned tables (mytblp) are not selected.
WARNING:  _assign_tables: No table to process.
 emaj_assign_tables 
--------------------
                  0
(1 row)

select emaj.emaj_assign_tables('myschema5','unlogged|oids','','myGroup2');
WARNING:  _assign_tables: Some UNLOGGED tables (myunloggedtbl) are not selected.
 emaj_assign_tables 
--------------------
                  1
(1 row)

-- the myoidstbl table is removed with PG12+: in these version the myoids table has no OIDS as this propertiy doesn't exist anymore
select emaj.emaj_remove_table('myschema5','myoidstbl');
 emaj_remove_table 
-------------------
                 1
(1 row)

-- temp table
begin;
  CREATE TEMPORARY TABLE myTempTbl (
    col1       INT     NOT NULL,
    PRIMARY KEY (col1)
  );
  select emaj.emaj_assign_tables(nspname,'mytemptbl','','myGroup2') from pg_class, pg_namespace
    where relnamespace = pg_namespace.oid and relname = 'mytemptbl';
WARNING:  _assign_tables: Some TEMP tables (mytemptbl) are not selected.
WARNING:  _assign_tables: No table to process.
 emaj_assign_tables 
--------------------
                  0
(1 row)

rollback;
-- table without pkey for a rollbackable group
select emaj.emaj_assign_tables('phil''s schema3','myTbl2\\','','myGroup2');
WARNING:  _assign_tables: Some tables without PRIMARY KEY ("myTbl2\") are not selected.
WARNING:  _assign_tables: No table to process.
 emaj_assign_tables 
--------------------
                  0
(1 row)

-- OK
select emaj.emaj_assign_tables('myschema2','mytbl.*','mytbl(5|6)$','myGroup2');
 emaj_assign_tables 
--------------------
                  5
(1 row)

select emaj.emaj_assign_tables('myschema2','myTbl.*','','myGroup2');
 emaj_assign_tables 
--------------------
                  1
(1 row)

select emaj.emaj_assign_tables('myschema2','mytbl(5|6)$','','myGroup2');
 emaj_assign_tables 
--------------------
                  2
(1 row)

-- already assigned
select emaj.emaj_assign_tables('myschema2','mytbl(5|6)$','','myGroup2');
WARNING:  _assign_tables: Some tables already belonging to a group (mytbl5, mytbl6) are not selected.
WARNING:  _assign_tables: No table to process.
 emaj_assign_tables 
--------------------
                  0
(1 row)

-- assign partitions
select emaj.emaj_assign_tables('myschema4','.*','mytbl(p|r)$','myGroup4');
WARNING:  _create_tbl: The table "myschema4.mytblm" has triggers that will be automatically disabled during E-Maj rollback operations (mytblm_insert_trigger). Use the emaj_modify_table() function to change this behaviour.
 emaj_assign_tables 
--------------------
                  5
(1 row)

-- assign unlogged and withoids tables in an audit_only group
select emaj.emaj_assign_tables('myschema5','.*',null,'myGroup5');
 emaj_assign_tables 
--------------------
                  2
(1 row)

-- assign tables with very long names
select emaj.emaj_assign_tables('myschema6','table_with_\d\d_characters_long_name.*',null,'myGroup6');
 emaj_assign_tables 
--------------------
                  4
(1 row)

-----------------------
-- emaj_assign_sequence
-----------------------
-- error cases
-- bad group name
select emaj.emaj_assign_sequence('myschema2','myseq1','dummyGroup');
ERROR:  _check_group_names: The group "dummyGroup" does not exist.
CONTEXT:  PL/pgSQL function emaj._check_group_names(text[],boolean,boolean,boolean,boolean,boolean,boolean) line 42 at RAISE
SQL statement "SELECT emaj._check_group_names(p_groupNames := ARRAY[p_group], p_mayBeNull := FALSE, p_lockGroups := TRUE)"
PL/pgSQL function emaj._assign_sequences(text,text[],text,text,boolean,boolean) line 24 at PERFORM
PL/pgSQL function emaj.emaj_assign_sequence(text,text,text,text) line 6 at RETURN
-- bad schema
select emaj.emaj_assign_sequence('dummySchema','myseq1','myGroup2');
ERROR:  _assign_sequences: The schema "dummySchema" does not exist.
CONTEXT:  PL/pgSQL function emaj._assign_sequences(text,text[],text,text,boolean,boolean) line 34 at RAISE
PL/pgSQL function emaj.emaj_assign_sequence(text,text,text,text) line 6 at RETURN
select emaj.emaj_assign_sequence('emaj','myseq1','myGroup2');
ERROR:  _assign_sequences: The schema "emaj" is an E-Maj schema.
CONTEXT:  PL/pgSQL function emaj._assign_sequences(text,text[],text,text,boolean,boolean) line 41 at RAISE
PL/pgSQL function emaj.emaj_assign_sequence(text,text,text,text) line 6 at RETURN
-- bad sequence
select emaj.emaj_assign_sequence('myschema2','dummySequence','myGroup2');
ERROR:  _assign_sequences: In schema myschema2, some sequences ("dummySequence") do not exist.
CONTEXT:  PL/pgSQL function emaj._assign_sequences(text,text[],text,text,boolean,boolean) line 65 at RAISE
PL/pgSQL function emaj.emaj_assign_sequence(text,text,text,text) line 6 at RETURN
-- bad mark
select emaj.emaj_assign_sequence('myschema2','myseq1','myGroup2','EMAJ_LAST_MARK');
ERROR:  _check_new_mark: "EMAJ_LAST_MARK" is not an allowed name for a new mark.
CONTEXT:  PL/pgSQL function emaj._check_new_mark(text[],text) line 14 at RAISE
SQL statement "SELECT emaj._check_new_mark(array[p_group], p_mark)"
PL/pgSQL function emaj._assign_sequences(text,text[],text,text,boolean,boolean) line 89 at SQL statement
PL/pgSQL function emaj.emaj_assign_sequence(text,text,text,text) line 6 at RETURN
-- ok
select emaj.emaj_assign_sequence('myschema2','myseq1','myGroup2');
 emaj_assign_sequence 
----------------------
                    1
(1 row)

-- already assigned sequence
select emaj.emaj_assign_sequence('myschema2','myseq1','myGroup2');
ERROR:  _assign_sequences: In schema myschema2, some sequences (myseq1) already belong to a group.
CONTEXT:  PL/pgSQL function emaj._assign_sequences(text,text[],text,text,boolean,boolean) line 76 at RAISE
PL/pgSQL function emaj.emaj_assign_sequence(text,text,text,text) line 6 at RETURN
-----------------------------------
-- emaj_assign_sequences with array
-----------------------------------
-- error cases
-- bad group name
select emaj.emaj_assign_sequences('dummySchema',array['dummySequence'],'dummyGroup');
ERROR:  _check_group_names: The group "dummyGroup" does not exist.
CONTEXT:  PL/pgSQL function emaj._check_group_names(text[],boolean,boolean,boolean,boolean,boolean,boolean) line 42 at RAISE
SQL statement "SELECT emaj._check_group_names(p_groupNames := ARRAY[p_group], p_mayBeNull := FALSE, p_lockGroups := TRUE)"
PL/pgSQL function emaj._assign_sequences(text,text[],text,text,boolean,boolean) line 24 at PERFORM
PL/pgSQL function emaj.emaj_assign_sequences(text,text[],text,text) line 7 at RETURN
-- bad sequences
select emaj.emaj_assign_sequences('myschema2',array['dummyseq1','dummyseq2'],'myGroup2');
ERROR:  _assign_sequences: In schema myschema2, some sequences (dummyseq1, dummyseq2) do not exist.
CONTEXT:  PL/pgSQL function emaj._assign_sequences(text,text[],text,text,boolean,boolean) line 65 at RAISE
PL/pgSQL function emaj.emaj_assign_sequences(text,text[],text,text) line 7 at RETURN
-- empty sequences array
select emaj.emaj_assign_sequences('myschema2',array[]::text[],'myGroup2');
WARNING:  _assign_sequences: No sequence to process.
 emaj_assign_sequences 
-----------------------
                     0
(1 row)

select emaj.emaj_assign_sequences('myschema2',null,'myGroup2');
WARNING:  _assign_sequences: No sequence to process.
 emaj_assign_sequences 
-----------------------
                     0
(1 row)

select emaj.emaj_assign_sequences('myschema2',array[''],'myGroup2');
WARNING:  _assign_sequences: No sequence to process.
 emaj_assign_sequences 
-----------------------
                     0
(1 row)

-- ok (with a duplicate sequence name)
select emaj.emaj_assign_sequences('myschema2',array['myTbl3_col31_seq','myTbl3_col31_seq'],'myGroup2');
 emaj_assign_sequences 
-----------------------
                     1
(1 row)

-- assign sequences with double_quoted names
select emaj.emaj_assign_sequences('phil''s schema3',array[E'myTbl2\\_col21_seq',E'phil''s seq\\1'],'phil''s group#3",');
 emaj_assign_sequences 
-----------------------
                     2
(1 row)

-----------------------------------
-- emaj_assign_sequences with filters
-----------------------------------
-- error cases
-- bad group name
select emaj.emaj_assign_sequences('dummySchema','dummyIncludeFilter','dummyExcludeFilter','dummyGroup');
ERROR:  _check_group_names: The group "dummyGroup" does not exist.
CONTEXT:  PL/pgSQL function emaj._check_group_names(text[],boolean,boolean,boolean,boolean,boolean,boolean) line 42 at RAISE
SQL statement "SELECT emaj._check_group_names(p_groupNames := ARRAY[p_group], p_mayBeNull := FALSE, p_lockGroups := TRUE)"
PL/pgSQL function emaj._assign_sequences(text,text[],text,text,boolean,boolean) line 24 at PERFORM
PL/pgSQL function emaj.emaj_assign_sequences(text,text,text,text,text) line 26 at RETURN
-- bad schema
select emaj.emaj_assign_sequences('dummySchema','dummyIncludeFilter','dummyExcludeFilter','myGroup1');
ERROR:  _assign_sequences: The schema "dummySchema" does not exist.
CONTEXT:  PL/pgSQL function emaj._assign_sequences(text,text[],text,text,boolean,boolean) line 34 at RAISE
PL/pgSQL function emaj.emaj_assign_sequences(text,text,text,text,text) line 26 at RETURN
select emaj.emaj_assign_sequences('emaj','dummyIncludeFilter','dummyExcludeFilter','myGroup1');
ERROR:  _assign_sequences: The schema "emaj" is an E-Maj schema.
CONTEXT:  PL/pgSQL function emaj._assign_sequences(text,text[],text,text,boolean,boolean) line 41 at RAISE
PL/pgSQL function emaj.emaj_assign_sequences(text,text,text,text,text) line 26 at RETURN
-- empty sequences array
select emaj.emaj_assign_sequences('myschema1',null,null,'myGroup1');
WARNING:  _assign_sequences: No sequence to process.
 emaj_assign_sequences 
-----------------------
                     0
(1 row)

select emaj.emaj_assign_sequences('myschema1','','','myGroup1');
WARNING:  _assign_sequences: No sequence to process.
 emaj_assign_sequences 
-----------------------
                     0
(1 row)

select emaj.emaj_assign_sequences('myschema1','myTbl3_col31_seq','myTbl3_col31_seq','myGroup1');
WARNING:  _assign_sequences: No sequence to process.
 emaj_assign_sequences 
-----------------------
                     0
(1 row)

-- already assigned
select emaj.emaj_assign_sequences('myschema2','myseq1.*','','myGroup2');
WARNING:  _assign_sequences: Some sequences already belonging to a group (myseq1) are not selected.
WARNING:  _assign_sequences: No sequence to process.
 emaj_assign_sequences 
-----------------------
                     0
(1 row)

-- OK
select emaj.emaj_assign_sequences('myschema1','my.*_seq','myseq1$','myGroup1');
 emaj_assign_sequences 
-----------------------
                     2
(1 row)

-----------------------------------
-- check populated groups
-----------------------------------
select group_name, group_is_rollbackable, group_last_alter_time_id, group_is_logging,
       group_is_rlbk_protected, group_nb_table, group_nb_sequence, group_comment
  from emaj.emaj_group order by group_name;
    group_name    | group_is_rollbackable | group_last_alter_time_id | group_is_logging | group_is_rlbk_protected | group_nb_table | group_nb_sequence | group_comment  
------------------+-----------------------+--------------------------+------------------+-------------------------+----------------+-------------------+----------------
 emptyGroup       | t                     |                          | f                | f                       |              0 |                 0 | an empty group
 myGroup1         | t                     |                     1033 | f                | f                       |              5 |                 2 | 
 myGroup2         | t                     |                     1031 | f                | f                       |              8 |                 2 | 
 myGroup4         | t                     |                     1027 | f                | f                       |              5 |                 0 | 
 myGroup5         | f                     |                     1028 | f                | t                       |              2 |                 0 | 
 myGroup6         | t                     |                     1029 | f                | f                       |              4 |                 0 | 
 phil's group#3", | f                     |                     1032 | f                | t                       |              2 |                 2 | 
(7 rows)

select * from emaj.emaj_group_hist order by grph_group, grph_time_range;
    grph_group    | grph_time_range | grph_is_rollbackable | grph_log_sessions 
------------------+-----------------+----------------------+-------------------
 emptyGroup       | [1000,)         | t                    |                 0
 myGroup1         | [1001,)         | t                    |                 0
 myGroup2         | [1002,)         | t                    |                 0
 myGroup4         | [1004,)         | t                    |                 0
 myGroup5         | [1005,)         | f                    |                 0
 myGroup6         | [1006,)         | t                    |                 0
 phil's group#3", | [1003,)         | f                    |                 0
(7 rows)

select * from emaj.emaj_relation order by rel_group, rel_priority, rel_schema, rel_tblseq, rel_time_range;
   rel_schema   |                       rel_tblseq                        | rel_time_range |    rel_group     | rel_kind | rel_priority |   rel_log_schema    |                      rel_log_table                       | rel_log_dat_tsp |                        rel_log_index                         | rel_log_idx_tsp |                       rel_log_sequence                       |                       rel_log_function                        |  rel_ignored_triggers   |           rel_pk_cols           | rel_emaj_verb_attnum | rel_has_always_ident_col |                                   rel_sql_rlbk_columns                                    | rel_sql_gen_ins_col |                                                                                                                                                       rel_sql_gen_ins_val                                                                                                                                                        |                                                                                                                                                                                            rel_sql_gen_upd_set                                                                                                                                                                                            |                                          rel_sql_gen_pk_conditions                                           | rel_log_seq_last_value 
----------------+---------------------------------------------------------+----------------+------------------+----------+--------------+---------------------+----------------------------------------------------------+-----------------+--------------------------------------------------------------+-----------------+--------------------------------------------------------------+---------------------------------------------------------------+-------------------------+---------------------------------+----------------------+--------------------------+-------------------------------------------------------------------------------------------+---------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------+------------------------
 myschema1      | myTbl3                                                  | [1019,)        | myGroup1         | r        |           10 | emaj_myschema1      | myTbl3_log                                               | tsplog1         | myTbl3_log_idx                                               |                 | myTbl3_log_seq                                               | myTbl3_log_fnct                                               |                         | {col31}                         |                    4 | f                        | tbl.col31,tbl.col32,tbl.col33                                                             |                     | ' || coalesce(o.col31::TEXT,'NULL') || ', ' || quote_nullable(o.col32) || ', ' || coalesce(o.col33::TEXT,'NULL') || '                                                                                                                                                                                                            | col31 = ' || coalesce(n.col31 ::TEXT,'NULL') || ', col32 = ' || quote_nullable(n.col32) || ', col33 = ' || coalesce(n.col33 ::TEXT,'NULL') || '                                                                                                                                                                                                                                                           | col31 = ' || o.col31 || '                                                                                    |                       
 myschema1      | mytbl1                                                  | [1016,)        | myGroup1         | r        |           20 | emaj_myschema1      | mytbl1_log                                               |                 | mytbl1_log_idx                                               |                 | mytbl1_log_seq                                               | mytbl1_log_fnct                                               |                         | {col11,col12}                   |                    4 | f                        | tbl.col11,tbl.col12,tbl.col13                                                             |                     | ' || coalesce(o.col11::TEXT,'NULL') || ', ' || quote_nullable(o.col12) || ', ' || quote_nullable(o.col13) || '                                                                                                                                                                                                                   | col11 = ' || coalesce(n.col11 ::TEXT,'NULL') || ', col12 = ' || quote_nullable(n.col12) || ', col13 = ' || quote_nullable(n.col13) || '                                                                                                                                                                                                                                                                   | col11 = ' || o.col11 || ' AND col12 = ' || quote_literal(o.col12) || '                                       |                       
 myschema1      | mytbl4                                                  | [1020,)        | myGroup1         | r        |           20 | emaj_myschema1      | mytbl4_log                                               | tsplog1         | mytbl4_log_idx                                               | tsp log'2       | mytbl4_log_seq                                               | mytbl4_log_fnct                                               |                         | {col41,col43}                   |                    6 | f                        | tbl.col41,tbl.col42,tbl.col43,tbl.col44,tbl.col45                                         |                     | ' || coalesce(o.col41::TEXT,'NULL') || ', ' || quote_nullable(o.col42) || ', ' || coalesce(o.col43::TEXT,'NULL') || ', ' || coalesce(o.col44::TEXT,'NULL') || ', ' || quote_nullable(o.col45) || '                                                                                                                               | col41 = ' || coalesce(n.col41 ::TEXT,'NULL') || ', col42 = ' || quote_nullable(n.col42) || ', col43 = ' || coalesce(n.col43 ::TEXT,'NULL') || ', col44 = ' || coalesce(n.col44 ::TEXT,'NULL') || ', col45 = ' || quote_nullable(n.col45) || '                                                                                                                                                             | col41 = ' || o.col41 || ' AND col43 = ' || o.col43 || '                                                      |                       
 myschema1      | myTbl3_col31_seq                                        | [1033,)        | myGroup1         | S        |              |                     |                                                          |                 |                                                              |                 |                                                              |                                                               |                         |                                 |                      |                          |                                                                                           |                     |                                                                                                                                                                                                                                                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                           |                                                                                                              |                       
 myschema1      | mytbl2                                                  | [1017,)        | myGroup1         | r        |              | emaj_myschema1      | mytbl2_log                                               | tsplog1         | mytbl2_log_idx                                               | tsplog1         | mytbl2_log_seq                                               | mytbl2_log_fnct                                               | {mytbl2trg1,mytbl2trg2} | {col21}                         |                    4 | f                        | tbl.col21,tbl.col22,tbl.col23                                                             |                     | ' || coalesce(o.col21::TEXT,'NULL') || ', ' || quote_nullable(o.col22) || ', ' || quote_nullable(o.col23) || '                                                                                                                                                                                                                   | col21 = ' || coalesce(n.col21 ::TEXT,'NULL') || ', col22 = ' || quote_nullable(n.col22) || ', col23 = ' || quote_nullable(n.col23) || '                                                                                                                                                                                                                                                                   | col21 = ' || o.col21 || '                                                                                    |                       
 myschema1      | mytbl2b                                                 | [1018,)        | myGroup1         | r        |              | emaj_myschema1      | mytbl2b_log                                              | tsp log'2       | mytbl2b_log_idx                                              | tsp log'2       | mytbl2b_log_seq                                              | mytbl2b_log_fnct                                              |                         | {col20}                         |                    5 | t                        | tbl.col20,tbl.col21,tbl.col23                                                             | col20, col21, col23 | ' || coalesce(o.col20::TEXT,'NULL') || ', ' || coalesce(o.col21::TEXT,'NULL') || ', ' || quote_nullable(o.col23) || '                                                                                                                                                                                                            | col21 = ' || coalesce(n.col21 ::TEXT,'NULL') || ', col23 = ' || quote_nullable(n.col23) || '                                                                                                                                                                                                                                                                                                              | col20 = ' || o.col20 || '                                                                                    |                       
 myschema1      | mytbl2b_col20_seq                                       | [1033,)        | myGroup1         | S        |              |                     |                                                          |                 |                                                              |                 |                                                              |                                                               |                         |                                 |                      |                          |                                                                                           |                     |                                                                                                                                                                                                                                                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                           |                                                                                                              |                       
 myschema2      | myTbl3                                                  | [1025,)        | myGroup2         | r        |              | emaj_myschema2      | myTbl3_log                                               |                 | myTbl3_log_idx                                               |                 | myTbl3_log_seq                                               | myTbl3_log_fnct                                               |                         | {col31}                         |                    4 | f                        | tbl.col31,tbl.col32,tbl.col33                                                             |                     | ' || coalesce(o.col31::TEXT,'NULL') || ', ' || quote_nullable(o.col32) || ', ' || coalesce(o.col33::TEXT,'NULL') || '                                                                                                                                                                                                            | col31 = ' || coalesce(n.col31 ::TEXT,'NULL') || ', col32 = ' || quote_nullable(n.col32) || ', col33 = ' || coalesce(n.col33 ::TEXT,'NULL') || '                                                                                                                                                                                                                                                           | col31 = ' || o.col31 || '                                                                                    |                       
 myschema2      | myTbl3_col31_seq                                        | [1031,)        | myGroup2         | S        |              |                     |                                                          |                 |                                                              |                 |                                                              |                                                               |                         |                                 |                      |                          |                                                                                           |                     |                                                                                                                                                                                                                                                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                           |                                                                                                              |                       
 myschema2      | myseq1                                                  | [1030,)        | myGroup2         | S        |              |                     |                                                          |                 |                                                              |                 |                                                              |                                                               |                         |                                 |                      |                          |                                                                                           |                     |                                                                                                                                                                                                                                                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                           |                                                                                                              |                       
 myschema2      | mytbl1                                                  | [1024,)        | myGroup2         | r        |              | emaj_myschema2      | mytbl1_log                                               |                 | mytbl1_log_idx                                               |                 | mytbl1_log_seq                                               | mytbl1_log_fnct                                               |                         | {col11,col12}                   |                    4 | f                        | tbl.col11,tbl.col12,tbl.col13                                                             |                     | ' || coalesce(o.col11::TEXT,'NULL') || ', ' || quote_nullable(o.col12) || ', ' || quote_nullable(o.col13) || '                                                                                                                                                                                                                   | col11 = ' || coalesce(n.col11 ::TEXT,'NULL') || ', col12 = ' || quote_nullable(n.col12) || ', col13 = ' || quote_nullable(n.col13) || '                                                                                                                                                                                                                                                                   | col11 = ' || o.col11 || ' AND col12 = ' || quote_literal(o.col12) || '                                       |                       
 myschema2      | mytbl2                                                  | [1024,)        | myGroup2         | r        |              | emaj_myschema2      | mytbl2_log                                               |                 | mytbl2_log_idx                                               |                 | mytbl2_log_seq                                               | mytbl2_log_fnct                                               |                         | {col21}                         |                    4 | f                        | tbl.col21,tbl.col22,tbl.col23                                                             |                     | ' || coalesce(o.col21::TEXT,'NULL') || ', ' || quote_nullable(o.col22) || ', ' || quote_nullable(o.col23) || '                                                                                                                                                                                                                   | col21 = ' || coalesce(n.col21 ::TEXT,'NULL') || ', col22 = ' || quote_nullable(n.col22) || ', col23 = ' || quote_nullable(n.col23) || '                                                                                                                                                                                                                                                                   | col21 = ' || o.col21 || '                                                                                    |                       
 myschema2      | mytbl4                                                  | [1024,)        | myGroup2         | r        |              | emaj_myschema2      | mytbl4_log                                               |                 | mytbl4_log_idx                                               |                 | mytbl4_log_seq                                               | mytbl4_log_fnct                                               |                         | {col41}                         |                    6 | f                        | tbl.col41,tbl.col42,tbl.col43,tbl.col44,tbl.col45                                         |                     | ' || coalesce(o.col41::TEXT,'NULL') || ', ' || quote_nullable(o.col42) || ', ' || coalesce(o.col43::TEXT,'NULL') || ', ' || coalesce(o.col44::TEXT,'NULL') || ', ' || quote_nullable(o.col45) || '                                                                                                                               | col41 = ' || coalesce(n.col41 ::TEXT,'NULL') || ', col42 = ' || quote_nullable(n.col42) || ', col43 = ' || coalesce(n.col43 ::TEXT,'NULL') || ', col44 = ' || coalesce(n.col44 ::TEXT,'NULL') || ', col45 = ' || quote_nullable(n.col45) || '                                                                                                                                                             | col41 = ' || o.col41 || '                                                                                    |                       
 myschema2      | mytbl5                                                  | [1026,)        | myGroup2         | r        |              | emaj_myschema2      | mytbl5_log                                               |                 | mytbl5_log_idx                                               |                 | mytbl5_log_seq                                               | mytbl5_log_fnct                                               |                         | {col51}                         |                   10 | f                        | tbl.col51,tbl.col52,tbl.col53,tbl.col54,tbl.col55,tbl.col56,tbl.col57,tbl.col58,tbl.col59 |                     | ' || coalesce(o.col51::TEXT,'NULL') || ', ' || quote_nullable(o.col52) || ', ' || quote_nullable(o.col53) || ', ' || quote_nullable(o.col54) || ', ' || quote_nullable(o.col55) || ', ' || quote_nullable(o.col56) || ', ' || quote_nullable(o.col57) || ', ' || quote_nullable(o.col58) || ', ' || quote_nullable(o.col59) || ' | col51 = ' || coalesce(n.col51 ::TEXT,'NULL') || ', col52 = ' || quote_nullable(n.col52) || ', col53 = ' || quote_nullable(n.col53) || ', col54 = ' || quote_nullable(n.col54) || ', col55 = ' || quote_nullable(n.col55) || ', col56 = ' || quote_nullable(n.col56) || ', col57 = ' || quote_nullable(n.col57) || ', col58 = ' || quote_nullable(n.col58) || ', col59 = ' || quote_nullable(n.col59) || ' | col51 = ' || o.col51 || '                                                                                    |                       
 myschema2      | mytbl6                                                  | [1026,)        | myGroup2         | r        |              | emaj_myschema2      | mytbl6_log                                               |                 | mytbl6_log_idx                                               |                 | mytbl6_log_seq                                               | mytbl6_log_fnct                                               |                         | {col61}                         |                    9 | f                        | tbl.col61,tbl.col62,tbl.col63,tbl.col64,tbl.col65,tbl.col66,tbl.col67,tbl.col68           |                     | ' || coalesce(o.col61::TEXT,'NULL') || ', ' || quote_nullable(o.col62) || ', ' || quote_nullable(o.col63) || ', ' || quote_nullable(o.col64) || ', ' || quote_nullable(o.col65) || ', ' || quote_nullable(o.col66) || ', ' || quote_nullable(o.col67) || ', ' || quote_nullable(o.col68) || '                                    | col61 = ' || coalesce(n.col61 ::TEXT,'NULL') || ', col62 = ' || quote_nullable(n.col62) || ', col63 = ' || quote_nullable(n.col63) || ', col64 = ' || quote_nullable(n.col64) || ', col65 = ' || quote_nullable(n.col65) || ', col66 = ' || quote_nullable(n.col66) || ', col67 = ' || quote_nullable(n.col67) || ', col68 = ' || quote_nullable(n.col68) || '                                            | col61 = ' || o.col61 || '                                                                                    |                       
 myschema2      | mytbl7                                                  | [1024,)        | myGroup2         | r        |              | emaj_myschema2      | mytbl7_log                                               |                 | mytbl7_log_idx                                               |                 | mytbl7_log_seq                                               | mytbl7_log_fnct                                               |                         | {col71}                         |                    2 | f                        | tbl.col71                                                                                 |                     | ' || coalesce(o.col71::TEXT,'NULL') || '                                                                                                                                                                                                                                                                                         | col71 = ' || coalesce(n.col71 ::TEXT,'NULL') || '                                                                                                                                                                                                                                                                                                                                                         | col71 = ' || o.col71 || '                                                                                    |                       
 myschema2      | mytbl8                                                  | [1024,)        | myGroup2         | r        |              | emaj_myschema2      | mytbl8_log                                               |                 | mytbl8_log_idx                                               |                 | mytbl8_log_seq                                               | mytbl8_log_fnct                                               |                         | {col81}                         |                    2 | f                        | tbl.col81                                                                                 |                     | ' || coalesce(o.col81::TEXT,'NULL') || '                                                                                                                                                                                                                                                                                         | col81 = ' || coalesce(n.col81 ::TEXT,'NULL') || '                                                                                                                                                                                                                                                                                                                                                         | col81 = ' || o.col81 || '                                                                                    |                       
 myschema4      | mypartp1                                                | [1027,)        | myGroup4         | r        |              | emaj_myschema4      | mypartp1_log                                             |                 | mypartp1_log_idx                                             |                 | mypartp1_log_seq                                             | mypartp1_log_fnct                                             |                         | {col1}                          |                    4 | f                        | tbl.col1,tbl.col2,tbl.col3                                                                |                     | ' || coalesce(o.col1::TEXT,'NULL') || ', ' || quote_nullable(o.col2) || ', ' || coalesce(o.col3::TEXT,'NULL') || '                                                                                                                                                                                                               | col1 = ' || coalesce(n.col1 ::TEXT,'NULL') || ', col2 = ' || quote_nullable(n.col2) || ', col3 = ' || coalesce(n.col3 ::TEXT,'NULL') || '                                                                                                                                                                                                                                                                 | col1 = ' || o.col1 || '                                                                                      |                       
 myschema4      | mypartp2                                                | [1027,)        | myGroup4         | r        |              | emaj_myschema4      | mypartp2_log                                             |                 | mypartp2_log_idx                                             |                 | mypartp2_log_seq                                             | mypartp2_log_fnct                                             |                         | {col1}                          |                    4 | f                        | tbl.col1,tbl.col2,tbl.col3                                                                |                     | ' || coalesce(o.col1::TEXT,'NULL') || ', ' || quote_nullable(o.col2) || ', ' || coalesce(o.col3::TEXT,'NULL') || '                                                                                                                                                                                                               | col1 = ' || coalesce(n.col1 ::TEXT,'NULL') || ', col2 = ' || quote_nullable(n.col2) || ', col3 = ' || coalesce(n.col3 ::TEXT,'NULL') || '                                                                                                                                                                                                                                                                 | col1 = ' || o.col1 || '                                                                                      |                       
 myschema4      | mytblc1                                                 | [1027,)        | myGroup4         | r        |              | emaj_myschema4      | mytblc1_log                                              |                 | mytblc1_log_idx                                              |                 | mytblc1_log_seq                                              | mytblc1_log_fnct                                              |                         | {col1,col2}                     |                    4 | f                        | tbl.col1,tbl.col2,tbl.col3                                                                |                     | ' || quote_nullable(o.col1) || ', ' || coalesce(o.col2::TEXT,'NULL') || ', ' || quote_nullable(o.col3) || '                                                                                                                                                                                                                      | col1 = ' || quote_nullable(n.col1) || ', col2 = ' || coalesce(n.col2 ::TEXT,'NULL') || ', col3 = ' || quote_nullable(n.col3) || '                                                                                                                                                                                                                                                                         | col1 = ' || quote_literal(o.col1) || ' AND col2 = ' || o.col2 || '                                           |                       
 myschema4      | mytblc2                                                 | [1027,)        | myGroup4         | r        |              | emaj_myschema4      | mytblc2_log                                              |                 | mytblc2_log_idx                                              |                 | mytblc2_log_seq                                              | mytblc2_log_fnct                                              |                         | {col1,col2}                     |                    4 | f                        | tbl.col1,tbl.col2,tbl.col3                                                                |                     | ' || quote_nullable(o.col1) || ', ' || coalesce(o.col2::TEXT,'NULL') || ', ' || quote_nullable(o.col3) || '                                                                                                                                                                                                                      | col1 = ' || quote_nullable(n.col1) || ', col2 = ' || coalesce(n.col2 ::TEXT,'NULL') || ', col3 = ' || quote_nullable(n.col3) || '                                                                                                                                                                                                                                                                         | col1 = ' || quote_literal(o.col1) || ' AND col2 = ' || o.col2 || '                                           |                       
 myschema4      | mytblm                                                  | [1027,)        | myGroup4         | r        |              | emaj_myschema4      | mytblm_log                                               |                 | mytblm_log_idx                                               |                 | mytblm_log_seq                                               | mytblm_log_fnct                                               |                         | {col1}                          |                    4 | f                        | tbl.col1,tbl.col2,tbl.col3                                                                |                     | ' || quote_nullable(o.col1) || ', ' || coalesce(o.col2::TEXT,'NULL') || ', ' || quote_nullable(o.col3) || '                                                                                                                                                                                                                      | col1 = ' || quote_nullable(n.col1) || ', col2 = ' || coalesce(n.col2 ::TEXT,'NULL') || ', col3 = ' || quote_nullable(n.col3) || '                                                                                                                                                                                                                                                                         | col1 = ' || quote_literal(o.col1) || '                                                                       |                       
 myschema5      | myoidstbl                                               | [1028,)        | myGroup5         | r        |              | emaj_myschema5      | myoidstbl_log                                            |                 | myoidstbl_log_idx                                            |                 | myoidstbl_log_seq                                            | myoidstbl_log_fnct                                            |                         | {col1}                          |                    2 | f                        | tbl.col1                                                                                  |                     | ' || coalesce(o.col1::TEXT,'NULL') || '                                                                                                                                                                                                                                                                                          | col1 = ' || coalesce(n.col1 ::TEXT,'NULL') || '                                                                                                                                                                                                                                                                                                                                                           | col1 = ' || o.col1 || '                                                                                      |                       
 myschema5      | myunloggedtbl                                           | [1028,)        | myGroup5         | r        |              | emaj_myschema5      | myunloggedtbl_log                                        |                 | myunloggedtbl_log_idx                                        |                 | myunloggedtbl_log_seq                                        | myunloggedtbl_log_fnct                                        |                         | {col1}                          |                    2 | f                        | tbl.col1                                                                                  |                     | ' || coalesce(o.col1::TEXT,'NULL') || '                                                                                                                                                                                                                                                                                          | col1 = ' || coalesce(n.col1 ::TEXT,'NULL') || '                                                                                                                                                                                                                                                                                                                                                           | col1 = ' || o.col1 || '                                                                                      |                       
 myschema6      | table_with_50_characters_long_name_____0_________0      | [1029,)        | myGroup6         | r        |              | emaj_myschema6      | table_with_50_characters_long_name_____0_________0_log   |                 | table_with_50_characters_long_name_____0_________0_log_idx   |                 | table_with_50_characters_long_name_____0_________0_log_seq   | table_with_50_characters_long_name_____0_________0_log_fnct   |                         | {col1}                          |                    2 | f                        | tbl.col1                                                                                  |                     | ' || coalesce(o.col1::TEXT,'NULL') || '                                                                                                                                                                                                                                                                                          | col1 = ' || coalesce(n.col1 ::TEXT,'NULL') || '                                                                                                                                                                                                                                                                                                                                                           | col1 = ' || o.col1 || '                                                                                      |                       
 myschema6      | table_with_51_characters_long_name_____0_________0a     | [1029,)        | myGroup6         | r        |              | emaj_myschema6      | table_with_51_characters_long_name_____0_________0#1_log |                 | table_with_51_characters_long_name_____0_________0#1_log_idx |                 | table_with_51_characters_long_name_____0_________0#1_log_seq | table_with_51_characters_long_name_____0_________0#1_log_fnct |                         | {col1}                          |                    2 | f                        | tbl.col1                                                                                  |                     | ' || coalesce(o.col1::TEXT,'NULL') || '                                                                                                                                                                                                                                                                                          | col1 = ' || coalesce(n.col1 ::TEXT,'NULL') || '                                                                                                                                                                                                                                                                                                                                                           | col1 = ' || o.col1 || '                                                                                      |                       
 myschema6      | table_with_55_characters_long_name_____0_________0abcde | [1029,)        | myGroup6         | r        |              | emaj_myschema6      | table_with_55_characters_long_name_____0_________0#1_log |                 | table_with_55_characters_long_name_____0_________0#1_log_idx |                 | table_with_55_characters_long_name_____0_________0#1_log_seq | table_with_55_characters_long_name_____0_________0#1_log_fnct |                         | {col1}                          |                    2 | f                        | tbl.col1                                                                                  |                     | ' || coalesce(o.col1::TEXT,'NULL') || '                                                                                                                                                                                                                                                                                          | col1 = ' || coalesce(n.col1 ::TEXT,'NULL') || '                                                                                                                                                                                                                                                                                                                                                           | col1 = ' || o.col1 || '                                                                                      |                       
 myschema6      | table_with_55_characters_long_name_____0_________0fghij | [1029,)        | myGroup6         | r        |              | emaj_myschema6      | table_with_55_characters_long_name_____0_________0#2_log |                 | table_with_55_characters_long_name_____0_________0#2_log_idx |                 | table_with_55_characters_long_name_____0_________0#2_log_seq | table_with_55_characters_long_name_____0_________0#2_log_fnct |                         | {col1}                          |                    2 | f                        | tbl.col1                                                                                  |                     | ' || coalesce(o.col1::TEXT,'NULL') || '                                                                                                                                                                                                                                                                                          | col1 = ' || coalesce(n.col1 ::TEXT,'NULL') || '                                                                                                                                                                                                                                                                                                                                                           | col1 = ' || o.col1 || '                                                                                      |                       
 phil's schema3 | myTbl2\                                                 | [1021,)        | phil's group#3", | r        |              | emaj_phil's schema3 | myTbl2\_log                                              |                 | myTbl2\_log_idx                                              |                 | myTbl2\_log_seq                                              | myTbl2\_log_fnct                                              |                         |                                 |                    4 |                          |                                                                                           |                     |                                                                                                                                                                                                                                                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                           |                                                                                                              |                       
 phil's schema3 | myTbl2\_col21_seq                                       | [1032,)        | phil's group#3", | S        |              |                     |                                                          |                 |                                                              |                 |                                                              |                                                               |                         |                                 |                      |                          |                                                                                           |                     |                                                                                                                                                                                                                                                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                           |                                                                                                              |                       
 phil's schema3 | phil's seq\1                                            | [1032,)        | phil's group#3", | S        |              |                     |                                                          |                 |                                                              |                 |                                                              |                                                               |                         |                                 |                      |                          |                                                                                           |                     |                                                                                                                                                                                                                                                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                           |                                                                                                              |                       
 phil's schema3 | phil's tbl1                                             | [1021,)        | phil's group#3", | r        |              | emaj_phil's schema3 | phil's tbl1_log                                          |                 | phil's tbl1_log_idx                                          |                 | phil's tbl1_log_seq                                          | phil's tbl1_log_fnct                                          |                         | {"phil's col11","phil's col12"} |                    4 | f                        | tbl."phil's col11",tbl."phil's col12",tbl."phil\s col13"                                  |                     | ' || coalesce(o."phil's col11"::TEXT,'NULL') || ', ' || quote_nullable(o."phil's col12") || ', ' || quote_nullable(o."phil\s col13") || '                                                                                                                                                                                        | "phil''s col11" = ' || coalesce(n."phil's col11" ::TEXT,'NULL') || ', "phil''s col12" = ' || quote_nullable(n."phil's col12") || ', "phil\s col13" = ' || quote_nullable(n."phil\s col13") || '                                                                                                                                                                                                           | "phil''s col11" = ' || o."phil's col11" || ' AND "phil''s col12" = ' || quote_literal(o."phil's col12") || ' |                       
(32 rows)

select schemaname, tablename, tableowner, tablespace from pg_tables where schemaname like 'emaj\_%' order by schemaname, tablename;
     schemaname      |                        tablename                         | tableowner | tablespace 
---------------------+----------------------------------------------------------+------------+------------
 emaj_myschema1      | myTbl3_log                                               | emaj_adm   | tsplog1
 emaj_myschema1      | mytbl1_log                                               | emaj_adm   | 
 emaj_myschema1      | mytbl2_log                                               | emaj_adm   | tsplog1
 emaj_myschema1      | mytbl2b_log                                              | emaj_adm   | tsp log'2
 emaj_myschema1      | mytbl4_log                                               | emaj_adm   | tsplog1
 emaj_myschema2      | myTbl3_log                                               | emaj_adm   | 
 emaj_myschema2      | mytbl1_log                                               | emaj_adm   | 
 emaj_myschema2      | mytbl2_log                                               | emaj_adm   | 
 emaj_myschema2      | mytbl4_log                                               | emaj_adm   | 
 emaj_myschema2      | mytbl5_log                                               | emaj_adm   | 
 emaj_myschema2      | mytbl6_log                                               | emaj_adm   | 
 emaj_myschema2      | mytbl7_log                                               | emaj_adm   | 
 emaj_myschema2      | mytbl8_log                                               | emaj_adm   | 
 emaj_myschema4      | mypartp1_log                                             | emaj_adm   | 
 emaj_myschema4      | mypartp2_log                                             | emaj_adm   | 
 emaj_myschema4      | mytblc1_log                                              | emaj_adm   | 
 emaj_myschema4      | mytblc2_log                                              | emaj_adm   | 
 emaj_myschema4      | mytblm_log                                               | emaj_adm   | 
 emaj_myschema5      | myoidstbl_log                                            | emaj_adm   | 
 emaj_myschema5      | myunloggedtbl_log                                        | emaj_adm   | 
 emaj_myschema6      | table_with_50_characters_long_name_____0_________0_log   | emaj_adm   | 
 emaj_myschema6      | table_with_51_characters_long_name_____0_________0#1_log | emaj_adm   | 
 emaj_myschema6      | table_with_55_characters_long_name_____0_________0#1_log | emaj_adm   | 
 emaj_myschema6      | table_with_55_characters_long_name_____0_________0#2_log | emaj_adm   | 
 emaj_phil's schema3 | myTbl2\_log                                              | emaj_adm   | 
 emaj_phil's schema3 | phil's tbl1_log                                          | emaj_adm   | 
(26 rows)

select nspname, relname, rolname from pg_class, pg_namespace, pg_authid 
  where relnamespace = pg_namespace.oid and relowner = pg_authid.oid and relkind = 'S' and nspname like 'emaj\_%' order by nspname, relname;
       nspname       |                           relname                            | rolname  
---------------------+--------------------------------------------------------------+----------
 emaj_myschema1      | myTbl3_log_seq                                               | emaj_adm
 emaj_myschema1      | mytbl1_log_seq                                               | emaj_adm
 emaj_myschema1      | mytbl2_log_seq                                               | emaj_adm
 emaj_myschema1      | mytbl2b_log_seq                                              | emaj_adm
 emaj_myschema1      | mytbl4_log_seq                                               | emaj_adm
 emaj_myschema2      | myTbl3_log_seq                                               | emaj_adm
 emaj_myschema2      | mytbl1_log_seq                                               | emaj_adm
 emaj_myschema2      | mytbl2_log_seq                                               | emaj_adm
 emaj_myschema2      | mytbl4_log_seq                                               | emaj_adm
 emaj_myschema2      | mytbl5_log_seq                                               | emaj_adm
 emaj_myschema2      | mytbl6_log_seq                                               | emaj_adm
 emaj_myschema2      | mytbl7_log_seq                                               | emaj_adm
 emaj_myschema2      | mytbl8_log_seq                                               | emaj_adm
 emaj_myschema4      | mypartp1_log_seq                                             | emaj_adm
 emaj_myschema4      | mypartp2_log_seq                                             | emaj_adm
 emaj_myschema4      | mytblc1_log_seq                                              | emaj_adm
 emaj_myschema4      | mytblc2_log_seq                                              | emaj_adm
 emaj_myschema4      | mytblm_log_seq                                               | emaj_adm
 emaj_myschema5      | myoidstbl_log_seq                                            | emaj_adm
 emaj_myschema5      | myunloggedtbl_log_seq                                        | emaj_adm
 emaj_myschema6      | table_with_50_characters_long_name_____0_________0_log_seq   | emaj_adm
 emaj_myschema6      | table_with_51_characters_long_name_____0_________0#1_log_seq | emaj_adm
 emaj_myschema6      | table_with_55_characters_long_name_____0_________0#1_log_seq | emaj_adm
 emaj_myschema6      | table_with_55_characters_long_name_____0_________0#2_log_seq | emaj_adm
 emaj_phil's schema3 | myTbl2\_log_seq                                              | emaj_adm
 emaj_phil's schema3 | phil's tbl1_log_seq                                          | emaj_adm
(26 rows)

select nspname, proname, rolname from pg_proc, pg_namespace, pg_authid
  where pronamespace = pg_namespace.oid and proowner = pg_authid.oid and nspname like 'emaj\_%' order by nspname, proname;
       nspname       |                            proname                            | rolname  
---------------------+---------------------------------------------------------------+----------
 emaj_myschema1      | myTbl3_log_fnct                                               | emaj_adm
 emaj_myschema1      | mytbl1_log_fnct                                               | emaj_adm
 emaj_myschema1      | mytbl2_log_fnct                                               | emaj_adm
 emaj_myschema1      | mytbl2b_log_fnct                                              | emaj_adm
 emaj_myschema1      | mytbl4_log_fnct                                               | emaj_adm
 emaj_myschema2      | myTbl3_log_fnct                                               | emaj_adm
 emaj_myschema2      | mytbl1_log_fnct                                               | emaj_adm
 emaj_myschema2      | mytbl2_log_fnct                                               | emaj_adm
 emaj_myschema2      | mytbl4_log_fnct                                               | emaj_adm
 emaj_myschema2      | mytbl5_log_fnct                                               | emaj_adm
 emaj_myschema2      | mytbl6_log_fnct                                               | emaj_adm
 emaj_myschema2      | mytbl7_log_fnct                                               | emaj_adm
 emaj_myschema2      | mytbl8_log_fnct                                               | emaj_adm
 emaj_myschema4      | mypartp1_log_fnct                                             | emaj_adm
 emaj_myschema4      | mypartp2_log_fnct                                             | emaj_adm
 emaj_myschema4      | mytblc1_log_fnct                                              | emaj_adm
 emaj_myschema4      | mytblc2_log_fnct                                              | emaj_adm
 emaj_myschema4      | mytblm_log_fnct                                               | emaj_adm
 emaj_myschema5      | myoidstbl_log_fnct                                            | emaj_adm
 emaj_myschema5      | myunloggedtbl_log_fnct                                        | emaj_adm
 emaj_myschema6      | table_with_50_characters_long_name_____0_________0_log_fnct   | emaj_adm
 emaj_myschema6      | table_with_51_characters_long_name_____0_________0#1_log_fnct | emaj_adm
 emaj_myschema6      | table_with_55_characters_long_name_____0_________0#1_log_fnct | emaj_adm
 emaj_myschema6      | table_with_55_characters_long_name_____0_________0#2_log_fnct | emaj_adm
 emaj_phil's schema3 | myTbl2\_log_fnct                                              | emaj_adm
 emaj_phil's schema3 | phil's tbl1_log_fnct                                          | emaj_adm
(26 rows)

-----------------------------
-- emaj_export_groups_configuration() and emaj_import_groups_configuration() tests
-----------------------------
-- direct export
--   bad selected groups array
select emaj.emaj_export_groups_configuration(array['myGroup1','unknown1','unknown2']);
ERROR:  _export_groups_conf: The tables groups unknown1, unknown2 are unknown.
CONTEXT:  PL/pgSQL function emaj._export_groups_conf(text[]) line 29 at RAISE
PL/pgSQL function emaj.emaj_export_groups_configuration(text[]) line 8 at RETURN
-- ok
select json_array_length(emaj.emaj_export_groups_configuration()->'tables_groups');
 json_array_length 
-------------------
                 7
(1 row)

select json_array_length(emaj.emaj_export_groups_configuration(array['myGroup1','myGroup2'])->'tables_groups');
 json_array_length 
-------------------
                 2
(1 row)

-- export in file
--   error
select emaj.emaj_export_groups_configuration('/tmp/dummy/location/file');
ERROR:  could not open file "/tmp/dummy/location/file" for writing: No such file or directory
HINT:  COPY TO instructs the PostgreSQL server process to write a file. You may want a client-side facility such as psql's \copy.
CONTEXT:  SQL statement "COPY t TO '/tmp/dummy/location/file' "
PL/pgSQL function emaj._copy_to_file(text,text,text,boolean,boolean) line 35 at EXECUTE
SQL statement "SELECT emaj._copy_to_file('t', p_location, NULL)"
PL/pgSQL function emaj.emaj_export_groups_configuration(text,text[]) line 16 at PERFORM
--   ok
select emaj.emaj_export_groups_configuration(:'EMAJTESTTMPDIR' || '/orig_groups_config_all.json');
 emaj_export_groups_configuration 
----------------------------------
                                7
(1 row)

select emaj.emaj_export_groups_configuration(:'EMAJTESTTMPDIR' || '/orig_groups_config_partial.json', array['myGroup1','myGroup2']);
 emaj_export_groups_configuration 
----------------------------------
                                2
(1 row)

\! wc -l $EMAJTESTTMPDIR/*.json
 192 /tmp/emaj_12/create_drop/orig_groups_config_all.json
 101 /tmp/emaj_12/create_drop/orig_groups_config_partial.json
 293 total
\! grep -v ', at ' $EMAJTESTTMPDIR/orig_groups_config_all.json
{
  "tables_groups": [
    {
      "group": "emptyGroup",
      "is_rollbackable": true,
      "comment": "an empty group"
    },
    {
      "group": "myGroup1",
      "is_rollbackable": true,
      "tables": [
        {
          "schema": "myschema1",
          "table": "myTbl3",
          "priority": 10,
          "log_data_tablespace": "tsplog1"
        },
        {
          "schema": "myschema1",
          "table": "mytbl1",
          "priority": 20
        },
        {
          "schema": "myschema1",
          "table": "mytbl2",
          "log_data_tablespace": "tsplog1",
          "log_index_tablespace": "tsplog1",
          "ignored_triggers": ["mytbl2trg1","mytbl2trg2"]
        },
        {
          "schema": "myschema1",
          "table": "mytbl2b",
          "log_data_tablespace": "tsp log'2",
          "log_index_tablespace": "tsp log'2"
        },
        {
          "schema": "myschema1",
          "table": "mytbl4",
          "priority": 20,
          "log_data_tablespace": "tsplog1",
          "log_index_tablespace": "tsp log'2"
        }
      ],
      "sequences": [
        {
          "schema": "myschema1",
          "sequence": "myTbl3_col31_seq"
        },
        {
          "schema": "myschema1",
          "sequence": "mytbl2b_col20_seq"
        }
      ]
    },
    {
      "group": "myGroup2",
      "is_rollbackable": true,
      "tables": [
        {
          "schema": "myschema2",
          "table": "myTbl3"
        },
        {
          "schema": "myschema2",
          "table": "mytbl1"
        },
        {
          "schema": "myschema2",
          "table": "mytbl2"
        },
        {
          "schema": "myschema2",
          "table": "mytbl4"
        },
        {
          "schema": "myschema2",
          "table": "mytbl5"
        },
        {
          "schema": "myschema2",
          "table": "mytbl6"
        },
        {
          "schema": "myschema2",
          "table": "mytbl7"
        },
        {
          "schema": "myschema2",
          "table": "mytbl8"
        }
      ],
      "sequences": [
        {
          "schema": "myschema2",
          "sequence": "myTbl3_col31_seq"
        },
        {
          "schema": "myschema2",
          "sequence": "myseq1"
        }
      ]
    },
    {
      "group": "myGroup4",
      "is_rollbackable": true,
      "tables": [
        {
          "schema": "myschema4",
          "table": "mypartp1"
        },
        {
          "schema": "myschema4",
          "table": "mypartp2"
        },
        {
          "schema": "myschema4",
          "table": "mytblc1"
        },
        {
          "schema": "myschema4",
          "table": "mytblc2"
        },
        {
          "schema": "myschema4",
          "table": "mytblm"
        }
      ]
    },
    {
      "group": "myGroup5",
      "is_rollbackable": false,
      "tables": [
        {
          "schema": "myschema5",
          "table": "myoidstbl"
        },
        {
          "schema": "myschema5",
          "table": "myunloggedtbl"
        }
      ]
    },
    {
      "group": "myGroup6",
      "is_rollbackable": true,
      "tables": [
        {
          "schema": "myschema6",
          "table": "table_with_50_characters_long_name_____0_________0"
        },
        {
          "schema": "myschema6",
          "table": "table_with_51_characters_long_name_____0_________0a"
        },
        {
          "schema": "myschema6",
          "table": "table_with_55_characters_long_name_____0_________0abcde"
        },
        {
          "schema": "myschema6",
          "table": "table_with_55_characters_long_name_____0_________0fghij"
        }
      ]
    },
    {
      "group": "phil's group#3\\",",
      "is_rollbackable": false,
      "tables": [
        {
          "schema": "phil's schema3",
          "table": "myTbl2\\\\"
        },
        {
          "schema": "phil's schema3",
          "table": "phil's tbl1"
        }
      ],
      "sequences": [
        {
          "schema": "phil's schema3",
          "sequence": "myTbl2\\\\_col21_seq"
        },
        {
          "schema": "phil's schema3",
          "sequence": "phil's seq\\\\1"
        }
      ]
    }
  ]
}

-- direct import
--   bad content
select * from emaj.emaj_import_groups_configuration('{ "dummy_json": null }'::json);
WARNING:  _import_groups_conf (1): The JSON structure does not contain any "tables_groups" array.
ERROR:  _import_groups_conf: One or several errors have been detected in the supplied JSON structure.
CONTEXT:  PL/pgSQL function emaj._import_groups_conf(json,text[],boolean,text,text) line 60 at RAISE
PL/pgSQL function emaj.emaj_import_groups_configuration(json,text[],boolean,text) line 12 at RETURN
--   missing "group" attribute
select * from emaj.emaj_import_groups_configuration('{ "tables_groups": [ { "name": "grp1" } ]}'::json);
WARNING:  _import_groups_conf (1): The tables group #1 has no "group" attribute.
ERROR:  _import_groups_conf: One or several errors have been detected in the supplied JSON structure.
CONTEXT:  PL/pgSQL function emaj._import_groups_conf(json,text[],boolean,text,text) line 60 at RAISE
PL/pgSQL function emaj.emaj_import_groups_configuration(json,text[],boolean,text) line 12 at RETURN
--   unknown group level attributes
select * from emaj.emaj_import_groups_configuration('{ "tables_groups": [ { "group": "grp1", "unknown_attr1": null, "unknown_attr2": null } ]}'::json);
WARNING:  _import_groups_conf (1): For the tables group "grp1", the keyword "unknown_attr1" is unknown.
WARNING:  _import_groups_conf (1): For the tables group "grp1", the keyword "unknown_attr2" is unknown.
ERROR:  _import_groups_conf: One or several errors have been detected in the supplied JSON structure.
CONTEXT:  PL/pgSQL function emaj._import_groups_conf(json,text[],boolean,text,text) line 60 at RAISE
PL/pgSQL function emaj.emaj_import_groups_configuration(json,text[],boolean,text) line 12 at RETURN
--   is_rollbackable not boolean
select * from emaj.emaj_import_groups_configuration('{ "tables_groups": [ { "group": "grp1", "is_rollbackable": "absolutely true"} ]}'::json);
WARNING:  _import_groups_conf (1): For the tables group "grp1", the "is_rollbackable" attribute is not a boolean.
ERROR:  _import_groups_conf: One or several errors have been detected in the supplied JSON structure.
CONTEXT:  PL/pgSQL function emaj._import_groups_conf(json,text[],boolean,text,text) line 60 at RAISE
PL/pgSQL function emaj.emaj_import_groups_configuration(json,text[],boolean,text) line 12 at RETURN
--   missing "schema" attribute in tables array
select * from emaj.emaj_import_groups_configuration('{ "tables_groups": [ { "group": "grp1", "tables": [ { }] } ]}'::json);
WARNING:  _import_groups_conf (1): In the tables group "grp1", the table #1 has no "schema" attribute.
ERROR:  _import_groups_conf: One or several errors have been detected in the supplied JSON structure.
CONTEXT:  PL/pgSQL function emaj._import_groups_conf(json,text[],boolean,text,text) line 60 at RAISE
PL/pgSQL function emaj.emaj_import_groups_configuration(json,text[],boolean,text) line 12 at RETURN
--   missing "table" attribute in tables array
select * from emaj.emaj_import_groups_configuration('{ "tables_groups": [ { "group": "grp1", "tables": [ { "schema": "s1" }] } ]}'::json);
WARNING:  _import_groups_conf (1): In the tables group "grp1", the table #1 has no "table" attribute.
ERROR:  _import_groups_conf: One or several errors have been detected in the supplied JSON structure.
CONTEXT:  PL/pgSQL function emaj._import_groups_conf(json,text[],boolean,text,text) line 60 at RAISE
PL/pgSQL function emaj.emaj_import_groups_configuration(json,text[],boolean,text) line 12 at RETURN
--   unknown table level attributes
select * from emaj.emaj_import_groups_configuration('{ "tables_groups": [ { "group": "grp1", "tables": [ { "schema": "s1", "table": "t1", "unknown_attr": null }] } ]}'::json);
WARNING:  _import_groups_conf (1): In the tables group "grp1" and for the table s1.t1, the keyword "unknown_attr" is unknown.
ERROR:  _import_groups_conf: One or several errors have been detected in the supplied JSON structure.
CONTEXT:  PL/pgSQL function emaj._import_groups_conf(json,text[],boolean,text,text) line 60 at RAISE
PL/pgSQL function emaj.emaj_import_groups_configuration(json,text[],boolean,text) line 12 at RETURN
--   priority not numeric
select * from emaj.emaj_import_groups_configuration('{ "tables_groups": [ { "group": "grp1", "tables": [ { "schema": "a_schema", "table": "a_table", "priority": "high" }] } ]}'::json);
WARNING:  _import_groups_conf (1): In the tables group "grp1" and for the table a_schema.a_table, the "priority" attribute is not a number.
ERROR:  _import_groups_conf: One or several errors have been detected in the supplied JSON structure.
CONTEXT:  PL/pgSQL function emaj._import_groups_conf(json,text[],boolean,text,text) line 60 at RAISE
PL/pgSQL function emaj.emaj_import_groups_configuration(json,text[],boolean,text) line 12 at RETURN
--   ignored_triggers not an array
select * from emaj.emaj_import_groups_configuration('{ "tables_groups": [ { "group": "grp1", "tables": [ { "schema": "s1", "table": "t1", "ignored_triggers": "dummy" }] } ]}'::json);
WARNING:  _import_groups_conf (1): In the tables group "grp1" and for the table s1.t1, the "ignored_triggers" attribute is not an array.
ERROR:  _import_groups_conf: One or several errors have been detected in the supplied JSON structure.
CONTEXT:  PL/pgSQL function emaj._import_groups_conf(json,text[],boolean,text,text) line 60 at RAISE
PL/pgSQL function emaj.emaj_import_groups_configuration(json,text[],boolean,text) line 12 at RETURN
--     not strings
select * from emaj.emaj_import_groups_configuration('{ "tables_groups": [ { "group": "grp1", "tables": [ { "schema": "s1", "table": "t1", "ignored_triggers": [ "trg1", 1234, null] }] } ]}'::json);
WARNING:  _import_groups_conf (1): In the tables group "grp1" and for the table s1.t1, the trigger #2 is not a string. This is required since E-Maj 4.0.
WARNING:  _import_groups_conf (1): In the tables group "grp1" and for the table s1.t1, the trigger #3 is not a string. This is required since E-Maj 4.0.
ERROR:  _import_groups_conf: One or several errors have been detected in the supplied JSON structure.
CONTEXT:  PL/pgSQL function emaj._import_groups_conf(json,text[],boolean,text,text) line 60 at RAISE
PL/pgSQL function emaj.emaj_import_groups_configuration(json,text[],boolean,text) line 12 at RETURN
--   missing "schema" attribute in sequences array
select * from emaj.emaj_import_groups_configuration('{ "tables_groups": [ { "group": "grp1", "sequences": [ { }] } ]}'::json);
WARNING:  _import_groups_conf (1): In the tables group "grp1", the sequence #1 has no "schema" attribute.
ERROR:  _import_groups_conf: One or several errors have been detected in the supplied JSON structure.
CONTEXT:  PL/pgSQL function emaj._import_groups_conf(json,text[],boolean,text,text) line 60 at RAISE
PL/pgSQL function emaj.emaj_import_groups_configuration(json,text[],boolean,text) line 12 at RETURN
--   missing "sequence" attribute in sequences array
select * from emaj.emaj_import_groups_configuration('{ "tables_groups": [ { "group": "grp1", "sequences": [ { "schema": "s1" }] } ]}'::json);
WARNING:  _import_groups_conf (1): In the tables group "grp1", the sequence #1 has no "sequence" attribute.
ERROR:  _import_groups_conf: One or several errors have been detected in the supplied JSON structure.
CONTEXT:  PL/pgSQL function emaj._import_groups_conf(json,text[],boolean,text,text) line 60 at RAISE
PL/pgSQL function emaj.emaj_import_groups_configuration(json,text[],boolean,text) line 12 at RETURN
--   unknown sequence level attributes
select * from emaj.emaj_import_groups_configuration('{ "tables_groups": [ { "group": "grp1", "sequences": [ { "schema": "s1", "sequence": "s1",  "unknown_attr": null }] } ]}'::json);
WARNING:  _import_groups_conf (1): In the tables group "grp1" and for the sequence s1.s1, the keyword "unknown_attr" is unknown.
ERROR:  _import_groups_conf: One or several errors have been detected in the supplied JSON structure.
CONTEXT:  PL/pgSQL function emaj._import_groups_conf(json,text[],boolean,text,text) line 60 at RAISE
PL/pgSQL function emaj.emaj_import_groups_configuration(json,text[],boolean,text) line 12 at RETURN
--   duplicate group in json
select * from emaj.emaj_import_groups_configuration('{ "tables_groups": [ { "group": "grp1" }, { "group": "grp1" } ]}'::json);
WARNING:  _import_groups_conf (1): The JSON structure references several times the tables group "grp1".
ERROR:  _import_groups_conf: One or several errors have been detected in the supplied JSON structure.
CONTEXT:  PL/pgSQL function emaj._import_groups_conf(json,text[],boolean,text,text) line 60 at RAISE
PL/pgSQL function emaj.emaj_import_groups_configuration(json,text[],boolean,text) line 12 at RETURN
--   unknown group in array
select emaj.emaj_import_groups_configuration(:'EMAJTESTTMPDIR' || '/orig_groups_config_all.json', array['myGroup1','myGroup2','unknownGroup']);
WARNING:  _import_groups_conf (2): The tables group "unknownGroup" to import is not referenced in the JSON structure.
ERROR:  _import_groups_conf: One or several errors have been detected in the JSON groups configuration.
CONTEXT:  PL/pgSQL function emaj._import_groups_conf(json,text[],boolean,text,text) line 78 at RAISE
PL/pgSQL function emaj.emaj_import_groups_configuration(text,text[],boolean,text) line 28 at RETURN
--   group already created
select emaj.emaj_import_groups_configuration('{ "tables_groups": [ { "group": "myGroup1" }, { "group": "myGroup2" } ] }'::json, null, false);
WARNING:  _import_groups_conf (2): The tables group "myGroup1" already exists.
WARNING:  _import_groups_conf (2): The tables group "myGroup2" already exists.
ERROR:  _import_groups_conf: One or several errors have been detected in the JSON groups configuration.
CONTEXT:  PL/pgSQL function emaj._import_groups_conf(json,text[],boolean,text,text) line 78 at RAISE
PL/pgSQL function emaj.emaj_import_groups_configuration(json,text[],boolean,text) line 12 at RETURN
--   bad type for existing groups
select emaj.emaj_import_groups_configuration('{ "tables_groups": [ { "group": "myGroup1", "is_rollbackable": false }, { "group": "myGroup2", "is_rollbackable": false } ] }'::json, null, true);
WARNING:  _import_groups_conf (2): Changing the type of the tables group "myGroup1" is not allowed. You may drop this tables group before importing the configuration.
WARNING:  _import_groups_conf (2): Changing the type of the tables group "myGroup2" is not allowed. You may drop this tables group before importing the configuration.
ERROR:  _import_groups_conf: One or several errors have been detected in the JSON groups configuration.
CONTEXT:  PL/pgSQL function emaj._import_groups_conf(json,text[],boolean,text,text) line 78 at RAISE
PL/pgSQL function emaj.emaj_import_groups_configuration(json,text[],boolean,text) line 12 at RETURN
--   unknown table and sequence
select * from emaj.emaj_import_groups_configuration('{ "tables_groups": [ { "group": "grp1", "tables": [ { "schema": "s1", "table": "t1" }] } ]}'::json);
WARNING:  _import_groups_conf (2): in the group grp1, the table s1.t1 does not exist.
ERROR:  _import_groups_conf: One or several errors have been detected in the JSON groups configuration.
CONTEXT:  PL/pgSQL function emaj._import_groups_conf(json,text[],boolean,text,text) line 78 at RAISE
PL/pgSQL function emaj.emaj_import_groups_configuration(json,text[],boolean,text) line 12 at RETURN
select * from emaj.emaj_import_groups_configuration('{ "tables_groups": [ { "group": "grp1", "sequences": [ { "schema": "s1", "sequence": "sq1" }] } ]}'::json);
WARNING:  _import_groups_conf (2): in the group grp1, the sequence s1.sq1 does not exist.
ERROR:  _import_groups_conf: One or several errors have been detected in the JSON groups configuration.
CONTEXT:  PL/pgSQL function emaj._import_groups_conf(json,text[],boolean,text,text) line 78 at RAISE
PL/pgSQL function emaj.emaj_import_groups_configuration(json,text[],boolean,text) line 12 at RETURN
--   ok
-- a new group with a comment, then changed and finaly deleted
select emaj.emaj_import_groups_configuration('{ "tables_groups": [ 
   { "group": "new_grp", "comment": "a nice comment for new_grp" }
  ]}'::json);
 emaj_import_groups_configuration 
----------------------------------
                                1
(1 row)

select group_name, group_is_rollbackable, group_is_logging, group_comment
  from emaj.emaj_group where group_name = 'new_grp';
 group_name | group_is_rollbackable | group_is_logging |       group_comment        
------------+-----------------------+------------------+----------------------------
 new_grp    | t                     | f                | a nice comment for new_grp
(1 row)

select emaj.emaj_import_groups_configuration('{ "tables_groups": [ 
   { "group": "new_grp", "comment": "changed comment for new_grp" }
  ]}'::json, null, true);
 emaj_import_groups_configuration 
----------------------------------
                                1
(1 row)

select group_comment from emaj.emaj_group where group_name = 'new_grp';
        group_comment        
-----------------------------
 changed comment for new_grp
(1 row)

select emaj.emaj_import_groups_configuration('{ "tables_groups": [ 
   { "group": "new_grp" }
  ]}'::json, null, true);
 emaj_import_groups_configuration 
----------------------------------
                                1
(1 row)

select coalesce(group_comment,'NULL') from emaj.emaj_group where group_name = 'new_grp';
 coalesce 
----------
 NULL
(1 row)

select emaj.emaj_drop_group('new_grp');
 emaj_drop_group 
-----------------
               0
(1 row)

-- import from file
--   error
select emaj.emaj_import_groups_configuration('/tmp/dummy/location/file');
ERROR:  could not open file "/tmp/dummy/location/file" for reading: No such file or directory
HINT:  COPY FROM instructs the PostgreSQL server process to read a file. You may want a client-side facility such as psql's \copy.
CONTEXT:  SQL statement "COPY t FROM '/tmp/dummy/location/file'"
PL/pgSQL function emaj._copy_from_file(text,text) line 16 at EXECUTE
SQL statement "SELECT emaj._copy_from_file('t', p_location)"
PL/pgSQL function emaj.emaj_import_groups_configuration(text,text[],boolean,text) line 16 at PERFORM
\! echo 'not a json content' >/tmp/bad_groups_config.json
select emaj.emaj_import_groups_configuration('/tmp/bad_groups_config.json');
ERROR:  emaj_import_groups_configuration: The file content is not a valid JSON content.
CONTEXT:  PL/pgSQL function emaj.emaj_import_groups_configuration(text,text[],boolean,text) line 25 at RAISE
\! rm /tmp/bad_groups_config.json
--   ok
-- only 2 from the original groups
select emaj.emaj_import_groups_configuration(:'EMAJTESTTMPDIR' || '/orig_groups_config_all.json', array['emptyGroup','myGroup5'], true);
 emaj_import_groups_configuration 
----------------------------------
                                2
(1 row)

-- change the attributes for a table
\! sed -e 's/"mypartp1"/"mypartp1", "priority": 20, "log_data_tablespace": "tsplog1", "log_index_tablespace": "tsplog1"/' $EMAJTESTTMPDIR/orig_groups_config_all.json >$EMAJTESTTMPDIR/modified_groups_config_1.json
select emaj.emaj_import_groups_configuration(:'EMAJTESTTMPDIR' || '/modified_groups_config_1.json', array['myGroup4'], true);
 emaj_import_groups_configuration 
----------------------------------
                                1
(1 row)

-- move a table and a sequence to another group
-- the table myschema2.mytbl5 and the sequence myschema2.myseq1 are moved from myGroup2 to myGroup4
\! sed -n -e '1,75p' $EMAJTESTTMPDIR/modified_groups_config_1.json >$EMAJTESTTMPDIR/modified_groups_config_2.json
--     remove the table and the sequence from myGroup2
\! sed -n -e '80,96p' $EMAJTESTTMPDIR/modified_groups_config_1.json >>$EMAJTESTTMPDIR/modified_groups_config_2.json
\! sed -n -e '101,107p' $EMAJTESTTMPDIR/modified_groups_config_1.json >>$EMAJTESTTMPDIR/modified_groups_config_2.json
--     copy the moved table
\! sed -n -e '76,79p' $EMAJTESTTMPDIR/modified_groups_config_1.json >>$EMAJTESTTMPDIR/modified_groups_config_2.json
--     copy the other tables
\! sed -n -e '108,127p' $EMAJTESTTMPDIR/modified_groups_config_1.json >>$EMAJTESTTMPDIR/modified_groups_config_2.json
--     copy the sequences keyword
\! sed -n -e '92,93p' $EMAJTESTTMPDIR/modified_groups_config_1.json >>$EMAJTESTTMPDIR/modified_groups_config_2.json
--     copy the moved sequence
\! sed -n -e '98,101p' $EMAJTESTTMPDIR/modified_groups_config_1.json >>$EMAJTESTTMPDIR/modified_groups_config_2.json
--     copy the remaining json structure
\! sed -n -e '128,$p' $EMAJTESTTMPDIR/modified_groups_config_1.json >>$EMAJTESTTMPDIR/modified_groups_config_2.json
select emaj.emaj_import_groups_configuration(:'EMAJTESTTMPDIR' || '/modified_groups_config_2.json', array['myGroup2','myGroup4'], true);
 emaj_import_groups_configuration 
----------------------------------
                                2
(1 row)

-- remove a table and a sequence from a group
-- the table myschema2.mytbl5 and the sequence myschema2.myseq1 are removed from myGroup4
\! sed -n -e '1,99p' $EMAJTESTTMPDIR/modified_groups_config_2.json >$EMAJTESTTMPDIR/modified_groups_config_3.json
\! sed -n -e '104,123p' $EMAJTESTTMPDIR/modified_groups_config_2.json >>$EMAJTESTTMPDIR/modified_groups_config_3.json
\! sed -n -e '130,$p' $EMAJTESTTMPDIR/modified_groups_config_2.json >>$EMAJTESTTMPDIR/modified_groups_config_3.json
select emaj.emaj_import_groups_configuration(:'EMAJTESTTMPDIR' || '/modified_groups_config_3.json', array['myGroup4'], true);
 emaj_import_groups_configuration 
----------------------------------
                                1
(1 row)

-- register an unknown trigger and an emaj trigger
\! sed -e 's/"mytbl2trg1","mytbl2trg2"/"unknowntrigger","emaj_trunc_trg"/' $EMAJTESTTMPDIR/modified_groups_config_1.json >$EMAJTESTTMPDIR/modified_groups_config_2.json
select emaj.emaj_import_groups_configuration(:'EMAJTESTTMPDIR' || '/modified_groups_config_2.json', null, true);
WARNING:  _import_groups_conf (2): In the group "myGroup1" and for the table myschema1.mytbl2, the trigger unknowntrigger does not exist.
WARNING:  _import_groups_conf (2): In the group "myGroup1" and for the table myschema1.mytbl2, the trigger emaj_trunc_trg is an E-Maj trigger.
ERROR:  _import_groups_conf: One or several errors have been detected in the JSON groups configuration.
CONTEXT:  PL/pgSQL function emaj._import_groups_conf(json,text[],boolean,text,text) line 78 at RAISE
PL/pgSQL function emaj.emaj_import_groups_configuration(text,text[],boolean,text) line 28 at RETURN
-- suppress 1 trigger
\! sed -e 's/"mytbl2trg1",//' $EMAJTESTTMPDIR/modified_groups_config_1.json >$EMAJTESTTMPDIR/modified_groups_config_3.json
select emaj.emaj_import_groups_configuration(:'EMAJTESTTMPDIR' || '/modified_groups_config_3.json', null, true);
 emaj_import_groups_configuration 
----------------------------------
                                7
(1 row)

select rel_schema, rel_tblseq, rel_time_range, rel_ignored_triggers from emaj.emaj_relation where rel_ignored_triggers is not null order by 1,2,3;
 rel_schema | rel_tblseq | rel_time_range | rel_ignored_triggers 
------------+------------+----------------+----------------------
 myschema1  | mytbl2     | [1017,)        | {mytbl2trg2}
(1 row)

-- erroneously existing log schema
select emaj.emaj_drop_group('myGroup1');
 emaj_drop_group 
-----------------
               7
(1 row)

begin;
  create schema emaj_myschema1;
  select emaj.emaj_import_groups_configuration(:'EMAJTESTTMPDIR' || '/orig_groups_config_all.json', null, true);
ERROR:  _create_log_schemas: The schema "emaj_myschema1" should not exist. Drop it manually.
CONTEXT:  PL/pgSQL function emaj._create_log_schemas(text) line 23 at RAISE
SQL statement "SELECT emaj._create_log_schemas('IMPORT_GROUPS')"
PL/pgSQL function emaj._import_groups_conf_alter(text[],text,bigint) line 14 at PERFORM
SQL statement "SELECT emaj._import_groups_conf_alter(p_groups, p_mark, v_timeId)"
PL/pgSQL function emaj._import_groups_conf_exec(json,text[],text) line 82 at PERFORM
PL/pgSQL function emaj._import_groups_conf(json,text[],boolean,text,text) line 81 at RETURN
PL/pgSQL function emaj.emaj_import_groups_configuration(text,text[],boolean,text) line 28 at RETURN
rollback;
-- rebuild all original groups
-- this will assign the just removed table and sequence
select emaj.emaj_import_groups_configuration(:'EMAJTESTTMPDIR' || '/orig_groups_config_all.json', null, true);
 emaj_import_groups_configuration 
----------------------------------
                                7
(1 row)

-- test a table repair with the groups configuration import, with a table having triggers to ignored_triggers
select emaj.emaj_disable_protection_by_event_triggers();
 emaj_disable_protection_by_event_triggers 
-------------------------------------------
                                         3
(1 row)

drop trigger emaj_log_trg on myschema1.mytbl2;
select emaj.emaj_enable_protection_by_event_triggers();
 emaj_enable_protection_by_event_triggers 
------------------------------------------
                                        3
(1 row)

select emaj.emaj_import_groups_configuration(:'EMAJTESTTMPDIR' || '/orig_groups_config_all.json', null, true);
 emaj_import_groups_configuration 
----------------------------------
                                7
(1 row)

select rel_schema, rel_tblseq, rel_time_range, rel_ignored_triggers from emaj.emaj_relation where rel_ignored_triggers is not null order by 1,2,3;
 rel_schema | rel_tblseq | rel_time_range |  rel_ignored_triggers   
------------+------------+----------------+-------------------------
 myschema1  | mytbl2     | [1046,)        | {mytbl2trg1,mytbl2trg2}
(1 row)

-- keep the current tables groups definition as reference for further tests, once all ignored_triggers configurations reset
select emaj.emaj_modify_table('myschema1','mytbl2','{"ignored_triggers":null}'::jsonb);
 emaj_modify_table 
-------------------
                 1
(1 row)

select emaj.emaj_export_groups_configuration(:'EMAJTESTTMPDIR' || '/../all_groups_config.json');
 emaj_export_groups_configuration 
----------------------------------
                                7
(1 row)

-----------------------------
-- emaj_drop_group() tests
-----------------------------
-- unknown group
select emaj.emaj_drop_group(NULL);
ERROR:  _check_group_names: No group to process.
CONTEXT:  PL/pgSQL function emaj._check_group_names(text[],boolean,boolean,boolean,boolean,boolean,boolean) line 30 at RAISE
SQL statement "SELECT emaj._check_group_names(p_groupNames := ARRAY[p_groupName], p_mayBeNull := FALSE, p_lockGroups := TRUE, p_checkIdle := TRUE)"
PL/pgSQL function emaj.emaj_drop_group(text) line 13 at PERFORM
select emaj.emaj_drop_group('unknownGroup');
ERROR:  _check_group_names: The group "unknownGroup" does not exist.
CONTEXT:  PL/pgSQL function emaj._check_group_names(text[],boolean,boolean,boolean,boolean,boolean,boolean) line 42 at RAISE
SQL statement "SELECT emaj._check_group_names(p_groupNames := ARRAY[p_groupName], p_mayBeNull := FALSE, p_lockGroups := TRUE, p_checkIdle := TRUE)"
PL/pgSQL function emaj.emaj_drop_group(text) line 13 at PERFORM
-- group in logging state
select emaj.emaj_start_group('myGroup1','');
 emaj_start_group 
------------------
                7
(1 row)

select emaj.emaj_drop_group('myGroup1');
ERROR:  _check_group_names: The group "myGroup1" is not in IDLE state.
CONTEXT:  PL/pgSQL function emaj._check_group_names(text[],boolean,boolean,boolean,boolean,boolean,boolean) line 74 at RAISE
SQL statement "SELECT emaj._check_group_names(p_groupNames := ARRAY[p_groupName], p_mayBeNull := FALSE, p_lockGroups := TRUE, p_checkIdle := TRUE)"
PL/pgSQL function emaj.emaj_drop_group(text) line 13 at PERFORM
select emaj.emaj_stop_group('myGroup1');
 emaj_stop_group 
-----------------
               7
(1 row)

-- log schema with an object blocking the schema drop
begin;
  create table emaj_myschema2.dummy_log (col1 int);
  select emaj.emaj_drop_group('myGroup2');
ERROR:  _drop_log_schemas: Cannot drop the schema "emaj_myschema2". It probably owns unattended objects. Use the emaj_verify_all() function to get details.
CONTEXT:  PL/pgSQL function emaj._drop_log_schemas(text,boolean) line 35 at RAISE
SQL statement "SELECT emaj._drop_log_schemas(v_function, p_isForced)"
PL/pgSQL function emaj._drop_group(text,boolean) line 41 at PERFORM
SQL statement "SELECT emaj._drop_group(p_groupName, FALSE)"
PL/pgSQL function emaj.emaj_drop_group(text) line 15 at SQL statement
rollback;
-- should be OK
select emaj.emaj_drop_group('myGroup1');
 emaj_drop_group 
-----------------
               7
(1 row)

select emaj.emaj_drop_group('myGroup2');
 emaj_drop_group 
-----------------
              10
(1 row)

select emaj.emaj_drop_group('emptyGroup');
 emaj_drop_group 
-----------------
               0
(1 row)

select emaj.emaj_drop_group('myGroup5');
 emaj_drop_group 
-----------------
               2
(1 row)

select emaj.emaj_drop_group('myGroup6');
 emaj_drop_group 
-----------------
               4
(1 row)

-- already dropped
select emaj.emaj_drop_group('myGroup2');
ERROR:  _check_group_names: The group "myGroup2" does not exist.
CONTEXT:  PL/pgSQL function emaj._check_group_names(text[],boolean,boolean,boolean,boolean,boolean,boolean) line 42 at RAISE
SQL statement "SELECT emaj._check_group_names(p_groupNames := ARRAY[p_groupName], p_mayBeNull := FALSE, p_lockGroups := TRUE, p_checkIdle := TRUE)"
PL/pgSQL function emaj.emaj_drop_group(text) line 13 at PERFORM
-----------------------------
-- emaj_force_drop_group() tests
-----------------------------
-- unknown group
select emaj.emaj_force_drop_group(NULL);
ERROR:  _check_group_names: No group to process.
CONTEXT:  PL/pgSQL function emaj._check_group_names(text[],boolean,boolean,boolean,boolean,boolean,boolean) line 30 at RAISE
SQL statement "SELECT emaj._check_group_names(p_groupNames := ARRAY[p_groupName], p_mayBeNull := FALSE, p_lockGroups := TRUE)"
PL/pgSQL function emaj.emaj_force_drop_group(text) line 18 at PERFORM
select emaj.emaj_force_drop_group('unknownGroup');
ERROR:  _check_group_names: The group "unknownGroup" does not exist.
CONTEXT:  PL/pgSQL function emaj._check_group_names(text[],boolean,boolean,boolean,boolean,boolean,boolean) line 42 at RAISE
SQL statement "SELECT emaj._check_group_names(p_groupNames := ARRAY[p_groupName], p_mayBeNull := FALSE, p_lockGroups := TRUE)"
PL/pgSQL function emaj.emaj_force_drop_group(text) line 18 at PERFORM
-- already dropped
select emaj.emaj_force_drop_group('myGroup2');
ERROR:  _check_group_names: The group "myGroup2" does not exist.
CONTEXT:  PL/pgSQL function emaj._check_group_names(text[],boolean,boolean,boolean,boolean,boolean,boolean) line 42 at RAISE
SQL statement "SELECT emaj._check_group_names(p_groupNames := ARRAY[p_groupName], p_mayBeNull := FALSE, p_lockGroups := TRUE)"
PL/pgSQL function emaj.emaj_force_drop_group(text) line 18 at PERFORM
-- should be OK
select emaj.emaj_create_group('myGroup1',false);
 emaj_create_group 
-------------------
                 1
(1 row)

select emaj.emaj_assign_table('myschema1','mytbl1','myGroup1');
 emaj_assign_table 
-------------------
                 1
(1 row)

select emaj.emaj_start_group('myGroup1','');
 emaj_start_group 
------------------
                1
(1 row)

select emaj.emaj_force_drop_group('myGroup1');
 emaj_force_drop_group 
-----------------------
                     1
(1 row)

select emaj.emaj_create_group('myGroup1');
 emaj_create_group 
-------------------
                 1
(1 row)

select emaj.emaj_assign_table('myschema1','mytbl1','myGroup1');
 emaj_assign_table 
-------------------
                 1
(1 row)

select emaj.emaj_start_group('myGroup1','');
WARNING:  _check_fk_groups: The table "myschema1.mytbl1" is referenced by the foreign key "mytbl4_col44_fkey" on the table "myschema1.mytbl4" that is outside the groups (myGroup1).
 emaj_start_group 
------------------
                1
(1 row)

select emaj.emaj_force_drop_group('myGroup1');
 emaj_force_drop_group 
-----------------------
                     1
(1 row)

-----------------------------
-- emaj_forget_group() tests
-----------------------------
-- not dropped group
select emaj.emaj_forget_group('myGroup4');
ERROR:  emaj_forget_group: The group "myGroup4" still exists.
CONTEXT:  PL/pgSQL function emaj.emaj_forget_group(text) line 18 at RAISE
-- unknown group
select emaj.emaj_forget_group('unknownGroup');
WARNING:  emaj_forget_group: the tables group "unknownGroup" has not been found in history tables
 emaj_forget_group 
-------------------
                 0
(1 row)

-- should be OK
select emaj.emaj_forget_group('myGroup1');
 emaj_forget_group 
-------------------
                 7
(1 row)

-----------------------------
-- test end: global check
-----------------------------
select nspname from pg_namespace where nspname like 'emaj%' order by nspname;
       nspname       
---------------------
 emaj
 emaj_myschema4
 emaj_phil's schema3
(3 rows)

select sch_name from emaj.emaj_schema order by 1;
      sch_name       
---------------------
 emaj
 emaj_myschema4
 emaj_phil's schema3
(3 rows)

select * from emaj.emaj_rel_hist order by 1,2,3;
 relh_schema |                       relh_tblseq                       | relh_time_range | relh_group | relh_kind 
-------------+---------------------------------------------------------+-----------------+------------+-----------
 myschema1   | myTbl3                                                  | [1019,1043)     | myGroup1   | r
 myschema1   | myTbl3                                                  | [1045,1051)     | myGroup1   | r
 myschema1   | myTbl3_col31_seq                                        | [1033,1043)     | myGroup1   | S
 myschema1   | myTbl3_col31_seq                                        | [1045,1051)     | myGroup1   | S
 myschema1   | mytbl1                                                  | [1016,1043)     | myGroup1   | r
 myschema1   | mytbl1                                                  | [1045,1051)     | myGroup1   | r
 myschema1   | mytbl1                                                  | [1057,1059)     | myGroup1   | r
 myschema1   | mytbl1                                                  | [1061,1063)     | myGroup1   | r
 myschema1   | mytbl2                                                  | [1017,1043)     | myGroup1   | r
 myschema1   | mytbl2                                                  | [1045,1046)     | myGroup1   | r
 myschema1   | mytbl2                                                  | [1046,1051)     | myGroup1   | r
 myschema1   | mytbl2b                                                 | [1018,1043)     | myGroup1   | r
 myschema1   | mytbl2b                                                 | [1045,1051)     | myGroup1   | r
 myschema1   | mytbl2b_col20_seq                                       | [1033,1043)     | myGroup1   | S
 myschema1   | mytbl2b_col20_seq                                       | [1045,1051)     | myGroup1   | S
 myschema1   | mytbl4                                                  | [1020,1043)     | myGroup1   | r
 myschema1   | mytbl4                                                  | [1045,1051)     | myGroup1   | r
 myschema2   | myTbl3                                                  | [1025,1052)     | myGroup2   | r
 myschema2   | myTbl3_col31_seq                                        | [1031,1052)     | myGroup2   | S
 myschema2   | myseq1                                                  | [1030,1040)     | myGroup2   | S
 myschema2   | myseq1                                                  | [1040,1041)     | myGroup4   | S
 myschema2   | myseq1                                                  | [1042,1052)     | myGroup2   | S
 myschema2   | mytbl1                                                  | [1024,1052)     | myGroup2   | r
 myschema2   | mytbl2                                                  | [1024,1052)     | myGroup2   | r
 myschema2   | mytbl4                                                  | [1024,1052)     | myGroup2   | r
 myschema2   | mytbl5                                                  | [1026,1040)     | myGroup2   | r
 myschema2   | mytbl5                                                  | [1040,1041)     | myGroup4   | r
 myschema2   | mytbl5                                                  | [1042,1052)     | myGroup2   | r
 myschema2   | mytbl6                                                  | [1026,1052)     | myGroup2   | r
 myschema2   | mytbl7                                                  | [1024,1052)     | myGroup2   | r
 myschema2   | mytbl8                                                  | [1024,1052)     | myGroup2   | r
 myschema5   | myoidstbl                                               | [1007,1008)     | myGroup1   | r
 myschema5   | myoidstbl                                               | [1022,1023)     | myGroup2   | r
 myschema5   | myoidstbl                                               | [1028,1054)     | myGroup5   | r
 myschema5   | myunloggedtbl                                           | [1028,1054)     | myGroup5   | r
 myschema6   | table_with_50_characters_long_name_____0_________0      | [1029,1055)     | myGroup6   | r
 myschema6   | table_with_51_characters_long_name_____0_________0a     | [1029,1055)     | myGroup6   | r
 myschema6   | table_with_55_characters_long_name_____0_________0abcde | [1029,1055)     | myGroup6   | r
 myschema6   | table_with_55_characters_long_name_____0_________0fghij | [1029,1055)     | myGroup6   | r
(39 rows)

select * from emaj.emaj_relation_change order by 1,2,3,4;
 rlchg_time_id |  rlchg_schema  |                      rlchg_tblseq                       |      rlchg_change_kind      |   rlchg_group    | rlchg_new_schema | rlchg_new_tblseq | rlchg_new_group | rlchg_priority | rlchg_new_priority | rlchg_log_data_tsp | rlchg_new_log_data_tsp | rlchg_log_index_tsp | rlchg_new_log_index_tsp | rlchg_ignored_triggers  | rlchg_new_ignored_triggers 
---------------+----------------+---------------------------------------------------------+-----------------------------+------------------+------------------+------------------+-----------------+----------------+--------------------+--------------------+------------------------+---------------------+-------------------------+-------------------------+----------------------------
          1007 | myschema5      | myoidstbl                                               | ADD_TABLE                   | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1008 | myschema5      | myoidstbl                                               | REMOVE_TABLE                | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1016 | myschema1      | mytbl1                                                  | ADD_TABLE                   | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1017 | myschema1      | mytbl2                                                  | ADD_TABLE                   | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1018 | myschema1      | mytbl2b                                                 | ADD_TABLE                   | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1019 | myschema1      | myTbl3                                                  | ADD_TABLE                   | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1020 | myschema1      | mytbl4                                                  | ADD_TABLE                   | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1021 | phil's schema3 | myTbl2\                                                 | ADD_TABLE                   | phil's group#3", |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1021 | phil's schema3 | phil's tbl1                                             | ADD_TABLE                   | phil's group#3", |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1022 | myschema5      | myoidstbl                                               | ADD_TABLE                   | myGroup2         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1023 | myschema5      | myoidstbl                                               | REMOVE_TABLE                | myGroup2         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1024 | myschema2      | mytbl1                                                  | ADD_TABLE                   | myGroup2         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1024 | myschema2      | mytbl2                                                  | ADD_TABLE                   | myGroup2         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1024 | myschema2      | mytbl4                                                  | ADD_TABLE                   | myGroup2         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1024 | myschema2      | mytbl7                                                  | ADD_TABLE                   | myGroup2         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1024 | myschema2      | mytbl8                                                  | ADD_TABLE                   | myGroup2         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1025 | myschema2      | myTbl3                                                  | ADD_TABLE                   | myGroup2         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1026 | myschema2      | mytbl5                                                  | ADD_TABLE                   | myGroup2         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1026 | myschema2      | mytbl6                                                  | ADD_TABLE                   | myGroup2         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1027 | myschema4      | mypartp1                                                | ADD_TABLE                   | myGroup4         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1027 | myschema4      | mypartp2                                                | ADD_TABLE                   | myGroup4         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1027 | myschema4      | mytblc1                                                 | ADD_TABLE                   | myGroup4         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1027 | myschema4      | mytblc2                                                 | ADD_TABLE                   | myGroup4         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1027 | myschema4      | mytblm                                                  | ADD_TABLE                   | myGroup4         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1028 | myschema5      | myoidstbl                                               | ADD_TABLE                   | myGroup5         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1028 | myschema5      | myunloggedtbl                                           | ADD_TABLE                   | myGroup5         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1029 | myschema6      | table_with_50_characters_long_name_____0_________0      | ADD_TABLE                   | myGroup6         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1029 | myschema6      | table_with_51_characters_long_name_____0_________0a     | ADD_TABLE                   | myGroup6         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1029 | myschema6      | table_with_55_characters_long_name_____0_________0abcde | ADD_TABLE                   | myGroup6         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1029 | myschema6      | table_with_55_characters_long_name_____0_________0fghij | ADD_TABLE                   | myGroup6         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1030 | myschema2      | myseq1                                                  | ADD_SEQUENCE                | myGroup2         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1031 | myschema2      | myTbl3_col31_seq                                        | ADD_SEQUENCE                | myGroup2         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1032 | phil's schema3 | myTbl2\_col21_seq                                       | ADD_SEQUENCE                | phil's group#3", |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1032 | phil's schema3 | phil's seq\1                                            | ADD_SEQUENCE                | phil's group#3", |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1033 | myschema1      | myTbl3_col31_seq                                        | ADD_SEQUENCE                | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1033 | myschema1      | mytbl2b_col20_seq                                       | ADD_SEQUENCE                | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1039 | myschema4      | mypartp1                                                | CHANGE_LOG_DATA_TABLESPACE  | myGroup4         |                  |                  |                 |                |                    |                    | tsplog1                |                     |                         |                         | 
          1039 | myschema4      | mypartp1                                                | CHANGE_LOG_INDEX_TABLESPACE | myGroup4         |                  |                  |                 |                |                    |                    |                        |                     | tsplog1                 |                         | 
          1039 | myschema4      | mypartp1                                                | CHANGE_PRIORITY             | myGroup4         |                  |                  |                 |                |                 20 |                    |                        |                     |                         |                         | 
          1040 | myschema2      | myseq1                                                  | MOVE_SEQUENCE               | myGroup2         |                  |                  | myGroup4        |                |                    |                    |                        |                     |                         |                         | 
          1040 | myschema2      | mytbl5                                                  | MOVE_TABLE                  | myGroup2         |                  |                  | myGroup4        |                |                    |                    |                        |                     |                         |                         | 
          1041 | myschema2      | myseq1                                                  | REMOVE_SEQUENCE             | myGroup4         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1041 | myschema2      | mytbl5                                                  | REMOVE_TABLE                | myGroup4         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1042 | myschema1      | mytbl2                                                  | CHANGE_IGNORED_TRIGGERS     | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         | {mytbl2trg1,mytbl2trg2} | {mytbl2trg2}
          1042 | myschema2      | myseq1                                                  | ADD_SEQUENCE                | myGroup2         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1042 | myschema2      | mytbl5                                                  | ADD_TABLE                   | myGroup2         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1043 | myschema1      | myTbl3                                                  | REMOVE_TABLE                | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1043 | myschema1      | myTbl3_col31_seq                                        | REMOVE_SEQUENCE             | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1043 | myschema1      | mytbl1                                                  | REMOVE_TABLE                | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1043 | myschema1      | mytbl2                                                  | REMOVE_TABLE                | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1043 | myschema1      | mytbl2b                                                 | REMOVE_TABLE                | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1043 | myschema1      | mytbl2b_col20_seq                                       | REMOVE_SEQUENCE             | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1043 | myschema1      | mytbl4                                                  | REMOVE_TABLE                | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1045 | myschema1      | myTbl3                                                  | ADD_TABLE                   | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1045 | myschema1      | myTbl3_col31_seq                                        | ADD_SEQUENCE                | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1045 | myschema1      | mytbl1                                                  | ADD_TABLE                   | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1045 | myschema1      | mytbl2                                                  | ADD_TABLE                   | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1045 | myschema1      | mytbl2b                                                 | ADD_TABLE                   | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1045 | myschema1      | mytbl2b_col20_seq                                       | ADD_SEQUENCE                | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1045 | myschema1      | mytbl4                                                  | ADD_TABLE                   | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1045 | myschema4      | mypartp1                                                | CHANGE_LOG_DATA_TABLESPACE  | myGroup4         |                  |                  |                 |                |                    | tsplog1            |                        |                     |                         |                         | 
          1045 | myschema4      | mypartp1                                                | CHANGE_LOG_INDEX_TABLESPACE | myGroup4         |                  |                  |                 |                |                    |                    |                        | tsplog1             |                         |                         | 
          1045 | myschema4      | mypartp1                                                | CHANGE_PRIORITY             | myGroup4         |                  |                  |                 |             20 |                    |                    |                        |                     |                         |                         | 
          1046 | myschema1      | mytbl2                                                  | REPAIR_TABLE                | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1047 | myschema1      | mytbl2                                                  | CHANGE_IGNORED_TRIGGERS     | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         | {mytbl2trg1,mytbl2trg2} | 
          1051 | myschema1      | myTbl3                                                  | REMOVE_TABLE                | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1051 | myschema1      | myTbl3_col31_seq                                        | REMOVE_SEQUENCE             | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1051 | myschema1      | mytbl1                                                  | REMOVE_TABLE                | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1051 | myschema1      | mytbl2                                                  | REMOVE_TABLE                | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1051 | myschema1      | mytbl2b                                                 | REMOVE_TABLE                | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1051 | myschema1      | mytbl2b_col20_seq                                       | REMOVE_SEQUENCE             | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1051 | myschema1      | mytbl4                                                  | REMOVE_TABLE                | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1052 | myschema2      | myTbl3                                                  | REMOVE_TABLE                | myGroup2         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1052 | myschema2      | myTbl3_col31_seq                                        | REMOVE_SEQUENCE             | myGroup2         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1052 | myschema2      | myseq1                                                  | REMOVE_SEQUENCE             | myGroup2         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1052 | myschema2      | mytbl1                                                  | REMOVE_TABLE                | myGroup2         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1052 | myschema2      | mytbl2                                                  | REMOVE_TABLE                | myGroup2         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1052 | myschema2      | mytbl4                                                  | REMOVE_TABLE                | myGroup2         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1052 | myschema2      | mytbl5                                                  | REMOVE_TABLE                | myGroup2         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1052 | myschema2      | mytbl6                                                  | REMOVE_TABLE                | myGroup2         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1052 | myschema2      | mytbl7                                                  | REMOVE_TABLE                | myGroup2         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1052 | myschema2      | mytbl8                                                  | REMOVE_TABLE                | myGroup2         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1054 | myschema5      | myoidstbl                                               | REMOVE_TABLE                | myGroup5         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1054 | myschema5      | myunloggedtbl                                           | REMOVE_TABLE                | myGroup5         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1055 | myschema6      | table_with_50_characters_long_name_____0_________0      | REMOVE_TABLE                | myGroup6         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1055 | myschema6      | table_with_51_characters_long_name_____0_________0a     | REMOVE_TABLE                | myGroup6         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1055 | myschema6      | table_with_55_characters_long_name_____0_________0abcde | REMOVE_TABLE                | myGroup6         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1055 | myschema6      | table_with_55_characters_long_name_____0_________0fghij | REMOVE_TABLE                | myGroup6         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1057 | myschema1      | mytbl1                                                  | ADD_TABLE                   | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1059 | myschema1      | mytbl1                                                  | REMOVE_TABLE                | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1061 | myschema1      | mytbl1                                                  | ADD_TABLE                   | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
          1063 | myschema1      | mytbl1                                                  | REMOVE_TABLE                | myGroup1         |                  |                  |                 |                |                    |                    |                        |                     |                         |                         | 
(92 rows)

select hist_function, hist_event, hist_object, 
       regexp_replace(regexp_replace(hist_wording,E'\\d\\d\.\\d\\d\\.\\d\\d\\.\\d\\d\\d\\d','%','g'),E'\\[.+\\]','(timestamp)','g'), 
       hist_user 
  from emaj.emaj_hist order by hist_id;
   hist_function    |          hist_event          |                                  hist_object                                   |                                regexp_replace                                | hist_user 
--------------------+------------------------------+--------------------------------------------------------------------------------+------------------------------------------------------------------------------+-----------
 CREATE_GROUP       | BEGIN                        | emptyGroup                                                                     | rollbackable                                                                 | postgres
 CREATE_GROUP       | TIME STAMP SET               | 1000                                                                           |                                                                              | postgres
 CREATE_GROUP       | END                          | emptyGroup                                                                     |                                                                              | postgres
 CREATE_GROUP       | BEGIN                        | myGroup1                                                                       | rollbackable                                                                 | postgres
 CREATE_GROUP       | TIME STAMP SET               | 1001                                                                           |                                                                              | postgres
 CREATE_GROUP       | END                          | myGroup1                                                                       |                                                                              | postgres
 CREATE_GROUP       | BEGIN                        | myGroup2                                                                       | rollbackable                                                                 | postgres
 CREATE_GROUP       | TIME STAMP SET               | 1002                                                                           |                                                                              | postgres
 CREATE_GROUP       | END                          | myGroup2                                                                       |                                                                              | postgres
 CREATE_GROUP       | BEGIN                        | phil's group#3",                                                               | audit_only                                                                   | postgres
 CREATE_GROUP       | TIME STAMP SET               | 1003                                                                           |                                                                              | postgres
 CREATE_GROUP       | END                          | phil's group#3",                                                               |                                                                              | postgres
 CREATE_GROUP       | BEGIN                        | myGroup4                                                                       | rollbackable                                                                 | postgres
 CREATE_GROUP       | TIME STAMP SET               | 1004                                                                           |                                                                              | postgres
 CREATE_GROUP       | END                          | myGroup4                                                                       |                                                                              | postgres
 CREATE_GROUP       | BEGIN                        | myGroup5                                                                       | audit_only                                                                   | postgres
 CREATE_GROUP       | TIME STAMP SET               | 1005                                                                           |                                                                              | postgres
 CREATE_GROUP       | END                          | myGroup5                                                                       |                                                                              | postgres
 CREATE_GROUP       | BEGIN                        | myGroup6                                                                       | rollbackable                                                                 | postgres
 CREATE_GROUP       | TIME STAMP SET               | 1006                                                                           |                                                                              | postgres
 CREATE_GROUP       | END                          | myGroup6                                                                       |                                                                              | postgres
 COMMENT_GROUP      |                              | myGroup1                                                                       |                                                                              | postgres
 COMMENT_GROUP      |                              | myGroup1                                                                       |                                                                              | postgres
 COMMENT_GROUP      |                              | emptyGroup                                                                     |                                                                              | postgres
 COMMENT_GROUP      |                              | myGroup1                                                                       |                                                                              | postgres
 ASSIGN_TABLE       | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_TABLE       | TIME STAMP SET               | 1007                                                                           |                                                                              | postgres
 ASSIGN_TABLE       | LOG_SCHEMA CREATED           | emaj_myschema5                                                                 |                                                                              | postgres
 ASSIGN_TABLE       | TABLE ADDED                  | myschema5.myoidstbl                                                            | To the idle group myGroup1                                                   | postgres
 ASSIGN_TABLE       | END                          |                                                                                | 1 tables assigned to the group myGroup1                                      | postgres
 REMOVE_TABLE       | BEGIN                        |                                                                                |                                                                              | postgres
 REMOVE_TABLE       | TIME STAMP SET               | 1008                                                                           |                                                                              | postgres
 REMOVE_TABLE       | TABLE REMOVED                | myschema5.myoidstbl                                                            | From the idle group myGroup1                                                 | postgres
 REMOVE_TABLE       | LOG_SCHEMA DROPPED           | emaj_myschema5                                                                 |                                                                              | postgres
 REMOVE_TABLE       | END                          |                                                                                | 1 tables removed from their groups                                           | postgres
 ASSIGN_TABLE       | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_TABLE       | TIME STAMP SET               | 1016                                                                           |                                                                              | postgres
 ASSIGN_TABLE       | LOG_SCHEMA CREATED           | emaj_myschema1                                                                 |                                                                              | postgres
 ASSIGN_TABLE       | TABLE ADDED                  | myschema1.mytbl1                                                               | To the idle group myGroup1                                                   | postgres
 ASSIGN_TABLE       | END                          |                                                                                | 1 tables assigned to the group myGroup1                                      | postgres
 ASSIGN_TABLE       | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_TABLE       | TIME STAMP SET               | 1017                                                                           |                                                                              | postgres
 ASSIGN_TABLE       | TABLE ADDED                  | myschema1.mytbl2                                                               | To the idle group myGroup1                                                   | postgres
 ASSIGN_TABLE       | END                          |                                                                                | 1 tables assigned to the group myGroup1                                      | postgres
 ASSIGN_TABLE       | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_TABLE       | TIME STAMP SET               | 1018                                                                           |                                                                              | postgres
 ASSIGN_TABLE       | TABLE ADDED                  | myschema1.mytbl2b                                                              | To the idle group myGroup1                                                   | postgres
 ASSIGN_TABLE       | END                          |                                                                                | 1 tables assigned to the group myGroup1                                      | postgres
 ASSIGN_TABLE       | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_TABLE       | TIME STAMP SET               | 1019                                                                           |                                                                              | postgres
 ASSIGN_TABLE       | TABLE ADDED                  | myschema1."myTbl3"                                                             | To the idle group myGroup1                                                   | postgres
 ASSIGN_TABLE       | END                          |                                                                                | 1 tables assigned to the group myGroup1                                      | postgres
 ASSIGN_TABLE       | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_TABLE       | TIME STAMP SET               | 1020                                                                           |                                                                              | postgres
 ASSIGN_TABLE       | TABLE ADDED                  | myschema1.mytbl4                                                               | To the idle group myGroup1                                                   | postgres
 ASSIGN_TABLE       | END                          |                                                                                | 1 tables assigned to the group myGroup1                                      | postgres
 ASSIGN_TABLES      | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_TABLES      | END                          |                                                                                | 0 tables assigned to the group phil's group#3",                              | postgres
 ASSIGN_TABLES      | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_TABLES      | END                          |                                                                                | 0 tables assigned to the group phil's group#3",                              | postgres
 ASSIGN_TABLES      | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_TABLES      | END                          |                                                                                | 0 tables assigned to the group phil's group#3",                              | postgres
 ASSIGN_TABLES      | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_TABLES      | TIME STAMP SET               | 1021                                                                           |                                                                              | postgres
 ASSIGN_TABLES      | LOG_SCHEMA CREATED           | "emaj_phil's schema3"                                                          |                                                                              | postgres
 ASSIGN_TABLES      | TABLE ADDED                  | "phil's schema3"."myTbl2\"                                                     | To the idle group phil's group#3",                                           | postgres
 ASSIGN_TABLES      | TABLE ADDED                  | "phil's schema3"."phil's tbl1"                                                 | To the idle group phil's group#3",                                           | postgres
 ASSIGN_TABLES      | END                          |                                                                                | 2 tables assigned to the group phil's group#3",                              | postgres
 ASSIGN_TABLES      | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_TABLES      | END                          |                                                                                | 0 tables assigned to the group myGroup2                                      | postgres
 ASSIGN_TABLES      | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_TABLES      | END                          |                                                                                | 0 tables assigned to the group myGroup2                                      | postgres
 ASSIGN_TABLES      | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_TABLES      | END                          |                                                                                | 0 tables assigned to the group myGroup2                                      | postgres
 ASSIGN_TABLES      | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_TABLES      | END                          |                                                                                | 0 tables assigned to the group myGroup2                                      | postgres
 ASSIGN_TABLES      | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_TABLES      | TIME STAMP SET               | 1022                                                                           |                                                                              | postgres
 ASSIGN_TABLES      | LOG_SCHEMA CREATED           | emaj_myschema5                                                                 |                                                                              | postgres
 ASSIGN_TABLES      | TABLE ADDED                  | myschema5.myoidstbl                                                            | To the idle group myGroup2                                                   | postgres
 ASSIGN_TABLES      | END                          |                                                                                | 1 tables assigned to the group myGroup2                                      | postgres
 REMOVE_TABLE       | BEGIN                        |                                                                                |                                                                              | postgres
 REMOVE_TABLE       | TIME STAMP SET               | 1023                                                                           |                                                                              | postgres
 REMOVE_TABLE       | TABLE REMOVED                | myschema5.myoidstbl                                                            | From the idle group myGroup2                                                 | postgres
 REMOVE_TABLE       | LOG_SCHEMA DROPPED           | emaj_myschema5                                                                 |                                                                              | postgres
 REMOVE_TABLE       | END                          |                                                                                | 1 tables removed from their groups                                           | postgres
 ASSIGN_TABLES      | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_TABLES      | END                          |                                                                                | 0 tables assigned to the group myGroup2                                      | postgres
 ASSIGN_TABLES      | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_TABLES      | TIME STAMP SET               | 1024                                                                           |                                                                              | postgres
 ASSIGN_TABLES      | LOG_SCHEMA CREATED           | emaj_myschema2                                                                 |                                                                              | postgres
 ASSIGN_TABLES      | TABLE ADDED                  | myschema2.mytbl1                                                               | To the idle group myGroup2                                                   | postgres
 ASSIGN_TABLES      | TABLE ADDED                  | myschema2.mytbl2                                                               | To the idle group myGroup2                                                   | postgres
 ASSIGN_TABLES      | TABLE ADDED                  | myschema2.mytbl4                                                               | To the idle group myGroup2                                                   | postgres
 ASSIGN_TABLES      | TABLE ADDED                  | myschema2.mytbl7                                                               | To the idle group myGroup2                                                   | postgres
 ASSIGN_TABLES      | TABLE ADDED                  | myschema2.mytbl8                                                               | To the idle group myGroup2                                                   | postgres
 ASSIGN_TABLES      | END                          |                                                                                | 5 tables assigned to the group myGroup2                                      | postgres
 ASSIGN_TABLES      | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_TABLES      | TIME STAMP SET               | 1025                                                                           |                                                                              | postgres
 ASSIGN_TABLES      | TABLE ADDED                  | myschema2."myTbl3"                                                             | To the idle group myGroup2                                                   | postgres
 ASSIGN_TABLES      | END                          |                                                                                | 1 tables assigned to the group myGroup2                                      | postgres
 ASSIGN_TABLES      | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_TABLES      | TIME STAMP SET               | 1026                                                                           |                                                                              | postgres
 ASSIGN_TABLES      | TABLE ADDED                  | myschema2.mytbl5                                                               | To the idle group myGroup2                                                   | postgres
 ASSIGN_TABLES      | TABLE ADDED                  | myschema2.mytbl6                                                               | To the idle group myGroup2                                                   | postgres
 ASSIGN_TABLES      | END                          |                                                                                | 2 tables assigned to the group myGroup2                                      | postgres
 ASSIGN_TABLES      | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_TABLES      | END                          |                                                                                | 0 tables assigned to the group myGroup2                                      | postgres
 ASSIGN_TABLES      | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_TABLES      | TIME STAMP SET               | 1027                                                                           |                                                                              | postgres
 ASSIGN_TABLES      | LOG_SCHEMA CREATED           | emaj_myschema4                                                                 |                                                                              | postgres
 ASSIGN_TABLES      | TABLE ADDED                  | myschema4.mypartp1                                                             | To the idle group myGroup4                                                   | postgres
 ASSIGN_TABLES      | TABLE ADDED                  | myschema4.mypartp2                                                             | To the idle group myGroup4                                                   | postgres
 ASSIGN_TABLES      | TABLE ADDED                  | myschema4.mytblc1                                                              | To the idle group myGroup4                                                   | postgres
 ASSIGN_TABLES      | TABLE ADDED                  | myschema4.mytblc2                                                              | To the idle group myGroup4                                                   | postgres
 ASSIGN_TABLES      | TABLE ADDED                  | myschema4.mytblm                                                               | To the idle group myGroup4                                                   | postgres
 ASSIGN_TABLES      | END                          |                                                                                | 5 tables assigned to the group myGroup4                                      | postgres
 ASSIGN_TABLES      | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_TABLES      | TIME STAMP SET               | 1028                                                                           |                                                                              | postgres
 ASSIGN_TABLES      | LOG_SCHEMA CREATED           | emaj_myschema5                                                                 |                                                                              | postgres
 ASSIGN_TABLES      | TABLE ADDED                  | myschema5.myoidstbl                                                            | To the idle group myGroup5                                                   | postgres
 ASSIGN_TABLES      | TABLE ADDED                  | myschema5.myunloggedtbl                                                        | To the idle group myGroup5                                                   | postgres
 ASSIGN_TABLES      | END                          |                                                                                | 2 tables assigned to the group myGroup5                                      | postgres
 ASSIGN_TABLES      | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_TABLES      | TIME STAMP SET               | 1029                                                                           |                                                                              | postgres
 ASSIGN_TABLES      | LOG_SCHEMA CREATED           | emaj_myschema6                                                                 |                                                                              | postgres
 ASSIGN_TABLES      | TABLE ADDED                  | myschema6.table_with_50_characters_long_name_____0_________0                   | To the idle group myGroup6                                                   | postgres
 ASSIGN_TABLES      | TABLE ADDED                  | myschema6.table_with_51_characters_long_name_____0_________0a                  | To the idle group myGroup6                                                   | postgres
 ASSIGN_TABLES      | TABLE ADDED                  | myschema6.table_with_55_characters_long_name_____0_________0abcde              | To the idle group myGroup6                                                   | postgres
 ASSIGN_TABLES      | TABLE ADDED                  | myschema6.table_with_55_characters_long_name_____0_________0fghij              | To the idle group myGroup6                                                   | postgres
 ASSIGN_TABLES      | END                          |                                                                                | 4 tables assigned to the group myGroup6                                      | postgres
 ASSIGN_SEQUENCE    | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_SEQUENCE    | TIME STAMP SET               | 1030                                                                           |                                                                              | postgres
 ASSIGN_SEQUENCE    | SEQUENCE ADDED               | myschema2.myseq1                                                               | To the idle group myGroup2                                                   | postgres
 ASSIGN_SEQUENCE    | END                          |                                                                                | 1 sequences assigned to the group myGroup2                                   | postgres
 ASSIGN_SEQUENCES   | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_SEQUENCES   | END                          |                                                                                | 0 sequences assigned to the group myGroup2                                   | postgres
 ASSIGN_SEQUENCES   | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_SEQUENCES   | END                          |                                                                                | 0 sequences assigned to the group myGroup2                                   | postgres
 ASSIGN_SEQUENCES   | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_SEQUENCES   | END                          |                                                                                | 0 sequences assigned to the group myGroup2                                   | postgres
 ASSIGN_SEQUENCES   | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_SEQUENCES   | TIME STAMP SET               | 1031                                                                           |                                                                              | postgres
 ASSIGN_SEQUENCES   | SEQUENCE ADDED               | myschema2."myTbl3_col31_seq"                                                   | To the idle group myGroup2                                                   | postgres
 ASSIGN_SEQUENCES   | END                          |                                                                                | 1 sequences assigned to the group myGroup2                                   | postgres
 ASSIGN_SEQUENCES   | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_SEQUENCES   | TIME STAMP SET               | 1032                                                                           |                                                                              | postgres
 ASSIGN_SEQUENCES   | SEQUENCE ADDED               | "phil's schema3"."myTbl2\_col21_seq"                                           | To the idle group phil's group#3",                                           | postgres
 ASSIGN_SEQUENCES   | SEQUENCE ADDED               | "phil's schema3"."phil's seq\1"                                                | To the idle group phil's group#3",                                           | postgres
 ASSIGN_SEQUENCES   | END                          |                                                                                | 2 sequences assigned to the group phil's group#3",                           | postgres
 ASSIGN_SEQUENCES   | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_SEQUENCES   | END                          |                                                                                | 0 sequences assigned to the group myGroup1                                   | postgres
 ASSIGN_SEQUENCES   | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_SEQUENCES   | END                          |                                                                                | 0 sequences assigned to the group myGroup1                                   | postgres
 ASSIGN_SEQUENCES   | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_SEQUENCES   | END                          |                                                                                | 0 sequences assigned to the group myGroup1                                   | postgres
 ASSIGN_SEQUENCES   | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_SEQUENCES   | END                          |                                                                                | 0 sequences assigned to the group myGroup2                                   | postgres
 ASSIGN_SEQUENCES   | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_SEQUENCES   | TIME STAMP SET               | 1033                                                                           |                                                                              | postgres
 ASSIGN_SEQUENCES   | SEQUENCE ADDED               | myschema1."myTbl3_col31_seq"                                                   | To the idle group myGroup1                                                   | postgres
 ASSIGN_SEQUENCES   | SEQUENCE ADDED               | myschema1.mytbl2b_col20_seq                                                    | To the idle group myGroup1                                                   | postgres
 ASSIGN_SEQUENCES   | END                          |                                                                                | 2 sequences assigned to the group myGroup1                                   | postgres
 IMPORT_GROUPS      | BEGIN                        | new_grp                                                                        |                                                                              | postgres
 IMPORT_GROUPS      | TIME STAMP SET               | 1034                                                                           |                                                                              | postgres
 IMPORT_GROUPS      | GROUP CREATED                | new_grp                                                                        | rollbackable                                                                 | postgres
 IMPORT_GROUPS      | END                          |                                                                                | 1 created or altered tables groups                                           | postgres
 IMPORT_GROUPS      | BEGIN                        | new_grp                                                                        |                                                                              | postgres
 IMPORT_GROUPS      | TIME STAMP SET               | 1035                                                                           |                                                                              | postgres
 IMPORT_GROUPS      | END                          |                                                                                | 1 created or altered tables groups                                           | postgres
 IMPORT_GROUPS      | BEGIN                        | new_grp                                                                        |                                                                              | postgres
 IMPORT_GROUPS      | TIME STAMP SET               | 1036                                                                           |                                                                              | postgres
 IMPORT_GROUPS      | END                          |                                                                                | 1 created or altered tables groups                                           | postgres
 DROP_GROUP         | BEGIN                        | new_grp                                                                        |                                                                              | postgres
 DROP_GROUP         | TIME STAMP SET               | 1037                                                                           |                                                                              | postgres
 DROP_GROUP         | END                          | new_grp                                                                        | 0 tables/sequences processed                                                 | postgres
 IMPORT_GROUPS      | BEGIN                        | emptyGroup, myGroup5                                                           | Input file: '/tmp/emaj_12/create_drop/orig_groups_config_all.json'           | postgres
 IMPORT_GROUPS      | TIME STAMP SET               | 1038                                                                           |                                                                              | postgres
 IMPORT_GROUPS      | END                          |                                                                                | 2 created or altered tables groups                                           | postgres
 IMPORT_GROUPS      | BEGIN                        | myGroup4                                                                       | Input file: '/tmp/emaj_12/create_drop/modified_groups_config_1.json'         | postgres
 IMPORT_GROUPS      | TIME STAMP SET               | 1039                                                                           |                                                                              | postgres
 IMPORT_GROUPS      | PRIORITY CHANGED             | myschema4.mypartp1                                                             | NULL => 20                                                                   | postgres
 IMPORT_GROUPS      | LOG DATA TABLESPACE CHANGED  | myschema4.mypartp1                                                             | Default tablespace => tsplog1                                                | postgres
 IMPORT_GROUPS      | LOG INDEX TABLESPACE CHANGED | myschema4.mypartp1                                                             | Default tablespace => tsplog1                                                | postgres
 IMPORT_GROUPS      | END                          |                                                                                | 1 created or altered tables groups                                           | postgres
 IMPORT_GROUPS      | BEGIN                        | myGroup2, myGroup4                                                             | Input file: '/tmp/emaj_12/create_drop/modified_groups_config_2.json'         | postgres
 IMPORT_GROUPS      | TIME STAMP SET               | 1040                                                                           |                                                                              | postgres
 IMPORT_GROUPS      | TABLE MOVED                  | myschema2.mytbl5                                                               | From the idle group myGroup2 to the idle group myGroup4                      | postgres
 IMPORT_GROUPS      | SEQUENCE MOVED               | myschema2.myseq1                                                               | From the idle group myGroup2 to the idle group myGroup4                      | postgres
 IMPORT_GROUPS      | END                          |                                                                                | 2 created or altered tables groups                                           | postgres
 IMPORT_GROUPS      | BEGIN                        | myGroup4                                                                       | Input file: '/tmp/emaj_12/create_drop/modified_groups_config_3.json'         | postgres
 IMPORT_GROUPS      | TIME STAMP SET               | 1041                                                                           |                                                                              | postgres
 IMPORT_GROUPS      | TABLE REMOVED                | myschema2.mytbl5                                                               | From the idle group myGroup4                                                 | postgres
 IMPORT_GROUPS      | SEQUENCE REMOVED             | myschema2.myseq1                                                               | From the idle group myGroup4                                                 | postgres
 IMPORT_GROUPS      | END                          |                                                                                | 1 created or altered tables groups                                           | postgres
 IMPORT_GROUPS      | BEGIN                        | emptyGroup, myGroup1, myGroup2, myGroup4, myGroup5, myGroup6, phil's group#3", | Input file: '/tmp/emaj_12/create_drop/modified_groups_config_3.json'         | postgres
 IMPORT_GROUPS      | TIME STAMP SET               | 1042                                                                           |                                                                              | postgres
 IMPORT_GROUPS      | TRIGGERS TO IGNORE CHANGED   | myschema1.mytbl2                                                               | {mytbl2trg1,mytbl2trg2} => {mytbl2trg2}                                      | postgres
 IMPORT_GROUPS      | TABLE ADDED                  | myschema2.mytbl5                                                               | To the idle group myGroup2                                                   | postgres
 IMPORT_GROUPS      | SEQUENCE ADDED               | myschema2.myseq1                                                               | To the idle group myGroup2                                                   | postgres
 IMPORT_GROUPS      | END                          |                                                                                | 7 created or altered tables groups                                           | postgres
 DROP_GROUP         | BEGIN                        | myGroup1                                                                       |                                                                              | postgres
 DROP_GROUP         | TIME STAMP SET               | 1043                                                                           |                                                                              | postgres
 DROP_GROUP         | LOG_SCHEMA DROPPED           | emaj_myschema1                                                                 |                                                                              | postgres
 DROP_GROUP         | END                          | myGroup1                                                                       | 7 tables/sequences processed                                                 | postgres
 IMPORT_GROUPS      | BEGIN                        | emptyGroup, myGroup1, myGroup2, myGroup4, myGroup5, myGroup6, phil's group#3", | Input file: '/tmp/emaj_12/create_drop/orig_groups_config_all.json'           | postgres
 IMPORT_GROUPS      | TIME STAMP SET               | 1045                                                                           |                                                                              | postgres
 IMPORT_GROUPS      | GROUP CREATED                | myGroup1                                                                       | rollbackable                                                                 | postgres
 IMPORT_GROUPS      | LOG_SCHEMA CREATED           | emaj_myschema1                                                                 |                                                                              | postgres
 IMPORT_GROUPS      | PRIORITY CHANGED             | myschema4.mypartp1                                                             | 20 => NULL                                                                   | postgres
 IMPORT_GROUPS      | LOG DATA TABLESPACE CHANGED  | myschema4.mypartp1                                                             | tsplog1 => Default tablespace                                                | postgres
 IMPORT_GROUPS      | LOG INDEX TABLESPACE CHANGED | myschema4.mypartp1                                                             | tsplog1 => Default tablespace                                                | postgres
 IMPORT_GROUPS      | TABLE ADDED                  | myschema1."myTbl3"                                                             | To the idle group myGroup1                                                   | postgres
 IMPORT_GROUPS      | TABLE ADDED                  | myschema1.mytbl1                                                               | To the idle group myGroup1                                                   | postgres
 IMPORT_GROUPS      | TABLE ADDED                  | myschema1.mytbl4                                                               | To the idle group myGroup1                                                   | postgres
 IMPORT_GROUPS      | TABLE ADDED                  | myschema1.mytbl2                                                               | To the idle group myGroup1                                                   | postgres
 IMPORT_GROUPS      | TABLE ADDED                  | myschema1.mytbl2b                                                              | To the idle group myGroup1                                                   | postgres
 IMPORT_GROUPS      | SEQUENCE ADDED               | myschema1."myTbl3_col31_seq"                                                   | To the idle group myGroup1                                                   | postgres
 IMPORT_GROUPS      | SEQUENCE ADDED               | myschema1.mytbl2b_col20_seq                                                    | To the idle group myGroup1                                                   | postgres
 IMPORT_GROUPS      | END                          |                                                                                | 7 created or altered tables groups                                           | postgres
 DISABLE_PROTECTION | EVENT TRIGGERS DISABLED      |                                                                                | emaj_protection_trg, emaj_sql_drop_trg, emaj_table_rewrite_trg               | postgres
 ENABLE_PROTECTION  | EVENT TRIGGERS ENABLED       |                                                                                | emaj_protection_trg, emaj_sql_drop_trg, emaj_table_rewrite_trg               | postgres
 IMPORT_GROUPS      | BEGIN                        | emptyGroup, myGroup1, myGroup2, myGroup4, myGroup5, myGroup6, phil's group#3", | Input file: '/tmp/emaj_12/create_drop/orig_groups_config_all.json'           | postgres
 IMPORT_GROUPS      | TIME STAMP SET               | 1046                                                                           |                                                                              | postgres
 IMPORT_GROUPS      | TABLE REPAIRED               | myschema1.mytbl2                                                               | In group myGroup1                                                            | postgres
 IMPORT_GROUPS      | END                          |                                                                                | 7 created or altered tables groups                                           | postgres
 MODIFY_TABLE       | BEGIN                        |                                                                                |                                                                              | postgres
 MODIFY_TABLE       | TIME STAMP SET               | 1047                                                                           |                                                                              | postgres
 MODIFY_TABLE       | TRIGGERS TO IGNORE CHANGED   | myschema1.mytbl2                                                               | {mytbl2trg1,mytbl2trg2} => none                                              | postgres
 MODIFY_TABLE       | END                          |                                                                                | 1 tables effectively modified                                                | postgres
 START_GROUP        | BEGIN                        | myGroup1                                                                       | With log reset                                                               | postgres
 START_GROUP        | TIME STAMP SET               | 1048                                                                           |                                                                              | postgres
 LOCK_GROUP         | BEGIN                        | myGroup1                                                                       |                                                                              | postgres
 LOCK_GROUP         | END                          | myGroup1                                                                       | 5 tables locked, 0 deadlock(s)                                               | postgres
 SET_MARK_GROUP     | BEGIN                        | myGroup1                                                                       | START_%                                                                      | postgres
 SET_MARK_GROUP     | END                          | myGroup1                                                                       | START_%                                                                      | postgres
 START_GROUP        | END                          | myGroup1                                                                       | 7 tables/sequences processed                                                 | postgres
 STOP_GROUP         | BEGIN                        | myGroup1                                                                       |                                                                              | postgres
 STOP_GROUP         | TIME STAMP SET               | 1049                                                                           |                                                                              | postgres
 LOCK_GROUP         | BEGIN                        | myGroup1                                                                       |                                                                              | postgres
 LOCK_GROUP         | END                          | myGroup1                                                                       | 5 tables locked, 0 deadlock(s)                                               | postgres
 SET_MARK_GROUP     | BEGIN                        | myGroup1                                                                       | STOP_%                                                                       | postgres
 SET_MARK_GROUP     | END                          | myGroup1                                                                       | STOP_%                                                                       | postgres
 STOP_GROUP         | END                          | myGroup1                                                                       | 7 tables/sequences processed                                                 | postgres
 DROP_GROUP         | BEGIN                        | myGroup1                                                                       |                                                                              | postgres
 DROP_GROUP         | TIME STAMP SET               | 1051                                                                           |                                                                              | postgres
 DROP_GROUP         | LOG_SCHEMA DROPPED           | emaj_myschema1                                                                 |                                                                              | postgres
 DROP_GROUP         | END                          | myGroup1                                                                       | 7 tables/sequences processed                                                 | postgres
 DROP_GROUP         | BEGIN                        | myGroup2                                                                       |                                                                              | postgres
 DROP_GROUP         | TIME STAMP SET               | 1052                                                                           |                                                                              | postgres
 DROP_GROUP         | LOG_SCHEMA DROPPED           | emaj_myschema2                                                                 |                                                                              | postgres
 DROP_GROUP         | END                          | myGroup2                                                                       | 10 tables/sequences processed                                                | postgres
 DROP_GROUP         | BEGIN                        | emptyGroup                                                                     |                                                                              | postgres
 DROP_GROUP         | TIME STAMP SET               | 1053                                                                           |                                                                              | postgres
 DROP_GROUP         | END                          | emptyGroup                                                                     | 0 tables/sequences processed                                                 | postgres
 DROP_GROUP         | BEGIN                        | myGroup5                                                                       |                                                                              | postgres
 DROP_GROUP         | TIME STAMP SET               | 1054                                                                           |                                                                              | postgres
 DROP_GROUP         | LOG_SCHEMA DROPPED           | emaj_myschema5                                                                 |                                                                              | postgres
 DROP_GROUP         | END                          | myGroup5                                                                       | 2 tables/sequences processed                                                 | postgres
 DROP_GROUP         | BEGIN                        | myGroup6                                                                       |                                                                              | postgres
 DROP_GROUP         | TIME STAMP SET               | 1055                                                                           |                                                                              | postgres
 DROP_GROUP         | LOG_SCHEMA DROPPED           | emaj_myschema6                                                                 |                                                                              | postgres
 DROP_GROUP         | END                          | myGroup6                                                                       | 4 tables/sequences processed                                                 | postgres
 CREATE_GROUP       | BEGIN                        | myGroup1                                                                       | audit_only                                                                   | postgres
 CREATE_GROUP       | TIME STAMP SET               | 1056                                                                           |                                                                              | postgres
 CREATE_GROUP       | END                          | myGroup1                                                                       |                                                                              | postgres
 ASSIGN_TABLE       | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_TABLE       | TIME STAMP SET               | 1057                                                                           |                                                                              | postgres
 ASSIGN_TABLE       | LOG_SCHEMA CREATED           | emaj_myschema1                                                                 |                                                                              | postgres
 ASSIGN_TABLE       | TABLE ADDED                  | myschema1.mytbl1                                                               | To the idle group myGroup1                                                   | postgres
 ASSIGN_TABLE       | END                          |                                                                                | 1 tables assigned to the group myGroup1                                      | postgres
 START_GROUP        | BEGIN                        | myGroup1                                                                       | With log reset                                                               | postgres
 START_GROUP        | TIME STAMP SET               | 1058                                                                           |                                                                              | postgres
 LOCK_GROUP         | BEGIN                        | myGroup1                                                                       |                                                                              | postgres
 LOCK_GROUP         | END                          | myGroup1                                                                       | 1 tables locked, 0 deadlock(s)                                               | postgres
 SET_MARK_GROUP     | BEGIN                        | myGroup1                                                                       | START_%                                                                      | postgres
 SET_MARK_GROUP     | END                          | myGroup1                                                                       | START_%                                                                      | postgres
 START_GROUP        | END                          | myGroup1                                                                       | 1 tables/sequences processed                                                 | postgres
 FORCE_DROP_GROUP   | BEGIN                        | myGroup1                                                                       |                                                                              | postgres
 FORCE_DROP_GROUP   | TIME STAMP SET               | 1059                                                                           |                                                                              | postgres
 FORCE_DROP_GROUP   | LOG_SCHEMA DROPPED           | emaj_myschema1                                                                 |                                                                              | postgres
 FORCE_DROP_GROUP   | END                          | myGroup1                                                                       | 1 tables/sequences processed                                                 | postgres
 CREATE_GROUP       | BEGIN                        | myGroup1                                                                       | rollbackable                                                                 | postgres
 CREATE_GROUP       | TIME STAMP SET               | 1060                                                                           |                                                                              | postgres
 CREATE_GROUP       | END                          | myGroup1                                                                       |                                                                              | postgres
 ASSIGN_TABLE       | BEGIN                        |                                                                                |                                                                              | postgres
 ASSIGN_TABLE       | TIME STAMP SET               | 1061                                                                           |                                                                              | postgres
 ASSIGN_TABLE       | LOG_SCHEMA CREATED           | emaj_myschema1                                                                 |                                                                              | postgres
 ASSIGN_TABLE       | TABLE ADDED                  | myschema1.mytbl1                                                               | To the idle group myGroup1                                                   | postgres
 ASSIGN_TABLE       | END                          |                                                                                | 1 tables assigned to the group myGroup1                                      | postgres
 START_GROUP        | BEGIN                        | myGroup1                                                                       | With log reset                                                               | postgres
 START_GROUP        | TIME STAMP SET               | 1062                                                                           |                                                                              | postgres
 LOCK_GROUP         | BEGIN                        | myGroup1                                                                       |                                                                              | postgres
 LOCK_GROUP         | END                          | myGroup1                                                                       | 1 tables locked, 0 deadlock(s)                                               | postgres
 SET_MARK_GROUP     | BEGIN                        | myGroup1                                                                       | START_%                                                                      | postgres
 SET_MARK_GROUP     | END                          | myGroup1                                                                       | START_%                                                                      | postgres
 START_GROUP        | END                          | myGroup1                                                                       | 1 tables/sequences processed                                                 | postgres
 FORCE_DROP_GROUP   | BEGIN                        | myGroup1                                                                       |                                                                              | postgres
 FORCE_DROP_GROUP   | TIME STAMP SET               | 1063                                                                           |                                                                              | postgres
 FORCE_DROP_GROUP   | LOG_SCHEMA DROPPED           | emaj_myschema1                                                                 |                                                                              | postgres
 FORCE_DROP_GROUP   | END                          | myGroup1                                                                       | 1 tables/sequences processed                                                 | postgres
 FORGET_GROUP       | BEGIN                        | unknownGroup                                                                   |                                                                              | postgres
 FORGET_GROUP       | END                          | unknownGroup                                                                   | 0 rows deleted from emaj_log_session and 0 rows deleted from emaj_group_hist | postgres
 FORGET_GROUP       | BEGIN                        | myGroup1                                                                       |                                                                              | postgres
 FORGET_GROUP       | END                          | myGroup1                                                                       | 3 rows deleted from emaj_log_session and 4 rows deleted from emaj_group_hist | postgres
(305 rows)

select time_id, time_last_emaj_gid, time_event from emaj.emaj_time_stamp order by time_id;
 time_id | time_last_emaj_gid | time_event 
---------+--------------------+------------
    1000 |            1000000 | C
    1001 |            1000000 | C
    1002 |            1000000 | C
    1003 |            1000000 | C
    1004 |            1000000 | C
    1005 |            1000000 | C
    1006 |            1000000 | C
    1007 |            1000000 | A
    1008 |            1000000 | A
    1016 |            1000000 | A
    1017 |            1000000 | A
    1018 |            1000000 | A
    1019 |            1000000 | A
    1020 |            1000000 | A
    1021 |            1000000 | A
    1022 |            1000000 | A
    1023 |            1000000 | A
    1024 |            1000000 | A
    1025 |            1000000 | A
    1026 |            1000000 | A
    1027 |            1000000 | A
    1028 |            1000000 | A
    1029 |            1000000 | A
    1030 |            1000000 | A
    1031 |            1000000 | A
    1032 |            1000000 | A
    1033 |            1000000 | A
    1034 |            1000000 | I
    1035 |            1000000 | I
    1036 |            1000000 | I
    1037 |            1000000 | D
    1038 |            1000000 | I
    1039 |            1000000 | I
    1040 |            1000000 | I
    1041 |            1000000 | I
    1042 |            1000000 | I
    1043 |            1000000 | D
    1045 |            1000000 | I
    1046 |            1000000 | I
    1047 |            1000000 | A
    1048 |            1000000 | S
    1049 |            1000000 | X
    1051 |            1000000 | D
    1052 |            1000000 | D
    1053 |            1000000 | D
    1054 |            1000000 | D
    1055 |            1000000 | D
    1056 |            1000000 | C
    1057 |            1000000 | A
    1058 |            1000000 | S
    1059 |            1000000 | D
    1060 |            1000000 | C
    1061 |            1000000 | A
    1062 |            1000000 | S
    1063 |            1000000 | D
(55 rows)

-- remove the temp directory
\! rm -R $EMAJTESTTMPDIR
