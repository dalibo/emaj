-- upgrade_while_logging.sql : Upgrade from E-Maj 1.3. to next_version while groups are in logging state.
--
-----------------------------
-- set the default_tablespace parameter to tspemaj to store new technical tables into this tablespace
-----------------------------
SET default_tablespace TO tspemaj;
-- specific to 2.2.2 to 2.2.3 upgrade
-- uncomment to let the risky sequence values check fail
--begin;
--  select emaj.emaj_stop_group('myGroup1');
--  select emaj.emaj_start_group('myGroup1','%');
--rollback;
-----------------------------
-- emaj update to next_version
-----------------------------
-- check the extension is available
select * from pg_available_extension_versions where name = 'emaj';
 name |   version    | installed | superuser | relocatable | schema |      requires       |                                            comment                                             
------+--------------+-----------+-----------+-------------+--------+---------------------+------------------------------------------------------------------------------------------------
 emaj | 2.2.2        | t         | t         | f           | emaj   | {dblink,btree_gist} | E-Maj extension enables fine-grained write logging and time travel on subsets of the database.
 emaj | next_version | f         | t         | f           | emaj   | {dblink,btree_gist} | E-Maj extension enables fine-grained write logging and time travel on subsets of the database.
(2 rows)

select relname from pg_catalog.pg_class, 
                    (select unnest(extconfig) as oid from pg_catalog.pg_extension where extname = 'emaj') as t 
  where t.oid = pg_class.oid
  order by 1;
           relname           
-----------------------------
 emaj_alter_plan
 emaj_global_seq
 emaj_group
 emaj_group_def
 emaj_hist
 emaj_hist_hist_id_seq
 emaj_mark
 emaj_mark_mark_id_seq
 emaj_param
 emaj_relation
 emaj_rlbk
 emaj_rlbk_plan
 emaj_rlbk_rlbk_id_seq
 emaj_rlbk_session
 emaj_rlbk_stat
 emaj_schema
 emaj_seq_hole
 emaj_sequence
 emaj_time_stamp
 emaj_time_stamp_time_id_seq
(20 rows)

-- process the extension upgrade
ALTER EXTENSION emaj UPDATE TO 'next_version';
NOTICE:  drop cascades to function emaj_log_stat_group(text,text,text)
NOTICE:  drop cascades to function emaj_detailed_log_stat_group(text,text,text)
-----------------------------
-- check installation
-----------------------------
-- check impact in catalog
select extname, extversion from pg_extension where extname = 'emaj';
 extname |  extversion  
---------+--------------
 emaj    | next_version
(1 row)

select relname from pg_catalog.pg_class, 
                    (select unnest(extconfig) as oid from pg_catalog.pg_extension where extname = 'emaj') as t 
  where t.oid = pg_class.oid
  order by 1;
           relname           
-----------------------------
 emaj_alter_plan
 emaj_global_seq
 emaj_group
 emaj_group_def
 emaj_hist
 emaj_hist_hist_id_seq
 emaj_mark
 emaj_mark_mark_id_seq
 emaj_param
 emaj_relation
 emaj_rlbk
 emaj_rlbk_plan
 emaj_rlbk_rlbk_id_seq
 emaj_rlbk_session
 emaj_rlbk_stat
 emaj_schema
 emaj_seq_hole
 emaj_sequence
 emaj_time_stamp
 emaj_time_stamp_time_id_seq
(20 rows)

-- check the emaj_param content
SELECT param_value_text FROM emaj.emaj_param WHERE param_key = 'emaj_version';
 param_value_text 
------------------
 <NEXT_VERSON>
(1 row)

-- check tables list
\d emaj.*
Composite type "emaj._verify_groups_type"
   Column   | Type | Modifiers 
------------+------+-----------
 ver_schema | text | 
 ver_tblseq | text | 
 ver_msg    | text | 

                 Table "emaj.emaj_alter_plan"
          Column           |         Type          | Modifiers 
---------------------------+-----------------------+-----------
 altr_time_id              | bigint                | not null
 altr_step                 | emaj._alter_step_enum | not null
 altr_schema               | text                  | not null
 altr_tblseq               | text                  | not null
 altr_group                | text                  | not null
 altr_priority             | integer               | 
 altr_group_is_logging     | boolean               | 
 altr_new_group            | text                  | 
 altr_new_priority         | integer               | 
 altr_new_group_is_logging | boolean               | 
 altr_rlbk_id              | bigint                | 
Indexes:
    "emaj_alter_plan_pkey" PRIMARY KEY, btree (altr_time_id, altr_step, altr_schema, altr_tblseq, altr_group), tablespace "tspemaj"
Foreign-key constraints:
    "emaj_alter_plan_altr_time_id_fkey" FOREIGN KEY (altr_time_id) REFERENCES emaj.emaj_time_stamp(time_id)
Tablespace: "tspemaj"

          Index "emaj.emaj_alter_plan_pkey"
    Column    |         Type          |  Definition  
--------------+-----------------------+--------------
 altr_time_id | bigint                | altr_time_id
 altr_step    | emaj._alter_step_enum | altr_step
 altr_schema  | text                  | altr_schema
 altr_tblseq  | text                  | altr_tblseq
 altr_group   | text                  | altr_group
primary key, btree, for table "emaj.emaj_alter_plan"
Tablespace: "tspemaj"

Composite type "emaj.emaj_consolidable_rollback_type"
           Column           |  Type   | Modifiers 
----------------------------+---------+-----------
 cons_group                 | text    | 
 cons_target_rlbk_mark_name | text    | 
 cons_target_rlbk_mark_id   | bigint  | 
 cons_end_rlbk_mark_name    | text    | 
 cons_end_rlbk_mark_id      | bigint  | 
 cons_rows                  | bigint  | 
 cons_marks                 | integer | 

        Composite type "emaj.emaj_detailed_log_stat_type"
          Column          |           Type           | Modifiers 
--------------------------+--------------------------+-----------
 stat_group               | text                     | 
 stat_schema              | text                     | 
 stat_table               | text                     | 
 stat_first_mark          | text                     | 
 stat_first_mark_datetime | timestamp with time zone | 
 stat_last_mark           | text                     | 
 stat_last_mark_datetime  | timestamp with time zone | 
 stat_role                | character varying(32)    | 
 stat_verb                | character varying(6)     | 
 stat_rows                | bigint                   | 

        Sequence "emaj.emaj_global_seq"
    Column     |  Type   |        Value        
---------------+---------+---------------------
 sequence_name | name    | emaj_global_seq
 last_value    | bigint  | 85
 start_value   | bigint  | 1
 increment_by  | bigint  | 1
 max_value     | bigint  | 9223372036854775807
 min_value     | bigint  | 1
 cache_value   | bigint  | 1
 log_cnt       | bigint  | 14
 is_cycled     | boolean | f
 is_called     | boolean | t

                                               Table "emaj.emaj_group"
          Column          |  Type   |                                    Modifiers                                    
--------------------------+---------+---------------------------------------------------------------------------------
 group_name               | text    | not null
 group_is_logging         | boolean | not null
 group_is_rlbk_protected  | boolean | not null
 group_nb_table           | integer | 
 group_nb_sequence        | integer | 
 group_is_rollbackable    | boolean | not null
 group_creation_time_id   | bigint  | not null
 group_last_alter_time_id | bigint  | 
 group_pg_version         | text    | not null default "substring"(version(), 'PostgreSQL\s([.,0-9,A-Z,a-z]*)'::text)
 group_comment            | text    | 
Indexes:
    "emaj_group_pkey" PRIMARY KEY, btree (group_name), tablespace "tspemaj"
Foreign-key constraints:
    "emaj_group_group_creation_time_id_fkey" FOREIGN KEY (group_creation_time_id) REFERENCES emaj.emaj_time_stamp(time_id)
    "emaj_group_group_last_alter_time_id_fkey" FOREIGN KEY (group_last_alter_time_id) REFERENCES emaj.emaj_time_stamp(time_id)
Referenced by:
    TABLE "emaj.emaj_mark" CONSTRAINT "emaj_mark_mark_group_fkey" FOREIGN KEY (mark_group) REFERENCES emaj.emaj_group(group_name) ON DELETE CASCADE
    TABLE "emaj.emaj_relation" CONSTRAINT "emaj_relation_rel_group_fkey" FOREIGN KEY (rel_group) REFERENCES emaj.emaj_group(group_name)
Tablespace: "tspemaj"

          Table "emaj.emaj_group_def"
          Column          |  Type   | Modifiers 
--------------------------+---------+-----------
 grpdef_group             | text    | not null
 grpdef_schema            | text    | not null
 grpdef_tblseq            | text    | not null
 grpdef_priority          | integer | 
 grpdef_log_schema_suffix | text    | 
 grpdef_emaj_names_prefix | text    | 
 grpdef_log_dat_tsp       | text    | 
 grpdef_log_idx_tsp       | text    | 
Indexes:
    "emaj_group_def_pkey" PRIMARY KEY, btree (grpdef_group, grpdef_schema, grpdef_tblseq), tablespace "tspemaj"
    "emaj_group_def_idx1" btree (grpdef_schema, grpdef_tblseq), tablespace "tspemaj"
Tablespace: "tspemaj"

   Index "emaj.emaj_group_def_idx1"
    Column     | Type |  Definition   
---------------+------+---------------
 grpdef_schema | text | grpdef_schema
 grpdef_tblseq | text | grpdef_tblseq
btree, for table "emaj.emaj_group_def"
Tablespace: "tspemaj"

   Index "emaj.emaj_group_def_pkey"
    Column     | Type |  Definition   
---------------+------+---------------
 grpdef_group  | text | grpdef_group
 grpdef_schema | text | grpdef_schema
 grpdef_tblseq | text | grpdef_tblseq
primary key, btree, for table "emaj.emaj_group_def"
Tablespace: "tspemaj"

  Index "emaj.emaj_group_pkey"
   Column   | Type | Definition 
------------+------+------------
 group_name | text | group_name
primary key, btree, for table "emaj.emaj_group"
Tablespace: "tspemaj"

                                           Table "emaj.emaj_hist"
    Column     |           Type           |                            Modifiers                             
---------------+--------------------------+------------------------------------------------------------------
 hist_id       | bigint                   | not null default nextval('emaj.emaj_hist_hist_id_seq'::regclass)
 hist_datetime | timestamp with time zone | not null default clock_timestamp()
 hist_function | text                     | not null
 hist_event    | text                     | 
 hist_object   | text                     | 
 hist_wording  | text                     | 
 hist_user     | text                     | default "session_user"()
 hist_txid     | bigint                   | default txid_current()
Indexes:
    "emaj_hist_pkey" PRIMARY KEY, btree (hist_id), tablespace "tspemaj"
Tablespace: "tspemaj"

      Sequence "emaj.emaj_hist_hist_id_seq"
    Column     |  Type   |         Value         
---------------+---------+-----------------------
 sequence_name | name    | emaj_hist_hist_id_seq
 last_value    | bigint  | 112
 start_value   | bigint  | 1
 increment_by  | bigint  | 1
 max_value     | bigint  | 9223372036854775807
 min_value     | bigint  | 1
 cache_value   | bigint  | 1
 log_cnt       | bigint  | 20
 is_cycled     | boolean | f
 is_called     | boolean | t
Owned by: emaj.emaj_hist.hist_id

  Index "emaj.emaj_hist_pkey"
 Column  |  Type  | Definition 
---------+--------+------------
 hist_id | bigint | hist_id
primary key, btree, for table "emaj.emaj_hist"
Tablespace: "tspemaj"

            Composite type "emaj.emaj_log_stat_type"
          Column          |           Type           | Modifiers 
--------------------------+--------------------------+-----------
 stat_group               | text                     | 
 stat_schema              | text                     | 
 stat_table               | text                     | 
 stat_first_mark          | text                     | 
 stat_first_mark_datetime | timestamp with time zone | 
 stat_last_mark           | text                     | 
 stat_last_mark_datetime  | timestamp with time zone | 
 stat_rows                | bigint                   | 

                                          Table "emaj.emaj_mark"
            Column            |  Type   |                            Modifiers                             
------------------------------+---------+------------------------------------------------------------------
 mark_group                   | text    | not null
 mark_name                    | text    | not null
 mark_id                      | bigint  | not null default nextval('emaj.emaj_mark_mark_id_seq'::regclass)
 mark_time_id                 | bigint  | not null
 mark_is_deleted              | boolean | not null
 mark_is_rlbk_protected       | boolean | not null
 mark_comment                 | text    | 
 mark_log_rows_before_next    | bigint  | 
 mark_logged_rlbk_target_mark | text    | 
Indexes:
    "emaj_mark_pkey" PRIMARY KEY, btree (mark_group, mark_name), tablespace "tspemaj"
    "emaj_mark_idx1" btree (mark_time_id), tablespace "tspemaj"
Foreign-key constraints:
    "emaj_mark_mark_group_fkey" FOREIGN KEY (mark_group) REFERENCES emaj.emaj_group(group_name) ON DELETE CASCADE
    "emaj_mark_mark_time_id_fkey" FOREIGN KEY (mark_time_id) REFERENCES emaj.emaj_time_stamp(time_id)
Tablespace: "tspemaj"

     Index "emaj.emaj_mark_idx1"
    Column    |  Type  |  Definition  
--------------+--------+--------------
 mark_time_id | bigint | mark_time_id
btree, for table "emaj.emaj_mark"
Tablespace: "tspemaj"

      Sequence "emaj.emaj_mark_mark_id_seq"
    Column     |  Type   |         Value         
---------------+---------+-----------------------
 sequence_name | name    | emaj_mark_mark_id_seq
 last_value    | bigint  | 14
 start_value   | bigint  | 1
 increment_by  | bigint  | 1
 max_value     | bigint  | 9223372036854775807
 min_value     | bigint  | 1
 cache_value   | bigint  | 1
 log_cnt       | bigint  | 19
 is_cycled     | boolean | f
 is_called     | boolean | t
Owned by: emaj.emaj_mark.mark_id

  Index "emaj.emaj_mark_pkey"
   Column   | Type | Definition 
------------+------+------------
 mark_group | text | mark_group
 mark_name  | text | mark_name
primary key, btree, for table "emaj.emaj_mark"
Tablespace: "tspemaj"

           Table "emaj.emaj_param"
        Column        |   Type   | Modifiers 
----------------------+----------+-----------
 param_key            | text     | not null
 param_value_text     | text     | 
 param_value_int      | bigint   | 
 param_value_boolean  | boolean  | 
 param_value_interval | interval | 
Indexes:
    "emaj_param_pkey" PRIMARY KEY, btree (param_key), tablespace "tspemaj"
Tablespace: "tspemaj"

 Index "emaj.emaj_param_pkey"
  Column   | Type | Definition 
-----------+------+------------
 param_key | text | param_key
primary key, btree, for table "emaj.emaj_param"
Tablespace: "tspemaj"

            Table "emaj.emaj_relation"
          Column          |   Type    | Modifiers 
--------------------------+-----------+-----------
 rel_schema               | text      | not null
 rel_tblseq               | text      | not null
 rel_time_range           | int8range | not null
 rel_group                | text      | not null
 rel_kind                 | text      | 
 rel_priority             | integer   | 
 rel_log_schema           | text      | 
 rel_log_table            | text      | 
 rel_log_dat_tsp          | text      | 
 rel_log_index            | text      | 
 rel_log_idx_tsp          | text      | 
 rel_log_sequence         | text      | 
 rel_log_function         | text      | 
 rel_sql_columns          | text      | 
 rel_sql_pk_columns       | text      | 
 rel_sql_pk_eq_conditions | text      | 
Indexes:
    "emaj_relation_pkey" PRIMARY KEY, btree (rel_schema, rel_tblseq, rel_time_range), tablespace "tspemaj"
    "emaj_relation_idx1" btree (rel_group, rel_kind), tablespace "tspemaj"
    "emaj_relation_idx2" btree (rel_log_schema), tablespace "tspemaj"
    "emaj_relation_rel_schema_rel_tblseq_rel_time_range_excl" EXCLUDE USING gist (rel_schema WITH =, rel_tblseq WITH =, rel_time_range WITH &&), tablespace "tspemaj"
Foreign-key constraints:
    "emaj_relation_rel_group_fkey" FOREIGN KEY (rel_group) REFERENCES emaj.emaj_group(group_name)
    "emaj_relation_rel_log_schema_fkey" FOREIGN KEY (rel_log_schema) REFERENCES emaj.emaj_schema(sch_name)
Tablespace: "tspemaj"

Index "emaj.emaj_relation_idx1"
  Column   | Type | Definition 
-----------+------+------------
 rel_group | text | rel_group
 rel_kind  | text | rel_kind
btree, for table "emaj.emaj_relation"
Tablespace: "tspemaj"

    Index "emaj.emaj_relation_idx2"
     Column     | Type |   Definition   
----------------+------+----------------
 rel_log_schema | text | rel_log_schema
btree, for table "emaj.emaj_relation"
Tablespace: "tspemaj"

       Index "emaj.emaj_relation_pkey"
     Column     |   Type    |   Definition   
----------------+-----------+----------------
 rel_schema     | text      | rel_schema
 rel_tblseq     | text      | rel_tblseq
 rel_time_range | int8range | rel_time_range
primary key, btree, for table "emaj.emaj_relation"
Tablespace: "tspemaj"

Index "emaj.emaj_relation_rel_schema_rel_tblseq_rel_time_range_excl"
     Column     |     Type      |   Definition   
----------------+---------------+----------------
 rel_schema     | gbtreekey_var | rel_schema
 rel_tblseq     | gbtreekey_var | rel_tblseq
 rel_time_range | int8range     | rel_time_range
gist, for table "emaj.emaj_relation"
Tablespace: "tspemaj"

                                                  Table "emaj.emaj_rlbk"
           Column            |           Type           |                            Modifiers                             
-----------------------------+--------------------------+------------------------------------------------------------------
 rlbk_id                     | integer                  | not null default nextval('emaj.emaj_rlbk_rlbk_id_seq'::regclass)
 rlbk_groups                 | text[]                   | not null
 rlbk_mark                   | text                     | not null
 rlbk_mark_time_id           | bigint                   | not null
 rlbk_time_id                | bigint                   | 
 rlbk_is_logged              | boolean                  | not null
 rlbk_is_alter_group_allowed | boolean                  | 
 rlbk_nb_session             | integer                  | not null
 rlbk_nb_table               | integer                  | 
 rlbk_nb_sequence            | integer                  | 
 rlbk_eff_nb_table           | integer                  | 
 rlbk_status                 | emaj._rlbk_status_enum   | 
 rlbk_begin_hist_id          | bigint                   | 
 rlbk_is_dblink_used         | boolean                  | 
 rlbk_end_datetime           | timestamp with time zone | 
 rlbk_messages               | text[]                   | 
Indexes:
    "emaj_rlbk_pkey" PRIMARY KEY, btree (rlbk_id), tablespace "tspemaj"
    "emaj_rlbk_idx1" btree (rlbk_status) WHERE rlbk_status = ANY (ARRAY['PLANNING'::emaj._rlbk_status_enum, 'LOCKING'::emaj._rlbk_status_enum, 'EXECUTING'::emaj._rlbk_status_enum, 'COMPLETED'::emaj._rlbk_status_enum]), tablespace "tspemaj"
Foreign-key constraints:
    "emaj_rlbk_rlbk_mark_time_id_fkey" FOREIGN KEY (rlbk_mark_time_id) REFERENCES emaj.emaj_time_stamp(time_id)
    "emaj_rlbk_rlbk_time_id_fkey" FOREIGN KEY (rlbk_time_id) REFERENCES emaj.emaj_time_stamp(time_id)
Referenced by:
    TABLE "emaj.emaj_rlbk_plan" CONSTRAINT "emaj_rlbk_plan_rlbp_rlbk_id_fkey" FOREIGN KEY (rlbp_rlbk_id) REFERENCES emaj.emaj_rlbk(rlbk_id)
    TABLE "emaj.emaj_rlbk_session" CONSTRAINT "emaj_rlbk_session_rlbs_rlbk_id_fkey" FOREIGN KEY (rlbs_rlbk_id) REFERENCES emaj.emaj_rlbk(rlbk_id)
    TABLE "emaj.emaj_rlbk_stat" CONSTRAINT "emaj_rlbk_stat_rlbt_rlbk_id_fkey" FOREIGN KEY (rlbt_rlbk_id) REFERENCES emaj.emaj_rlbk(rlbk_id)
Tablespace: "tspemaj"

            Index "emaj.emaj_rlbk_idx1"
   Column    |          Type          | Definition  
-------------+------------------------+-------------
 rlbk_status | emaj._rlbk_status_enum | rlbk_status
btree, for table "emaj.emaj_rlbk", predicate (rlbk_status = ANY (ARRAY['PLANNING'::emaj._rlbk_status_enum, 'LOCKING'::emaj._rlbk_status_enum, 'EXECUTING'::emaj._rlbk_status_enum, 'COMPLETED'::emaj._rlbk_status_enum]))
Tablespace: "tspemaj"

  Index "emaj.emaj_rlbk_pkey"
 Column  |  Type   | Definition 
---------+---------+------------
 rlbk_id | integer | rlbk_id
primary key, btree, for table "emaj.emaj_rlbk"
Tablespace: "tspemaj"

                  Table "emaj.emaj_rlbk_plan"
         Column          |           Type           | Modifiers 
-------------------------+--------------------------+-----------
 rlbp_rlbk_id            | integer                  | not null
 rlbp_step               | emaj._rlbk_step_enum     | not null
 rlbp_schema             | text                     | not null
 rlbp_table              | text                     | not null
 rlbp_fkey               | text                     | not null
 rlbp_batch_number       | integer                  | 
 rlbp_session            | integer                  | 
 rlbp_fkey_def           | text                     | 
 rlbp_estimated_quantity | bigint                   | 
 rlbp_estimated_duration | interval                 | 
 rlbp_estimate_method    | integer                  | 
 rlbp_start_datetime     | timestamp with time zone | 
 rlbp_quantity           | bigint                   | 
 rlbp_duration           | interval                 | 
Indexes:
    "emaj_rlbk_plan_pkey" PRIMARY KEY, btree (rlbp_rlbk_id, rlbp_step, rlbp_schema, rlbp_table, rlbp_fkey), tablespace "tspemaj"
Foreign-key constraints:
    "emaj_rlbk_plan_rlbp_rlbk_id_fkey" FOREIGN KEY (rlbp_rlbk_id) REFERENCES emaj.emaj_rlbk(rlbk_id)
Tablespace: "tspemaj"

          Index "emaj.emaj_rlbk_plan_pkey"
    Column    |         Type         |  Definition  
--------------+----------------------+--------------
 rlbp_rlbk_id | integer              | rlbp_rlbk_id
 rlbp_step    | emaj._rlbk_step_enum | rlbp_step
 rlbp_schema  | text                 | rlbp_schema
 rlbp_table   | text                 | rlbp_table
 rlbp_fkey    | text                 | rlbp_fkey
primary key, btree, for table "emaj.emaj_rlbk_plan"
Tablespace: "tspemaj"

      Sequence "emaj.emaj_rlbk_rlbk_id_seq"
    Column     |  Type   |         Value         
---------------+---------+-----------------------
 sequence_name | name    | emaj_rlbk_rlbk_id_seq
 last_value    | bigint  | 4
 start_value   | bigint  | 1
 increment_by  | bigint  | 1
 max_value     | bigint  | 9223372036854775807
 min_value     | bigint  | 1
 cache_value   | bigint  | 1
 log_cnt       | bigint  | 29
 is_cycled     | boolean | f
 is_called     | boolean | t
Owned by: emaj.emaj_rlbk.rlbk_id

               Table "emaj.emaj_rlbk_session"
       Column        |           Type           | Modifiers 
---------------------+--------------------------+-----------
 rlbs_rlbk_id        | integer                  | not null
 rlbs_session        | integer                  | not null
 rlbs_txid           | bigint                   | not null
 rlbs_start_datetime | timestamp with time zone | not null
 rlbs_end_datetime   | timestamp with time zone | 
Indexes:
    "emaj_rlbk_session_pkey" PRIMARY KEY, btree (rlbs_rlbk_id, rlbs_session), tablespace "tspemaj"
Foreign-key constraints:
    "emaj_rlbk_session_rlbs_rlbk_id_fkey" FOREIGN KEY (rlbs_rlbk_id) REFERENCES emaj.emaj_rlbk(rlbk_id)
Tablespace: "tspemaj"

  Index "emaj.emaj_rlbk_session_pkey"
    Column    |  Type   |  Definition  
--------------+---------+--------------
 rlbs_rlbk_id | integer | rlbs_rlbk_id
 rlbs_session | integer | rlbs_session
primary key, btree, for table "emaj.emaj_rlbk_session"
Tablespace: "tspemaj"

           Table "emaj.emaj_rlbk_stat"
    Column     |         Type         | Modifiers 
---------------+----------------------+-----------
 rlbt_step     | emaj._rlbk_step_enum | not null
 rlbt_schema   | text                 | not null
 rlbt_table    | text                 | not null
 rlbt_fkey     | text                 | not null
 rlbt_rlbk_id  | integer              | not null
 rlbt_quantity | bigint               | not null
 rlbt_duration | interval             | not null
Indexes:
    "emaj_rlbk_stat_pkey" PRIMARY KEY, btree (rlbt_step, rlbt_schema, rlbt_table, rlbt_fkey, rlbt_rlbk_id), tablespace "tspemaj"
Foreign-key constraints:
    "emaj_rlbk_stat_rlbt_rlbk_id_fkey" FOREIGN KEY (rlbt_rlbk_id) REFERENCES emaj.emaj_rlbk(rlbk_id)
Tablespace: "tspemaj"

          Index "emaj.emaj_rlbk_stat_pkey"
    Column    |         Type         |  Definition  
--------------+----------------------+--------------
 rlbt_step    | emaj._rlbk_step_enum | rlbt_step
 rlbt_schema  | text                 | rlbt_schema
 rlbt_table   | text                 | rlbt_table
 rlbt_fkey    | text                 | rlbt_fkey
 rlbt_rlbk_id | integer              | rlbt_rlbk_id
primary key, btree, for table "emaj.emaj_rlbk_stat"
Tablespace: "tspemaj"

         Composite type "emaj.emaj_rollback_activity_type"
           Column            |           Type           | Modifiers 
-----------------------------+--------------------------+-----------
 rlbk_id                     | integer                  | 
 rlbk_groups                 | text[]                   | 
 rlbk_mark                   | text                     | 
 rlbk_mark_datetime          | timestamp with time zone | 
 rlbk_is_logged              | boolean                  | 
 rlbk_is_alter_group_allowed | boolean                  | 
 rlbk_nb_session             | integer                  | 
 rlbk_nb_table               | integer                  | 
 rlbk_nb_sequence            | integer                  | 
 rlbk_eff_nb_table           | integer                  | 
 rlbk_status                 | emaj._rlbk_status_enum   | 
 rlbk_start_datetime         | timestamp with time zone | 
 rlbk_elapse                 | interval                 | 
 rlbk_remaining              | interval                 | 
 rlbk_completion_pct         | smallint                 | 

                              Table "emaj.emaj_schema"
    Column    |           Type           |                Modifiers                 
--------------+--------------------------+------------------------------------------
 sch_name     | text                     | not null
 sch_datetime | timestamp with time zone | not null default transaction_timestamp()
Indexes:
    "emaj_schema_pkey" PRIMARY KEY, btree (sch_name), tablespace "tspemaj"
Referenced by:
    TABLE "emaj.emaj_relation" CONSTRAINT "emaj_relation_rel_log_schema_fkey" FOREIGN KEY (rel_log_schema) REFERENCES emaj.emaj_schema(sch_name)
Tablespace: "tspemaj"

Index "emaj.emaj_schema_pkey"
  Column  | Type | Definition 
----------+------+------------
 sch_name | text | sch_name
primary key, btree, for table "emaj.emaj_schema"
Tablespace: "tspemaj"

       Table "emaj.emaj_seq_hole"
       Column       |  Type  | Modifiers 
--------------------+--------+-----------
 sqhl_schema        | text   | not null
 sqhl_table         | text   | not null
 sqhl_begin_time_id | bigint | not null
 sqhl_end_time_id   | bigint | not null
 sqhl_hole_size     | bigint | not null
Indexes:
    "emaj_seq_hole_pkey" PRIMARY KEY, btree (sqhl_schema, sqhl_table, sqhl_begin_time_id), tablespace "tspemaj"
Foreign-key constraints:
    "emaj_seq_hole_sqhl_begin_time_id_fkey" FOREIGN KEY (sqhl_begin_time_id) REFERENCES emaj.emaj_time_stamp(time_id)
    "emaj_seq_hole_sqhl_end_time_id_fkey" FOREIGN KEY (sqhl_end_time_id) REFERENCES emaj.emaj_time_stamp(time_id)
Tablespace: "tspemaj"

         Index "emaj.emaj_seq_hole_pkey"
       Column       |  Type  |     Definition     
--------------------+--------+--------------------
 sqhl_schema        | text   | sqhl_schema
 sqhl_table         | text   | sqhl_table
 sqhl_begin_time_id | bigint | sqhl_begin_time_id
primary key, btree, for table "emaj.emaj_seq_hole"
Tablespace: "tspemaj"

      Table "emaj.emaj_sequence"
     Column     |  Type   | Modifiers 
----------------+---------+-----------
 sequ_schema    | text    | not null
 sequ_name      | text    | not null
 sequ_time_id   | bigint  | not null
 sequ_last_val  | bigint  | not null
 sequ_start_val | bigint  | not null
 sequ_increment | bigint  | not null
 sequ_max_val   | bigint  | not null
 sequ_min_val   | bigint  | not null
 sequ_cache_val | bigint  | not null
 sequ_is_cycled | boolean | not null
 sequ_is_called | boolean | not null
Indexes:
    "emaj_sequence_pkey" PRIMARY KEY, btree (sequ_schema, sequ_name, sequ_time_id), tablespace "tspemaj"
Foreign-key constraints:
    "emaj_sequence_sequ_time_id_fkey" FOREIGN KEY (sequ_time_id) REFERENCES emaj.emaj_time_stamp(time_id)
Tablespace: "tspemaj"

   Index "emaj.emaj_sequence_pkey"
    Column    |  Type  |  Definition  
--------------+--------+--------------
 sequ_schema  | text   | sequ_schema
 sequ_name    | text   | sequ_name
 sequ_time_id | bigint | sequ_time_id
primary key, btree, for table "emaj.emaj_sequence"
Tablespace: "tspemaj"

                                               Table "emaj.emaj_time_stamp"
        Column        |           Type           |                               Modifiers                                
----------------------+--------------------------+------------------------------------------------------------------------
 time_id              | bigint                   | not null default nextval('emaj.emaj_time_stamp_time_id_seq'::regclass)
 time_clock_timestamp | timestamp with time zone | not null default clock_timestamp()
 time_stmt_timestamp  | timestamp with time zone | not null default statement_timestamp()
 time_tx_timestamp    | timestamp with time zone | not null default transaction_timestamp()
 time_tx_id           | bigint                   | default txid_current()
 time_last_emaj_gid   | bigint                   | 
 time_event           | character(1)             | 
Indexes:
    "emaj_time_stamp_pkey" PRIMARY KEY, btree (time_id), tablespace "tspemaj"
Referenced by:
    TABLE "emaj.emaj_alter_plan" CONSTRAINT "emaj_alter_plan_altr_time_id_fkey" FOREIGN KEY (altr_time_id) REFERENCES emaj.emaj_time_stamp(time_id)
    TABLE "emaj.emaj_group" CONSTRAINT "emaj_group_group_creation_time_id_fkey" FOREIGN KEY (group_creation_time_id) REFERENCES emaj.emaj_time_stamp(time_id)
    TABLE "emaj.emaj_group" CONSTRAINT "emaj_group_group_last_alter_time_id_fkey" FOREIGN KEY (group_last_alter_time_id) REFERENCES emaj.emaj_time_stamp(time_id)
    TABLE "emaj.emaj_mark" CONSTRAINT "emaj_mark_mark_time_id_fkey" FOREIGN KEY (mark_time_id) REFERENCES emaj.emaj_time_stamp(time_id)
    TABLE "emaj.emaj_rlbk" CONSTRAINT "emaj_rlbk_rlbk_mark_time_id_fkey" FOREIGN KEY (rlbk_mark_time_id) REFERENCES emaj.emaj_time_stamp(time_id)
    TABLE "emaj.emaj_rlbk" CONSTRAINT "emaj_rlbk_rlbk_time_id_fkey" FOREIGN KEY (rlbk_time_id) REFERENCES emaj.emaj_time_stamp(time_id)
    TABLE "emaj.emaj_seq_hole" CONSTRAINT "emaj_seq_hole_sqhl_begin_time_id_fkey" FOREIGN KEY (sqhl_begin_time_id) REFERENCES emaj.emaj_time_stamp(time_id)
    TABLE "emaj.emaj_seq_hole" CONSTRAINT "emaj_seq_hole_sqhl_end_time_id_fkey" FOREIGN KEY (sqhl_end_time_id) REFERENCES emaj.emaj_time_stamp(time_id)
    TABLE "emaj.emaj_sequence" CONSTRAINT "emaj_sequence_sequ_time_id_fkey" FOREIGN KEY (sequ_time_id) REFERENCES emaj.emaj_time_stamp(time_id)
Tablespace: "tspemaj"

Index "emaj.emaj_time_stamp_pkey"
 Column  |  Type  | Definition 
---------+--------+------------
 time_id | bigint | time_id
primary key, btree, for table "emaj.emaj_time_stamp"
Tablespace: "tspemaj"

      Sequence "emaj.emaj_time_stamp_time_id_seq"
    Column     |  Type   |            Value            
---------------+---------+-----------------------------
 sequence_name | name    | emaj_time_stamp_time_id_seq
 last_value    | bigint  | 18
 start_value   | bigint  | 1
 increment_by  | bigint  | 1
 max_value     | bigint  | 9223372036854775807
 min_value     | bigint  | 1
 cache_value   | bigint  | 1
 log_cnt       | bigint  | 15
 is_cycled     | boolean | f
 is_called     | boolean | t
Owned by: emaj.emaj_time_stamp.time_id

       View "emaj.emaj_visible_param"
        Column        |   Type   | Modifiers 
----------------------+----------+-----------
 param_key            | text     | 
 param_value_text     | text     | 
 param_value_int      | bigint   | 
 param_value_boolean  | boolean  | 
 param_value_interval | interval | 

                                    Table "emaj.myschema1_myTbl3_log_1"
     Column     |            Type             |                         Modifiers                          
----------------+-----------------------------+------------------------------------------------------------
 col31          | integer                     | 
 col32          | timestamp without time zone | 
 col33          | numeric(12,2)               | 
 emaj_verb      | character varying(3)        | 
 emaj_tuple     | character varying(3)        | 
 emaj_gid       | bigint                      | not null default nextval('emaj.emaj_global_seq'::regclass)
 emaj_changed   | timestamp with time zone    | default clock_timestamp()
 emaj_txid      | bigint                      | default txid_current()
 emaj_user      | character varying(32)       | default "session_user"()
 emaj_user_ip   | inet                        | default inet_client_addr()
 emaj_user_port | integer                     | default inet_client_port()
Indexes:
    "myschema1_myTbl3_log_idx_1" UNIQUE, btree (emaj_gid, emaj_tuple) CLUSTER, tablespace "tspemaj"
Tablespace: "tspemaj"

    Index "emaj.myschema1_myTbl3_log_idx_1"
   Column   |         Type         | Definition 
------------+----------------------+------------
 emaj_gid   | bigint               | emaj_gid
 emaj_tuple | character varying(3) | emaj_tuple
unique, btree, for table "emaj.myschema1_myTbl3_log_1", clustered
Tablespace: "tspemaj"

                                   Table "emaj.myschema1_mytbl1_log"
     Column     |           Type           |                         Modifiers                          
----------------+--------------------------+------------------------------------------------------------
 col11          | numeric(7,0)             | 
 col12          | character(10)            | 
 col13          | bytea                    | 
 emaj_verb      | character varying(3)     | 
 emaj_tuple     | character varying(3)     | 
 emaj_gid       | bigint                   | not null default nextval('emaj.emaj_global_seq'::regclass)
 emaj_changed   | timestamp with time zone | default clock_timestamp()
 emaj_txid      | bigint                   | default txid_current()
 emaj_user      | character varying(32)    | default "session_user"()
 emaj_user_ip   | inet                     | default inet_client_addr()
 emaj_user_port | integer                  | default inet_client_port()
Indexes:
    "myschema1_mytbl1_log_idx" UNIQUE, btree (emaj_gid, emaj_tuple) CLUSTER, tablespace "tspemaj"
Tablespace: "tspemaj"

     Index "emaj.myschema1_mytbl1_log_idx"
   Column   |         Type         | Definition 
------------+----------------------+------------
 emaj_gid   | bigint               | emaj_gid
 emaj_tuple | character varying(3) | emaj_tuple
unique, btree, for table "emaj.myschema1_mytbl1_log", clustered
Tablespace: "tspemaj"

      Sequence "emaj.myschema1_mytbl1_log_seq"
    Column     |  Type   |          Value           
---------------+---------+--------------------------
 sequence_name | name    | myschema1_mytbl1_log_seq
 last_value    | bigint  | 24
 start_value   | bigint  | 1
 increment_by  | bigint  | 1
 max_value     | bigint  | 9223372036854775807
 min_value     | bigint  | 1
 cache_value   | bigint  | 1
 log_cnt       | bigint  | 9
 is_cycled     | boolean | f
 is_called     | boolean | t

                                   Table "emaj.myschema1_mytbl2_log"
     Column     |           Type           |                         Modifiers                          
----------------+--------------------------+------------------------------------------------------------
 col21          | integer                  | 
 col22          | text                     | 
 col23          | date                     | 
 emaj_verb      | character varying(3)     | 
 emaj_tuple     | character varying(3)     | 
 emaj_gid       | bigint                   | not null default nextval('emaj.emaj_global_seq'::regclass)
 emaj_changed   | timestamp with time zone | default clock_timestamp()
 emaj_txid      | bigint                   | default txid_current()
 emaj_user      | character varying(32)    | default "session_user"()
 emaj_user_ip   | inet                     | default inet_client_addr()
 emaj_user_port | integer                  | default inet_client_port()
Indexes:
    "myschema1_mytbl2_log_idx" UNIQUE, btree (emaj_gid, emaj_tuple) CLUSTER, tablespace "tspemaj"
Tablespace: "tspemaj"

     Index "emaj.myschema1_mytbl2_log_idx"
   Column   |         Type         | Definition 
------------+----------------------+------------
 emaj_gid   | bigint               | emaj_gid
 emaj_tuple | character varying(3) | emaj_tuple
unique, btree, for table "emaj.myschema1_mytbl2_log", clustered
Tablespace: "tspemaj"

      Sequence "emaj.myschema1_mytbl2_log_seq"
    Column     |  Type   |          Value           
---------------+---------+--------------------------
 sequence_name | name    | myschema1_mytbl2_log_seq
 last_value    | bigint  | 3
 start_value   | bigint  | 1
 increment_by  | bigint  | 1
 max_value     | bigint  | 9223372036854775807
 min_value     | bigint  | 1
 cache_value   | bigint  | 1
 log_cnt       | bigint  | 30
 is_cycled     | boolean | f
 is_called     | boolean | t

                                   Table "emaj.myschema1_mytbl4_log"
     Column     |           Type           |                         Modifiers                          
----------------+--------------------------+------------------------------------------------------------
 col41          | integer                  | 
 col42          | text                     | 
 col43          | integer                  | 
 col44          | numeric(7,0)             | 
 col45          | character(10)            | 
 emaj_verb      | character varying(3)     | 
 emaj_tuple     | character varying(3)     | 
 emaj_gid       | bigint                   | not null default nextval('emaj.emaj_global_seq'::regclass)
 emaj_changed   | timestamp with time zone | default clock_timestamp()
 emaj_txid      | bigint                   | default txid_current()
 emaj_user      | character varying(32)    | default "session_user"()
 emaj_user_ip   | inet                     | default inet_client_addr()
 emaj_user_port | integer                  | default inet_client_port()
Indexes:
    "myschema1_mytbl4_log_idx" UNIQUE, btree (emaj_gid, emaj_tuple) CLUSTER, tablespace "tspemaj"
Tablespace: "tspemaj"

     Index "emaj.myschema1_mytbl4_log_idx"
   Column   |         Type         | Definition 
------------+----------------------+------------
 emaj_gid   | bigint               | emaj_gid
 emaj_tuple | character varying(3) | emaj_tuple
unique, btree, for table "emaj.myschema1_mytbl4_log", clustered
Tablespace: "tspemaj"

      Sequence "emaj.myschema1_mytbl4_log_seq"
    Column     |  Type   |          Value           
---------------+---------+--------------------------
 sequence_name | name    | myschema1_mytbl4_log_seq
 last_value    | bigint  | 9
 start_value   | bigint  | 1
 increment_by  | bigint  | 1
 max_value     | bigint  | 9223372036854775807
 min_value     | bigint  | 1
 cache_value   | bigint  | 1
 log_cnt       | bigint  | 24
 is_cycled     | boolean | f
 is_called     | boolean | t

                                     Table "emaj.myschema2_myTbl3_log"
     Column     |            Type             |                         Modifiers                          
----------------+-----------------------------+------------------------------------------------------------
 col31          | integer                     | 
 col32          | timestamp without time zone | 
 col33          | numeric(12,2)               | 
 emaj_verb      | character varying(3)        | 
 emaj_tuple     | character varying(3)        | 
 emaj_gid       | bigint                      | not null default nextval('emaj.emaj_global_seq'::regclass)
 emaj_changed   | timestamp with time zone    | default clock_timestamp()
 emaj_txid      | bigint                      | default txid_current()
 emaj_user      | character varying(32)       | default "session_user"()
 emaj_user_ip   | inet                        | default inet_client_addr()
 emaj_user_port | integer                     | default inet_client_port()
Indexes:
    "myschema2_myTbl3_log_idx" UNIQUE, btree (emaj_gid, emaj_tuple) CLUSTER, tablespace "tspemaj"
Tablespace: "tspemaj"

     Index "emaj.myschema2_myTbl3_log_idx"
   Column   |         Type         | Definition 
------------+----------------------+------------
 emaj_gid   | bigint               | emaj_gid
 emaj_tuple | character varying(3) | emaj_tuple
unique, btree, for table "emaj.myschema2_myTbl3_log", clustered
Tablespace: "tspemaj"

      Sequence "emaj.myschema2_myTbl3_log_seq"
    Column     |  Type   |          Value           
---------------+---------+--------------------------
 sequence_name | name    | myschema2_myTbl3_log_seq
 last_value    | bigint  | 10
 start_value   | bigint  | 1
 increment_by  | bigint  | 1
 max_value     | bigint  | 9223372036854775807
 min_value     | bigint  | 1
 cache_value   | bigint  | 1
 log_cnt       | bigint  | 23
 is_cycled     | boolean | f
 is_called     | boolean | t

                                   Table "emaj.myschema2_mytbl1_log"
     Column     |           Type           |                         Modifiers                          
----------------+--------------------------+------------------------------------------------------------
 col11          | numeric(7,0)             | 
 col12          | character(10)            | 
 col13          | bytea                    | 
 emaj_verb      | character varying(3)     | 
 emaj_tuple     | character varying(3)     | 
 emaj_gid       | bigint                   | not null default nextval('emaj.emaj_global_seq'::regclass)
 emaj_changed   | timestamp with time zone | default clock_timestamp()
 emaj_txid      | bigint                   | default txid_current()
 emaj_user      | character varying(32)    | default "session_user"()
 emaj_user_ip   | inet                     | default inet_client_addr()
 emaj_user_port | integer                  | default inet_client_port()
Indexes:
    "myschema2_mytbl1_log_idx" UNIQUE, btree (emaj_gid, emaj_tuple) CLUSTER, tablespace "tspemaj"
Tablespace: "tspemaj"

     Index "emaj.myschema2_mytbl1_log_idx"
   Column   |         Type         | Definition 
------------+----------------------+------------
 emaj_gid   | bigint               | emaj_gid
 emaj_tuple | character varying(3) | emaj_tuple
unique, btree, for table "emaj.myschema2_mytbl1_log", clustered
Tablespace: "tspemaj"

      Sequence "emaj.myschema2_mytbl1_log_seq"
    Column     |  Type   |          Value           
---------------+---------+--------------------------
 sequence_name | name    | myschema2_mytbl1_log_seq
 last_value    | bigint  | 15
 start_value   | bigint  | 1
 increment_by  | bigint  | 1
 max_value     | bigint  | 9223372036854775807
 min_value     | bigint  | 1
 cache_value   | bigint  | 1
 log_cnt       | bigint  | 18
 is_cycled     | boolean | f
 is_called     | boolean | t

                                   Table "emaj.myschema2_mytbl2_log"
     Column     |           Type           |                         Modifiers                          
----------------+--------------------------+------------------------------------------------------------
 col21          | integer                  | 
 col22          | text                     | 
 col23          | date                     | 
 emaj_verb      | character varying(3)     | 
 emaj_tuple     | character varying(3)     | 
 emaj_gid       | bigint                   | not null default nextval('emaj.emaj_global_seq'::regclass)
 emaj_changed   | timestamp with time zone | default clock_timestamp()
 emaj_txid      | bigint                   | default txid_current()
 emaj_user      | character varying(32)    | default "session_user"()
 emaj_user_ip   | inet                     | default inet_client_addr()
 emaj_user_port | integer                  | default inet_client_port()
Indexes:
    "myschema2_mytbl2_log_idx" UNIQUE, btree (emaj_gid, emaj_tuple) CLUSTER, tablespace "tspemaj"
Tablespace: "tspemaj"

     Index "emaj.myschema2_mytbl2_log_idx"
   Column   |         Type         | Definition 
------------+----------------------+------------
 emaj_gid   | bigint               | emaj_gid
 emaj_tuple | character varying(3) | emaj_tuple
unique, btree, for table "emaj.myschema2_mytbl2_log", clustered
Tablespace: "tspemaj"

      Sequence "emaj.myschema2_mytbl2_log_seq"
    Column     |  Type   |          Value           
---------------+---------+--------------------------
 sequence_name | name    | myschema2_mytbl2_log_seq
 last_value    | bigint  | 2
 start_value   | bigint  | 1
 increment_by  | bigint  | 1
 max_value     | bigint  | 9223372036854775807
 min_value     | bigint  | 1
 cache_value   | bigint  | 1
 log_cnt       | bigint  | 31
 is_cycled     | boolean | f
 is_called     | boolean | t

                                   Table "emaj.myschema2_mytbl4_log"
     Column     |           Type           |                         Modifiers                          
----------------+--------------------------+------------------------------------------------------------
 col41          | integer                  | 
 col42          | text                     | 
 col43          | integer                  | 
 col44          | numeric(7,0)             | 
 col45          | character(10)            | 
 emaj_verb      | character varying(3)     | 
 emaj_tuple     | character varying(3)     | 
 emaj_gid       | bigint                   | not null default nextval('emaj.emaj_global_seq'::regclass)
 emaj_changed   | timestamp with time zone | default clock_timestamp()
 emaj_txid      | bigint                   | default txid_current()
 emaj_user      | character varying(32)    | default "session_user"()
 emaj_user_ip   | inet                     | default inet_client_addr()
 emaj_user_port | integer                  | default inet_client_port()
Indexes:
    "myschema2_mytbl4_log_idx" UNIQUE, btree (emaj_gid, emaj_tuple) CLUSTER, tablespace "tspemaj"
Tablespace: "tspemaj"

     Index "emaj.myschema2_mytbl4_log_idx"
   Column   |         Type         | Definition 
------------+----------------------+------------
 emaj_gid   | bigint               | emaj_gid
 emaj_tuple | character varying(3) | emaj_tuple
unique, btree, for table "emaj.myschema2_mytbl4_log", clustered
Tablespace: "tspemaj"

      Sequence "emaj.myschema2_mytbl4_log_seq"
    Column     |  Type   |          Value           
---------------+---------+--------------------------
 sequence_name | name    | myschema2_mytbl4_log_seq
 last_value    | bigint  | 8
 start_value   | bigint  | 1
 increment_by  | bigint  | 1
 max_value     | bigint  | 9223372036854775807
 min_value     | bigint  | 1
 cache_value   | bigint  | 1
 log_cnt       | bigint  | 25
 is_cycled     | boolean | f
 is_called     | boolean | t

                                Table "emaj.phil's schema3_myTbl2\_log"
     Column     |           Type           |                         Modifiers                          
----------------+--------------------------+------------------------------------------------------------
 col21          | integer                  | 
 col22          | text                     | 
 col23          | date                     | 
 emaj_verb      | character varying(3)     | 
 emaj_tuple     | character varying(3)     | 
 emaj_gid       | bigint                   | not null default nextval('emaj.emaj_global_seq'::regclass)
 emaj_changed   | timestamp with time zone | default clock_timestamp()
 emaj_txid      | bigint                   | default txid_current()
 emaj_user      | character varying(32)    | default "session_user"()
 emaj_user_ip   | inet                     | default inet_client_addr()
 emaj_user_port | integer                  | default inet_client_port()
Indexes:
    "phil's schema3_myTbl2\_log_idx" UNIQUE, btree (emaj_gid, emaj_tuple) CLUSTER, tablespace "tspemaj"
Tablespace: "tspemaj"

  Index "emaj.phil's schema3_myTbl2\_log_idx"
   Column   |         Type         | Definition 
------------+----------------------+------------
 emaj_gid   | bigint               | emaj_gid
 emaj_tuple | character varying(3) | emaj_tuple
unique, btree, for table "emaj.phil's schema3_myTbl2\_log", clustered
Tablespace: "tspemaj"

      Sequence "emaj.phil's schema3_myTbl2\_log_seq"
    Column     |  Type   |             Value              
---------------+---------+--------------------------------
 sequence_name | name    | phil's schema3_myTbl2\_log_seq
 last_value    | bigint  | 1
 start_value   | bigint  | 1
 increment_by  | bigint  | 1
 max_value     | bigint  | 9223372036854775807
 min_value     | bigint  | 1
 cache_value   | bigint  | 1
 log_cnt       | bigint  | 0
 is_cycled     | boolean | f
 is_called     | boolean | f

                              Table "emaj.phil's schema3_phil's tbl1_log"
     Column     |           Type           |                         Modifiers                          
----------------+--------------------------+------------------------------------------------------------
 phil's col11   | numeric(7,0)             | 
 phil's col12   | character(10)            | 
 phil\s col13   | bytea                    | 
 emaj_verb      | character varying(3)     | 
 emaj_tuple     | character varying(3)     | 
 emaj_gid       | bigint                   | not null default nextval('emaj.emaj_global_seq'::regclass)
 emaj_changed   | timestamp with time zone | default clock_timestamp()
 emaj_txid      | bigint                   | default txid_current()
 emaj_user      | character varying(32)    | default "session_user"()
 emaj_user_ip   | inet                     | default inet_client_addr()
 emaj_user_port | integer                  | default inet_client_port()
Indexes:
    "phil's schema3_phil's tbl1_log_idx" UNIQUE, btree (emaj_gid, emaj_tuple) CLUSTER, tablespace "tspemaj"
Tablespace: "tspemaj"

Index "emaj.phil's schema3_phil's tbl1_log_idx"
   Column   |         Type         | Definition 
------------+----------------------+------------
 emaj_gid   | bigint               | emaj_gid
 emaj_tuple | character varying(3) | emaj_tuple
unique, btree, for table "emaj.phil's schema3_phil's tbl1_log", clustered
Tablespace: "tspemaj"

      Sequence "emaj.phil's schema3_phil's tbl1_log_seq"
    Column     |  Type   |               Value                
---------------+---------+------------------------------------
 sequence_name | name    | phil's schema3_phil's tbl1_log_seq
 last_value    | bigint  | 1
 start_value   | bigint  | 1
 increment_by  | bigint  | 1
 max_value     | bigint  | 9223372036854775807
 min_value     | bigint  | 1
 cache_value   | bigint  | 1
 log_cnt       | bigint  | 0
 is_cycled     | boolean | f
 is_called     | boolean | f

\d emajb.*
                                  Table "emajb.myschema1_mytbl2b_log"
     Column     |           Type           |                         Modifiers                          
----------------+--------------------------+------------------------------------------------------------
 col20          | integer                  | 
 col21          | integer                  | 
 emaj_verb      | character varying(3)     | 
 emaj_tuple     | character varying(3)     | 
 emaj_gid       | bigint                   | not null default nextval('emaj.emaj_global_seq'::regclass)
 emaj_changed   | timestamp with time zone | default clock_timestamp()
 emaj_txid      | bigint                   | default txid_current()
 emaj_user      | character varying(32)    | default "session_user"()
 emaj_user_ip   | inet                     | default inet_client_addr()
 emaj_user_port | integer                  | default inet_client_port()
Indexes:
    "myschema1_mytbl2b_log_idx" UNIQUE, btree (emaj_gid, emaj_tuple) CLUSTER, tablespace "tspemaj"
Tablespace: "tspemaj"

    Index "emajb.myschema1_mytbl2b_log_idx"
   Column   |         Type         | Definition 
------------+----------------------+------------
 emaj_gid   | bigint               | emaj_gid
 emaj_tuple | character varying(3) | emaj_tuple
unique, btree, for table "emajb.myschema1_mytbl2b_log", clustered
Tablespace: "tspemaj"

     Sequence "emajb.myschema1_mytbl2b_log_seq"
    Column     |  Type   |           Value           
---------------+---------+---------------------------
 sequence_name | name    | myschema1_mytbl2b_log_seq
 last_value    | bigint  | 4
 start_value   | bigint  | 1
 increment_by  | bigint  | 1
 max_value     | bigint  | 9223372036854775807
 min_value     | bigint  | 1
 cache_value   | bigint  | 1
 log_cnt       | bigint  | 29
 is_cycled     | boolean | f
 is_called     | boolean | t

-- check technical sequences position
select * from emaj.emaj_global_seq;
  sequence_name  | last_value | start_value | increment_by |      max_value      | min_value | cache_value | log_cnt | is_cycled | is_called 
-----------------+------------+-------------+--------------+---------------------+-----------+-------------+---------+-----------+-----------
 emaj_global_seq |         85 |           1 |            1 | 9223372036854775807 |         1 |           1 |      14 | f         | t
(1 row)

select * from emaj.emaj_hist_hist_id_seq;
     sequence_name     | last_value | start_value | increment_by |      max_value      | min_value | cache_value | log_cnt | is_cycled | is_called 
-----------------------+------------+-------------+--------------+---------------------+-----------+-------------+---------+-----------+-----------
 emaj_hist_hist_id_seq |        112 |           1 |            1 | 9223372036854775807 |         1 |           1 |      20 | f         | t
(1 row)

select * from emaj.emaj_time_stamp_time_id_seq;
        sequence_name        | last_value | start_value | increment_by |      max_value      | min_value | cache_value | log_cnt | is_cycled | is_called 
-----------------------------+------------+-------------+--------------+---------------------+-----------+-------------+---------+-----------+-----------
 emaj_time_stamp_time_id_seq |         18 |           1 |            1 | 9223372036854775807 |         1 |           1 |      15 | f         | t
(1 row)

select * from emaj.emaj_mark_mark_id_seq;
     sequence_name     | last_value | start_value | increment_by |      max_value      | min_value | cache_value | log_cnt | is_cycled | is_called 
-----------------------+------------+-------------+--------------+---------------------+-----------+-------------+---------+-----------+-----------
 emaj_mark_mark_id_seq |         14 |           1 |            1 | 9223372036854775807 |         1 |           1 |      19 | f         | t
(1 row)

select * from emaj.emaj_rlbk_rlbk_id_seq;
     sequence_name     | last_value | start_value | increment_by |      max_value      | min_value | cache_value | log_cnt | is_cycled | is_called 
-----------------------+------------+-------------+--------------+---------------------+-----------+-------------+---------+-----------+-----------
 emaj_rlbk_rlbk_id_seq |          4 |           1 |            1 | 9223372036854775807 |         1 |           1 |      29 | f         | t
(1 row)

-- check log sequences position
select * from emaj.myschema1_mytbl1_log_seq;
      sequence_name       | last_value | start_value | increment_by |      max_value      | min_value | cache_value | log_cnt | is_cycled | is_called 
--------------------------+------------+-------------+--------------+---------------------+-----------+-------------+---------+-----------+-----------
 myschema1_mytbl1_log_seq |         24 |           1 |            1 | 9223372036854775807 |         1 |           1 |       9 | f         | t
(1 row)

select * from emaj.myschema1_mytbl2_log_seq;
      sequence_name       | last_value | start_value | increment_by |      max_value      | min_value | cache_value | log_cnt | is_cycled | is_called 
--------------------------+------------+-------------+--------------+---------------------+-----------+-------------+---------+-----------+-----------
 myschema1_mytbl2_log_seq |          3 |           1 |            1 | 9223372036854775807 |         1 |           1 |      30 | f         | t
(1 row)

select * from emajb.myschema1_mytbl2b_log_seq;
       sequence_name       | last_value | start_value | increment_by |      max_value      | min_value | cache_value | log_cnt | is_cycled | is_called 
---------------------------+------------+-------------+--------------+---------------------+-----------+-------------+---------+-----------+-----------
 myschema1_mytbl2b_log_seq |          4 |           1 |            1 | 9223372036854775807 |         1 |           1 |      29 | f         | t
(1 row)

select * from emaj.myschema1_mytbl4_log_seq;
      sequence_name       | last_value | start_value | increment_by |      max_value      | min_value | cache_value | log_cnt | is_cycled | is_called 
--------------------------+------------+-------------+--------------+---------------------+-----------+-------------+---------+-----------+-----------
 myschema1_mytbl4_log_seq |          9 |           1 |            1 | 9223372036854775807 |         1 |           1 |      24 | f         | t
(1 row)

select * from emaj.myschema2_mytbl1_log_seq;
      sequence_name       | last_value | start_value | increment_by |      max_value      | min_value | cache_value | log_cnt | is_cycled | is_called 
--------------------------+------------+-------------+--------------+---------------------+-----------+-------------+---------+-----------+-----------
 myschema2_mytbl1_log_seq |         15 |           1 |            1 | 9223372036854775807 |         1 |           1 |      18 | f         | t
(1 row)

select * from emaj.myschema2_mytbl2_log_seq;
      sequence_name       | last_value | start_value | increment_by |      max_value      | min_value | cache_value | log_cnt | is_cycled | is_called 
--------------------------+------------+-------------+--------------+---------------------+-----------+-------------+---------+-----------+-----------
 myschema2_mytbl2_log_seq |          2 |           1 |            1 | 9223372036854775807 |         1 |           1 |      31 | f         | t
(1 row)

select * from emaj."myschema2_myTbl3_log_seq";
      sequence_name       | last_value | start_value | increment_by |      max_value      | min_value | cache_value | log_cnt | is_cycled | is_called 
--------------------------+------------+-------------+--------------+---------------------+-----------+-------------+---------+-----------+-----------
 myschema2_myTbl3_log_seq |         10 |           1 |            1 | 9223372036854775807 |         1 |           1 |      23 | f         | t
(1 row)

select * from emaj.myschema2_mytbl4_log_seq;
      sequence_name       | last_value | start_value | increment_by |      max_value      | min_value | cache_value | log_cnt | is_cycled | is_called 
--------------------------+------------+-------------+--------------+---------------------+-----------+-------------+---------+-----------+-----------
 myschema2_mytbl4_log_seq |          8 |           1 |            1 | 9223372036854775807 |         1 |           1 |      25 | f         | t
(1 row)

select * from emaj."phil's schema3_phil's tbl1_log_seq";
           sequence_name            | last_value | start_value | increment_by |      max_value      | min_value | cache_value | log_cnt | is_cycled | is_called 
------------------------------------+------------+-------------+--------------+---------------------+-----------+-------------+---------+-----------+-----------
 phil's schema3_phil's tbl1_log_seq |          1 |           1 |            1 | 9223372036854775807 |         1 |           1 |       0 | f         | f
(1 row)

select * from emaj."phil's schema3_myTbl2\_log_seq";
         sequence_name          | last_value | start_value | increment_by |      max_value      | min_value | cache_value | log_cnt | is_cycled | is_called 
--------------------------------+------------+-------------+--------------+---------------------+-----------+-------------+---------+-----------+-----------
 phil's schema3_myTbl2\_log_seq |          1 |           1 |            1 | 9223372036854775807 |         1 |           1 |       0 | f         | f
(1 row)

-----------------------------
-- Check the tables and sequences after upgrade
-----------------------------
-- emaj tables and sequences
-- technical tables
select sch_name from emaj.emaj_schema order by 1;
 sch_name 
----------
 emaj
 emajb
(2 rows)

select * from emaj.emaj_relation order by 1,2 ;
   rel_schema   |    rel_tblseq    | rel_time_range |    rel_group     | rel_kind | rel_priority | rel_log_schema |         rel_log_table          | rel_log_dat_tsp |           rel_log_index            | rel_log_idx_tsp |          rel_log_sequence          |          rel_log_function           |                     rel_sql_columns                      |      rel_sql_pk_columns       |                               rel_sql_pk_eq_conditions                                
----------------+------------------+----------------+------------------+----------+--------------+----------------+--------------------------------+-----------------+------------------------------------+-----------------+------------------------------------+-------------------------------------+----------------------------------------------------------+-------------------------------+---------------------------------------------------------------------------------------
 myschema1      | mytbl1           | [1,)           | myGroup1         | r        |           20 | emaj           | myschema1_mytbl1_log           |                 | myschema1_mytbl1_log_idx           |                 | myschema1_mytbl1_log_seq           | myschema1_mytbl1_log_fnct           | tbl.col11,tbl.col12,tbl.col13                            | col11,col12                   | tbl.col11 = keys.col11 AND tbl.col12 = keys.col12
 myschema1      | mytbl2           | [1,)           | myGroup1         | r        |              | emaj           | myschema1_mytbl2_log           |                 | myschema1_mytbl2_log_idx           |                 | myschema1_mytbl2_log_seq           | myschema1_mytbl2_log_fnct           | tbl.col21,tbl.col22,tbl.col23                            | col21                         | tbl.col21 = keys.col21
 myschema1      | mytbl2b          | [1,)           | myGroup1         | r        |              | emajb          | myschema1_mytbl2b_log          |                 | myschema1_mytbl2b_log_idx          |                 | myschema1_mytbl2b_log_seq          | myschema1_mytbl2b_log_fnct          | tbl.col20,tbl.col21                                      | col20                         | tbl.col20 = keys.col20
 myschema1      | myTbl3           | [1,18)         | myGroup1         | r        |           10 | emaj           | myschema1_myTbl3_log_1         |                 | myschema1_myTbl3_log_idx_1         |                 | myschema1_myTbl3_log_seq           |                                     |                                                          |                               | 
 myschema1      | myTbl3_col31_seq | [1,)           | myGroup1         | S        |            1 |                |                                |                 |                                    |                 |                                    |                                     |                                                          |                               | 
 myschema1      | mytbl4           | [1,)           | myGroup1         | r        |           20 | emaj           | myschema1_mytbl4_log           |                 | myschema1_mytbl4_log_idx           |                 | myschema1_mytbl4_log_seq           | myschema1_mytbl4_log_fnct           | tbl.col41,tbl.col42,tbl.col43,tbl.col44,tbl.col45        | col41                         | tbl.col41 = keys.col41
 myschema2      | myseq1           | [2,)           | myGroup2         | S        |              |                |                                |                 |                                    |                 |                                    |                                     |                                                          |                               | 
 myschema2      | mytbl1           | [2,)           | myGroup2         | r        |              | emaj           | myschema2_mytbl1_log           |                 | myschema2_mytbl1_log_idx           |                 | myschema2_mytbl1_log_seq           | myschema2_mytbl1_log_fnct           | tbl.col11,tbl.col12,tbl.col13                            | col11,col12                   | tbl.col11 = keys.col11 AND tbl.col12 = keys.col12
 myschema2      | mytbl2           | [2,)           | myGroup2         | r        |              | emaj           | myschema2_mytbl2_log           |                 | myschema2_mytbl2_log_idx           |                 | myschema2_mytbl2_log_seq           | myschema2_mytbl2_log_fnct           | tbl.col21,tbl.col22,tbl.col23                            | col21                         | tbl.col21 = keys.col21
 myschema2      | myTbl3           | [2,)           | myGroup2         | r        |              | emaj           | myschema2_myTbl3_log           |                 | myschema2_myTbl3_log_idx           |                 | myschema2_myTbl3_log_seq           | myschema2_myTbl3_log_fnct           | tbl.col31,tbl.col32,tbl.col33                            | col31                         | tbl.col31 = keys.col31
 myschema2      | myTbl3_col31_seq | [2,)           | myGroup2         | S        |              |                |                                |                 |                                    |                 |                                    |                                     |                                                          |                               | 
 myschema2      | mytbl4           | [2,)           | myGroup2         | r        |              | emaj           | myschema2_mytbl4_log           |                 | myschema2_mytbl4_log_idx           |                 | myschema2_mytbl4_log_seq           | myschema2_mytbl4_log_fnct           | tbl.col41,tbl.col42,tbl.col43,tbl.col44,tbl.col45        | col41                         | tbl.col41 = keys.col41
 phil's schema3 | myTbl2\          | [3,)           | phil's group#3", | r        |              | emaj           | phil's schema3_myTbl2\_log     |                 | phil's schema3_myTbl2\_log_idx     |                 | phil's schema3_myTbl2\_log_seq     | phil's schema3_myTbl2\_log_fnct     | tbl.col21,tbl.col22,tbl.col23                            |                               | 
 phil's schema3 | phil's seq\1     | [3,)           | phil's group#3", | S        |              |                |                                |                 |                                    |                 |                                    |                                     |                                                          |                               | 
 phil's schema3 | phil's tbl1      | [3,)           | phil's group#3", | r        |              | emaj           | phil's schema3_phil's tbl1_log |                 | phil's schema3_phil's tbl1_log_idx |                 | phil's schema3_phil's tbl1_log_seq | phil's schema3_phil's tbl1_log_fnct | tbl."phil's col11",tbl."phil's col12",tbl."phil\s col13" | "phil's col11","phil's col12" | tbl."phil's col11" = keys."phil's col11" AND tbl."phil's col12" = keys."phil's col12"
(15 rows)

select rlbk_messages from emaj.emaj_rlbk order by rlbk_id;
                                  rlbk_messages                                   
----------------------------------------------------------------------------------
 {"Notice: 1 / 5 tables effectively processed.","Notice: 1 sequences processed."}
 {"Notice: 3 / 5 tables effectively processed.","Notice: 1 sequences processed."}
 {"Notice: 1 / 4 tables effectively processed.","Notice: 2 sequences processed."}
 {"Notice: 1 / 4 tables effectively processed.","Notice: 2 sequences processed."}
(4 rows)

-- log tables
select col11, col12, col13, emaj_verb, emaj_tuple, emaj_gid from emaj.mySchema1_myTbl1_log order by emaj_gid, emaj_tuple desc;
 col11 |   col12    | col13 | emaj_verb | emaj_tuple | emaj_gid 
-------+------------+-------+-----------+------------+----------
     1 | ABC        | \x0c  | INS       | NEW        |        1
     2 | ABC        | \x0c  | INS       | NEW        |        2
     3 | ABC        | \x0c  | INS       | NEW        |        3
     4 | ABC        | \x0c  | INS       | NEW        |        4
     5 | ABC        | \x0c  | INS       | NEW        |        5
     6 | ABC        | \x0c  | INS       | NEW        |        6
     7 | ABC        | \x0c  | INS       | NEW        |        7
     8 | ABC        | \x0c  | INS       | NEW        |        8
     9 | ABC        | \x0c  | INS       | NEW        |        9
    10 | ABC        | \x0c  | INS       | NEW        |       10
    11 | ABC        | \x0c  | INS       | NEW        |       11
     1 | ABC        | \x0c  | UPD       | OLD        |       12
     1 | ABC        | \x1c  | UPD       | NEW        |       12
     2 | ABC        | \x0c  | UPD       | OLD        |       13
     2 | ABC        | \x1c  | UPD       | NEW        |       13
     3 | ABC        | \x0c  | UPD       | OLD        |       14
     3 | ABC        | \x1c  | UPD       | NEW        |       14
    11 | ABC        | \x0c  | DEL       | OLD        |       17
    10 | ABC        | \x0c  | DEL       | OLD        |       35
     1 | ABC        | \x1c  | UPD       | OLD        |       37
     1 | DEF        | \x1c  | UPD       | NEW        |       37
     2 | ABC        | \x1c  | UPD       | OLD        |       38
     2 | DEF        | \x1c  | UPD       | NEW        |       38
(23 rows)

select col21, col22, col23, emaj_verb, emaj_tuple, emaj_gid from emaj.mySchema1_myTbl2_log order by emaj_gid, emaj_tuple desc;
 col21 | col22 |   col23    | emaj_verb | emaj_tuple | emaj_gid 
-------+-------+------------+-----------+------------+----------
     1 | ABC   | 12-31-2010 | INS       | NEW        |       15
     2 | DEF   |            | INS       | NEW        |       18
(2 rows)

select col20, col21, emaj_verb, emaj_tuple, emaj_gid from emajb.mySchema1_myTbl2b_log order by emaj_gid, emaj_tuple desc;
 col20 | col21 | emaj_verb | emaj_tuple | emaj_gid 
-------+-------+-----------+------------+----------
     1 |     1 | INS       | NEW        |       16
     2 |     2 | INS       | NEW        |       19
(2 rows)

select col31, col33, emaj_verb, emaj_tuple, emaj_gid from emaj."myschema1_myTbl3_log_1" order by emaj_gid, emaj_tuple desc;
 col31 | col33 | emaj_verb | emaj_tuple | emaj_gid 
-------+-------+-----------+------------+----------
     1 | 10.00 | INS       | NEW        |       20
     2 | 10.00 | INS       | NEW        |       21
     3 | 10.00 | INS       | NEW        |       22
     4 | 10.00 | INS       | NEW        |       23
     5 | 10.00 | INS       | NEW        |       24
     6 | 10.00 | INS       | NEW        |       25
     7 | 10.00 | INS       | NEW        |       26
     8 | 10.00 | INS       | NEW        |       27
     9 | 10.00 | INS       | NEW        |       28
    10 | 10.00 | INS       | NEW        |       29
(10 rows)

select col41, col42, col43, col44, col45, emaj_verb, emaj_tuple, emaj_gid from emaj.mySchema1_myTbl4_log order by emaj_gid, emaj_tuple desc;
 col41 | col42 | col43 | col44 |   col45    | emaj_verb | emaj_tuple | emaj_gid 
-------+-------+-------+-------+------------+-----------+------------+----------
     1 | FK... |     1 |     1 | ABC        | INS       | NEW        |       30
     2 | FK... |     1 |     1 | ABC        | INS       | NEW        |       31
     1 | FK... |     1 |     1 | ABC        | UPD       | OLD        |       32
     1 | FK... |     2 |     1 | ABC        | UPD       | NEW        |       32
     2 | FK... |     1 |     1 | ABC        | UPD       | OLD        |       33
     2 | FK... |     2 |     1 | ABC        | UPD       | NEW        |       33
     3 | FK... |     1 |    10 | ABC        | INS       | NEW        |       34
     3 | FK... |     1 |    10 | ABC        | DEL       | OLD        |       36
     1 | FK... |     2 |     1 | ABC        | UPD       | OLD        |       39
     1 | FK... |     2 |       |            | UPD       | NEW        |       39
     2 | FK... |     2 |     1 | ABC        | UPD       | OLD        |       40
     2 | FK... |     2 |       |            | UPD       | NEW        |       40
(12 rows)

--
select col11, col12, col13, emaj_verb, emaj_tuple, emaj_gid from emaj.mySchema2_myTbl1_log order by emaj_gid, emaj_tuple desc;
 col11 |   col12    | col13 | emaj_verb | emaj_tuple | emaj_gid 
-------+------------+-------+-----------+------------+----------
     1 | ABC        | \x0c  | INS       | NEW        |       51
     2 | ABC        | \x0c  | INS       | NEW        |       52
     3 | ABC        | \x0c  | INS       | NEW        |       53
     4 | ABC        | \x0c  | INS       | NEW        |       54
     5 | ABC        | \x0c  | INS       | NEW        |       55
     6 | ABC        | \x0c  | INS       | NEW        |       56
     7 | ABC        | \x0c  | INS       | NEW        |       57
     8 | ABC        | \x0c  | INS       | NEW        |       58
     9 | ABC        | \x0c  | INS       | NEW        |       59
    10 | ABC        | \x0c  | INS       | NEW        |       60
    11 | ABC        | \x0c  | INS       | NEW        |       61
     1 | ABC        | \x0c  | UPD       | OLD        |       62
     1 | ABC        | \x1c  | UPD       | NEW        |       62
     2 | ABC        | \x0c  | UPD       | OLD        |       63
     2 | ABC        | \x1c  | UPD       | NEW        |       63
     3 | ABC        | \x0c  | UPD       | OLD        |       64
     3 | ABC        | \x1c  | UPD       | NEW        |       64
    11 | ABC        | \x0c  | DEL       | OLD        |       66
(18 rows)

select col21, col22, col23, emaj_verb, emaj_tuple, emaj_gid from emaj.mySchema2_myTbl2_log order by emaj_gid, emaj_tuple desc;
 col21 | col22 |   col23    | emaj_verb | emaj_tuple | emaj_gid 
-------+-------+------------+-----------+------------+----------
     1 | ABC   | 01-01-2010 | INS       | NEW        |       65
     2 | DEF   |            | INS       | NEW        |       67
(2 rows)

select col31, col33, emaj_verb, emaj_tuple, emaj_gid from emaj."myschema2_myTbl3_log" order by emaj_gid, emaj_tuple desc;
 col31 | col33 | emaj_verb | emaj_tuple | emaj_gid 
-------+-------+-----------+------------+----------
     1 | 10.00 | INS       | NEW        |       68
     2 | 10.00 | INS       | NEW        |       69
     3 | 10.00 | INS       | NEW        |       70
     4 | 10.00 | INS       | NEW        |       71
     5 | 10.00 | INS       | NEW        |       72
     6 | 10.00 | INS       | NEW        |       73
     7 | 10.00 | INS       | NEW        |       74
     8 | 10.00 | INS       | NEW        |       75
     9 | 10.00 | INS       | NEW        |       76
    10 | 10.00 | INS       | NEW        |       77
(10 rows)

select col41, col42, col43, col44, col45, emaj_verb, emaj_tuple, emaj_gid from emaj.mySchema2_myTbl4_log order by emaj_gid, emaj_tuple desc;
 col41 | col42 | col43 | col44 |   col45    | emaj_verb | emaj_tuple | emaj_gid 
-------+-------+-------+-------+------------+-----------+------------+----------
     1 | FK... |     1 |     1 | ABC        | INS       | NEW        |       78
     2 | FK... |     1 |     1 | ABC        | INS       | NEW        |       79
     1 | FK... |     1 |     1 | ABC        | UPD       | OLD        |       80
     1 | FK... |     2 |     1 | ABC        | UPD       | NEW        |       80
     2 | FK... |     1 |     1 | ABC        | UPD       | OLD        |       81
     2 | FK... |     2 |     1 | ABC        | UPD       | NEW        |       81
     1 | FK... |     2 |     1 | ABC        | DEL       | OLD        |       82
     2 | FK... |     2 |     1 | ABC        | DEL       | OLD        |       83
     1 | FK... |     2 |     1 | ABC        | INS       | NEW        |       84
     2 | FK... |     2 |     1 | ABC        | INS       | NEW        |       85
(10 rows)

