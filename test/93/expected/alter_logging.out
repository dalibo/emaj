-- alterLogging.sql : test emaj_alter_group() and emaj_alter_groups() functions with groups in LOGGING state
--
-- It follows alter.sql that tests the same functions but with groups in IDLE state.
-- It uses the same tables and groups, and the same sequences range
-- It includes the final checks for both alter.sql and alterLogging.sql scenarios
select emaj.emaj_start_groups('{"myGroup1","myGroup2"}','Mk1');
WARNING:  _check_fk_groups: The foreign key "mytbl6_col61_fkey" on the table "myschema2.mytbl6" references the table "myschema2.mytbl7" that is outside the groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._start_groups(text[],text,boolean,boolean) line 25 at PERFORM
PL/pgSQL function emaj.emaj_start_groups(text[],text,boolean) line 11 at RETURN
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._start_groups(text[],text,boolean,boolean) line 25 at PERFORM
PL/pgSQL function emaj.emaj_start_groups(text[],text,boolean) line 11 at RETURN
 emaj_start_groups 
-------------------
                15
(1 row)

-----------------------------
-- change attributes in emaj_group_def
-----------------------------
-- change the priority
update emaj.emaj_group_def set grpdef_priority = 30 where grpdef_schema = 'myschema1' and grpdef_tblseq = 'mytbl1';
select emaj.emaj_alter_group('myGroup1','Priority Changed');
 emaj_alter_group 
------------------
                7
(1 row)

-- change the emaj names prefix, the log schema, the log data tablespace and the log index tablespace for different tables
update emaj.emaj_group_def set grpdef_log_schema_suffix = NULL where grpdef_schema = 'myschema2' and grpdef_tblseq = 'myTbl3';
update emaj.emaj_group_def set grpdef_emaj_names_prefix = 's1t3' where grpdef_schema = 'myschema1' and grpdef_tblseq = 'myTbl3';
update emaj.emaj_group_def set grpdef_log_dat_tsp = NULL where grpdef_schema = 'myschema1' and grpdef_tblseq = 'mytbl2b';
update emaj.emaj_group_def set grpdef_log_idx_tsp = 'tsplog1' where grpdef_schema = 'myschema2' and grpdef_tblseq = 'mytbl6';
set default_tablespace = tspemaj_renamed;
select emaj.emaj_alter_groups('{"myGroup1","myGroup2"}','Attributes_changed');
WARNING:  _check_fk_groups: The foreign key "mytbl6_col61_fkey" on the table "myschema2.mytbl6" references the table "myschema2.mytbl7" that is outside the groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 56 at PERFORM
PL/pgSQL function emaj.emaj_alter_groups(text[],text) line 6 at RETURN
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 56 at PERFORM
PL/pgSQL function emaj.emaj_alter_groups(text[],text) line 6 at RETURN
 emaj_alter_groups 
-------------------
                15
(1 row)

reset default_tablespace;
-- set an intermediate mark
select emaj.emaj_set_mark_groups('{"myGroup1","myGroup2"}','Mk2');
 emaj_set_mark_groups 
----------------------
                   15
(1 row)

-- change the priority back
update emaj.emaj_group_def set grpdef_priority = 20 where grpdef_schema = 'myschema1' and grpdef_tblseq = 'mytbl1';
select emaj.emaj_alter_groups(array['myGroup1','myGroup2']);
WARNING:  _check_fk_groups: The foreign key "mytbl6_col61_fkey" on the table "myschema2.mytbl6" references the table "myschema2.mytbl7" that is outside the groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 56 at PERFORM
PL/pgSQL function emaj.emaj_alter_groups(text[],text) line 6 at RETURN
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 56 at PERFORM
PL/pgSQL function emaj.emaj_alter_groups(text[],text) line 6 at RETURN
 emaj_alter_groups 
-------------------
                15
(1 row)

-- change the other attributes back
update emaj.emaj_group_def set grpdef_log_schema_suffix = 'C' where grpdef_schema = 'myschema2' and grpdef_tblseq = 'myTbl3';
update emaj.emaj_group_def set grpdef_emaj_names_prefix = NULL where grpdef_schema = 'myschema1' and grpdef_tblseq = 'myTbl3';
update emaj.emaj_group_def set grpdef_log_dat_tsp = 'tsp log''2' where grpdef_schema = 'myschema1' and grpdef_tblseq = 'mytbl2b';
update emaj.emaj_group_def set grpdef_log_idx_tsp = NULL where grpdef_schema = 'myschema2' and grpdef_tblseq = 'mytbl6';
select emaj.emaj_alter_groups('{"myGroup1","myGroup2"}');
WARNING:  _check_fk_groups: The foreign key "mytbl6_col61_fkey" on the table "myschema2.mytbl6" references the table "myschema2.mytbl7" that is outside the groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 56 at PERFORM
PL/pgSQL function emaj.emaj_alter_groups(text[],text) line 6 at RETURN
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 56 at PERFORM
PL/pgSQL function emaj.emaj_alter_groups(text[],text) line 6 at RETURN
 emaj_alter_groups 
-------------------
                15
(1 row)

-----------------------------
-- remove sequences
-----------------------------
--TODO: remove the transaction when adding a sequence will be possible and move the rollbacks later
select emaj.emaj_set_mark_group('myGroup1','Mk2b');
 emaj_set_mark_group 
---------------------
                   7
(1 row)

begin;
  select emaj.emaj_set_mark_group('myGroup1','Mk2c');
 emaj_set_mark_group 
---------------------
                   7
(1 row)

  delete from emaj.emaj_group_def where grpdef_schema = 'myschema1' and grpdef_tblseq = 'myTbl3_col31_seq';
  select emaj.emaj_alter_group('myGroup1','Sequence_removed');
 emaj_alter_group 
------------------
                6
(1 row)

  select group_nb_table, group_nb_sequence from emaj.emaj_group where group_name = 'myGroup1';
 group_nb_table | group_nb_sequence 
----------------+-------------------
              5 |                 1
(1 row)

  select * from emaj.emaj_relation where rel_schema = 'myschema1' and rel_tblseq = 'myTbl3_col31_seq';
 rel_schema |    rel_tblseq    | rel_time_range | rel_group | rel_kind | rel_priority | rel_log_schema | rel_log_table | rel_log_dat_tsp | rel_log_index | rel_log_idx_tsp | rel_log_sequence | rel_log_function | rel_sql_columns | rel_sql_pk_columns | rel_sql_pk_eq_conditions | rel_log_seq_last_value 
------------+------------------+----------------+-----------+----------+--------------+----------------+---------------+-----------------+---------------+-----------------+------------------+------------------+-----------------+--------------------+--------------------------+------------------------
 myschema1  | myTbl3_col31_seq | [6041,6058)    | myGroup1  | S        |            1 |                |               |                 |               |                 |                  |                  |                 |                    |                          |                       
(1 row)

  select * from emaj.emaj_verify_all();
  emaj_verify_all  
-------------------
 No error detected
(1 row)

  --testing snap and sql generation
  \! mkdir -p /tmp/emaj_test/alter
  \! rm -Rf /tmp/emaj_test/alter/*
  select emaj.emaj_snap_group('myGroup1','/tmp/emaj_test/alter','');
 emaj_snap_group 
-----------------
               6
(1 row)

  \! ls /tmp/emaj_test/alter
_INFO
myschema1_myTbl3.snap
myschema1_mytbl1.snap
myschema1_mytbl2.snap
myschema1_mytbl2b.snap
myschema1_mytbl2b_col20_seq.snap
myschema1_mytbl4.snap
  \! rm -R /tmp/emaj_test/alter/*
  select emaj.emaj_snap_log_group('myGroup1','Mk1',NULL,'/tmp/emaj_test/alter',NULL);
 emaj_snap_log_group 
---------------------
                   8
(1 row)

-- sequences at begin bound
  \! cat /tmp/emaj_test/alter/myGroup1_sequences_at_Mk1
myschema1	myTbl3_col31_seq	6050	11	1	1	9223372036854775807	1	1	f	f
myschema1	mytbl2b_col20_seq	6050	3	1	1	9223372036854775807	1	1	f	f
-- sequences at end bound
  \! find /tmp/emaj_test/alter/ -regex '.*/myGroup1_sequences_at_[0123456789].*' | xargs cat
myschema1	mytbl2b_col20_seq	6059	3	1	1	9223372036854775807	1	1	f	f
  \! rm -R /tmp/emaj_test/alter/*
  savepoint svp1;
  select emaj.emaj_set_mark_group('myGroup1','After_remove');
 emaj_set_mark_group 
---------------------
                   6
(1 row)

  select emaj.emaj_gen_sql_group('myGroup1', NULL, 'EMAJ_LAST_MARK', '/tmp/emaj_test/alter/myFile',array['myschema1.myTbl3_col31_seq']);
 emaj_gen_sql_group 
--------------------
                  1
(1 row)

  \! grep -v 'generated by E-Maj at' /tmp/emaj_test/alter/myFile
--    for tables group(s): myGroup1
--    processing logs between mark Mk1 and mark After_remove
--    only for the following tables/sequences: myschema1.myTbl3_col31_seq
SET standard_conforming_strings = ON;
BEGIN TRANSACTION;
ALTER SEQUENCE myschema1."myTbl3_col31_seq" RESTART 11 START 1 INCREMENT 1 MAXVALUE 9223372036854775807 MINVALUE 1 CACHE 1 NO CYCLE;
COMMIT;
RESET standard_conforming_strings;
  rollback to svp1;
  \! rm -R /tmp/emaj_test
  -- testing the alter_group mark deletion (it should reduce the time range of the removed sequence)
  select mark_id, mark_group, regexp_replace(mark_name,E'\\d\\d\.\\d\\d\\.\\d\\d\\.\\d\\d\\d','%','g'), mark_time_id, mark_is_deleted, mark_is_rlbk_protected, mark_comment, mark_log_rows_before_next, mark_logged_rlbk_target_mark from emaj.emaj_mark where mark_group = 'myGroup1' order by mark_id desc limit 2;
 mark_id | mark_group |  regexp_replace  | mark_time_id | mark_is_deleted | mark_is_rlbk_protected | mark_comment | mark_log_rows_before_next | mark_logged_rlbk_target_mark 
---------+------------+------------------+--------------+-----------------+------------------------+--------------+---------------------------+------------------------------
    6021 | myGroup1   | Sequence_removed |         6058 | f               | f                      |              |                           | 
    6020 | myGroup1   | Mk2c             |         6057 | f               | f                      |              |                         0 | 
(2 rows)

  select emaj.emaj_delete_mark_group('myGroup1','EMAJ_LAST_MARK');
 emaj_delete_mark_group 
------------------------
                      1
(1 row)

  select * from emaj.emaj_relation where rel_schema = 'myschema1' and rel_tblseq = 'myTbl3_col31_seq';
 rel_schema |    rel_tblseq    | rel_time_range | rel_group | rel_kind | rel_priority | rel_log_schema | rel_log_table | rel_log_dat_tsp | rel_log_index | rel_log_idx_tsp | rel_log_sequence | rel_log_function | rel_sql_columns | rel_sql_pk_columns | rel_sql_pk_eq_conditions | rel_log_seq_last_value 
------------+------------------+----------------+-----------+----------+--------------+----------------+---------------+-----------------+---------------+-----------------+------------------+------------------+-----------------+--------------------+--------------------------+------------------------
 myschema1  | myTbl3_col31_seq | [6041,6058)    | myGroup1  | S        |            1 |                |               |                 |               |                 |                  |                  |                 |                    |                          |                       
(1 row)

  select mark_id, mark_group, regexp_replace(mark_name,E'\\d\\d\.\\d\\d\\.\\d\\d\\.\\d\\d\\d','%','g'), mark_time_id, mark_is_deleted, mark_is_rlbk_protected, mark_comment, mark_log_rows_before_next, mark_logged_rlbk_target_mark from emaj.emaj_mark where mark_group = 'myGroup1' order by mark_id desc limit 1;
 mark_id | mark_group | regexp_replace | mark_time_id | mark_is_deleted | mark_is_rlbk_protected | mark_comment | mark_log_rows_before_next | mark_logged_rlbk_target_mark 
---------+------------+----------------+--------------+-----------------+------------------------+--------------+---------------------------+------------------------------
    6020 | myGroup1   | Mk2c           |         6057 | f               | f                      |              |                           | 
(1 row)

  rollback to svp1;
  -- testing delete a single mark set before the sequence removal
  select emaj.emaj_delete_mark_group('myGroup1','Mk2c');
 emaj_delete_mark_group 
------------------------
                      1
(1 row)

  select * from emaj.emaj_sequence where sequ_time_id not in (select distinct mark_time_id from emaj.emaj_mark where mark_group = 'myGroup1');
 sequ_schema | sequ_name | sequ_time_id | sequ_last_val | sequ_start_val | sequ_increment | sequ_max_val | sequ_min_val | sequ_cache_val | sequ_is_cycled | sequ_is_called 
-------------+-----------+--------------+---------------+----------------+----------------+--------------+--------------+----------------+----------------+----------------
(0 rows)

  -- testing rollback
--select * from emaj.emaj_alter_plan where altr_time_id = (select max(altr_time_id) from emaj.emaj_alter_plan);
  select rlbk_severity, regexp_replace(rlbk_message,E'\\d\\d\\d\\d/\\d\\d\\/\\d\\d\\ \\d\\d\\:\\d\\d:\\d\\d .*?\\)','<timestamp>)','g')
    from emaj.emaj_logged_rollback_group('myGroup1','Mk2b',true) order by 1,2;
 rlbk_severity |                                               regexp_replace                                               
---------------+------------------------------------------------------------------------------------------------------------
 Notice        | 0 / 5 tables effectively processed.
 Notice        | 1 sequences processed.
 Warning       | The sequence myschema1."myTbl3_col31_seq" has been left unchanged (not in group anymore since <timestamp>)
(3 rows)

  select * from emaj.emaj_rollback_group('myGroup1','Mk2b',true) order by 1,2;
 rlbk_severity |            rlbk_message             
---------------+-------------------------------------
 Notice        | 0 / 5 tables effectively processed.
 Notice        | 1 sequences processed.
(2 rows)

--select * from emaj.emaj_alter_plan where altr_time_id = (select max(altr_time_id) from emaj.emaj_alter_plan);
  savepoint svp2;
  -- testing group's reset
  select emaj.emaj_stop_group('myGroup1');
 emaj_stop_group 
-----------------
               6
(1 row)

  select * from emaj.emaj_relation where rel_group = 'myGroup1' and not upper_inf(rel_time_range) order by 1,2;
 rel_schema |    rel_tblseq    | rel_time_range | rel_group | rel_kind | rel_priority | rel_log_schema | rel_log_table | rel_log_dat_tsp | rel_log_index | rel_log_idx_tsp | rel_log_sequence | rel_log_function | rel_sql_columns | rel_sql_pk_columns | rel_sql_pk_eq_conditions | rel_log_seq_last_value 
------------+------------------+----------------+-----------+----------+--------------+----------------+---------------+-----------------+---------------+-----------------+------------------+------------------+-----------------+--------------------+--------------------------+------------------------
 myschema1  | myTbl3_col31_seq | [6041,6058)    | myGroup1  | S        |            1 |                |               |                 |               |                 |                  |                  |                 |                    |                          |                       
(1 row)

  select emaj.emaj_reset_group('myGroup1');
 emaj_reset_group 
------------------
                6
(1 row)

  select * from emaj.emaj_relation where rel_group = 'myGroup1' and not upper_inf(rel_time_range) order by 1,2;
 rel_schema | rel_tblseq | rel_time_range | rel_group | rel_kind | rel_priority | rel_log_schema | rel_log_table | rel_log_dat_tsp | rel_log_index | rel_log_idx_tsp | rel_log_sequence | rel_log_function | rel_sql_columns | rel_sql_pk_columns | rel_sql_pk_eq_conditions | rel_log_seq_last_value 
------------+------------+----------------+-----------+----------+--------------+----------------+---------------+-----------------+---------------+-----------------+------------------+------------------+-----------------+--------------------+--------------------------+------------------------
(0 rows)

  rollback to svp2;
  -- testing marks deletion
  select emaj.emaj_set_mark_group('myGroup1','Mk2d');
 emaj_set_mark_group 
---------------------
                   6
(1 row)

  select emaj.emaj_delete_before_mark_group('myGroup1','Mk2b');
 emaj_delete_before_mark_group 
-------------------------------
                             6
(1 row)

  select * from emaj.emaj_relation where rel_group = 'myGroup1' and not upper_inf(rel_time_range) order by 1,2;
 rel_schema |    rel_tblseq    | rel_time_range | rel_group | rel_kind | rel_priority | rel_log_schema | rel_log_table | rel_log_dat_tsp | rel_log_index | rel_log_idx_tsp | rel_log_sequence | rel_log_function | rel_sql_columns | rel_sql_pk_columns | rel_sql_pk_eq_conditions | rel_log_seq_last_value 
------------+------------------+----------------+-----------+----------+--------------+----------------+---------------+-----------------+---------------+-----------------+------------------+------------------+-----------------+--------------------+--------------------------+------------------------
 myschema1  | myTbl3_col31_seq | [6041,6058)    | myGroup1  | S        |            1 |                |               |                 |               |                 |                  |                  |                 |                    |                          |                       
(1 row)

  select emaj.emaj_delete_before_mark_group('myGroup1','Mk2d');
 emaj_delete_before_mark_group 
-------------------------------
                             1
(1 row)

  select * from emaj.emaj_relation where rel_group = 'myGroup1' and not upper_inf(rel_time_range) order by 1,2;
 rel_schema | rel_tblseq | rel_time_range | rel_group | rel_kind | rel_priority | rel_log_schema | rel_log_table | rel_log_dat_tsp | rel_log_index | rel_log_idx_tsp | rel_log_sequence | rel_log_function | rel_sql_columns | rel_sql_pk_columns | rel_sql_pk_eq_conditions | rel_log_seq_last_value 
------------+------------+----------------+-----------+----------+--------------+----------------+---------------+-----------------+---------------+-----------------+------------------+------------------+-----------------+--------------------+--------------------------+------------------------
(0 rows)

  -- testing the sequence drop
  drop sequence mySchema1."myTbl3_col31_seq" cascade;
NOTICE:  drop cascades to default for table myschema1."myTbl3" column col31
--select * from emaj.emaj_hist order by hist_id desc limit 50;
rollback;
-----------------------------
-- add tables
-----------------------------
-- add myschema2.mytbl7 to the myGroup2 group
-- first performs updates and set marks
select emaj.emaj_set_mark_group('myGroup2','ADD_TBL test');
 emaj_set_mark_group 
---------------------
                   8
(1 row)

insert into myschema2.mytbl7 values (1),(2),(3);
select emaj.emaj_set_mark_group('myGroup2','Before ADD_TBL');
 emaj_set_mark_group 
---------------------
                   8
(1 row)

delete from myschema2.mytbl7 where col71 = 3;
-- then add the table to the group
insert into emaj.emaj_group_def values ('myGroup2','myschema2','mytbl7');
select emaj.emaj_alter_group('myGroup2', 'Alter to add mytbl7');
NOTICE:  table "myschema2_mytbl7_log" does not exist, skipping
CONTEXT:  SQL statement "DROP TABLE IF EXISTS emaj.myschema2_mytbl7_log"
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,bigint,boolean) line 66 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_timeId, v_isRollbackable)"
PL/pgSQL function emaj._add_tbl(emaj.emaj_alter_plan,bigint) line 24 at PERFORM
SQL statement "SELECT emaj._add_tbl(r_plan, v_timeId)"
PL/pgSQL function emaj._alter_exec(bigint) line 121 at PERFORM
SQL statement "SELECT emaj._alter_exec(v_timeId)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 44 at PERFORM
PL/pgSQL function emaj.emaj_alter_group(text,text) line 6 at RETURN
NOTICE:  trigger "emaj_log_trg" for table "myschema2.mytbl7" does not exist, skipping
CONTEXT:  SQL statement "DROP TRIGGER IF EXISTS emaj_log_trg ON myschema2.mytbl7"
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,bigint,boolean) line 120 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_timeId, v_isRollbackable)"
PL/pgSQL function emaj._add_tbl(emaj.emaj_alter_plan,bigint) line 24 at PERFORM
SQL statement "SELECT emaj._add_tbl(r_plan, v_timeId)"
PL/pgSQL function emaj._alter_exec(bigint) line 121 at PERFORM
SQL statement "SELECT emaj._alter_exec(v_timeId)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 44 at PERFORM
PL/pgSQL function emaj.emaj_alter_group(text,text) line 6 at RETURN
NOTICE:  trigger "emaj_trunc_trg" for table "myschema2.mytbl7" does not exist, skipping
CONTEXT:  SQL statement "DROP TRIGGER IF EXISTS emaj_trunc_trg ON myschema2.mytbl7"
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,bigint,boolean) line 127 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_timeId, v_isRollbackable)"
PL/pgSQL function emaj._add_tbl(emaj.emaj_alter_plan,bigint) line 24 at PERFORM
SQL statement "SELECT emaj._add_tbl(r_plan, v_timeId)"
PL/pgSQL function emaj._alter_exec(bigint) line 121 at PERFORM
SQL statement "SELECT emaj._alter_exec(v_timeId)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 44 at PERFORM
PL/pgSQL function emaj.emaj_alter_group(text,text) line 6 at RETURN
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 56 at PERFORM
PL/pgSQL function emaj.emaj_alter_group(text,text) line 6 at RETURN
 emaj_alter_group 
------------------
                9
(1 row)

select group_nb_table, group_nb_sequence from emaj.emaj_group where group_name = 'myGroup2';
 group_nb_table | group_nb_sequence 
----------------+-------------------
              7 |                 2
(1 row)

select * from emaj.emaj_relation where rel_schema = 'myschema2' and rel_tblseq = 'mytbl7' order by rel_time_range;
 rel_schema | rel_tblseq | rel_time_range | rel_group | rel_kind | rel_priority | rel_log_schema |    rel_log_table     | rel_log_dat_tsp |      rel_log_index       | rel_log_idx_tsp |     rel_log_sequence     |     rel_log_function      | rel_sql_columns | rel_sql_pk_columns | rel_sql_pk_eq_conditions | rel_log_seq_last_value 
------------+------------+----------------+-----------+----------+--------------+----------------+----------------------+-----------------+--------------------------+-----------------+--------------------------+---------------------------+-----------------+--------------------+--------------------------+------------------------
 myschema2  | mytbl7     | [6068,)        | myGroup2  | r        |              | emaj           | myschema2_mytbl7_log |                 | myschema2_mytbl7_log_idx |                 | myschema2_mytbl7_log_seq | myschema2_mytbl7_log_fnct | tbl.col71       | col71              | tbl.col71 = keys.col71   |                       
(1 row)

-- perform some other updates
insert into myschema2.mytbl7 values (4),(5);
-- remove the alter group mark just after the alter operation and then get statistics and set a mark
begin;
  select emaj.emaj_delete_mark_group('myGroup2','Alter to add mytbl7');
 emaj_delete_mark_group 
------------------------
                      1
(1 row)

  select stat_group, stat_schema, stat_table, stat_first_mark, stat_last_mark, stat_rows 
    from emaj.emaj_log_stat_group('myGroup2','Before ADD_TBL',NULL);
 stat_group | stat_schema | stat_table | stat_first_mark | stat_last_mark | stat_rows 
------------+-------------+------------+-----------------+----------------+-----------
 myGroup2   | myschema2   | myTbl3     | Before ADD_TBL  |                |         0
 myGroup2   | myschema2   | mytbl1     | Before ADD_TBL  |                |         0
 myGroup2   | myschema2   | mytbl2     | Before ADD_TBL  |                |         0
 myGroup2   | myschema2   | mytbl4     | Before ADD_TBL  |                |         0
 myGroup2   | myschema2   | mytbl5     | Before ADD_TBL  |                |         0
 myGroup2   | myschema2   | mytbl6     | Before ADD_TBL  |                |         0
 myGroup2   | myschema2   | mytbl7     | [deleted mark]  |                |         2
(7 rows)

  select emaj.emaj_set_mark_group('myGroup2','Just after ADD_TBL');
 emaj_set_mark_group 
---------------------
                   9
(1 row)

  select mark_log_rows_before_next from emaj.emaj_mark where mark_name = 'Before ADD_TBL';
 mark_log_rows_before_next 
---------------------------
                         2
(1 row)

rollback;
-- set marks and look at statistics
select emaj.emaj_set_mark_group('myGroup2','Just after ADD_TBL');
 emaj_set_mark_group 
---------------------
                   9
(1 row)

update myschema2.mytbl7 set col71 = 6 where col71 = 2;
select col71, emaj_verb, emaj_tuple from emaj.myschema2_mytbl7_log order by emaj_gid;
 col71 | emaj_verb | emaj_tuple 
-------+-----------+------------
     4 | INS       | NEW
     5 | INS       | NEW
     2 | UPD       | OLD
     6 | UPD       | NEW
(4 rows)

select stat_group, stat_schema, stat_table, stat_first_mark, stat_last_mark, stat_rows 
  from emaj.emaj_log_stat_group('myGroup2','ADD_TBL test',NULL);
 stat_group | stat_schema | stat_table |   stat_first_mark   | stat_last_mark | stat_rows 
------------+-------------+------------+---------------------+----------------+-----------
 myGroup2   | myschema2   | myTbl3     | ADD_TBL test        |                |         0
 myGroup2   | myschema2   | mytbl1     | ADD_TBL test        |                |         0
 myGroup2   | myschema2   | mytbl2     | ADD_TBL test        |                |         0
 myGroup2   | myschema2   | mytbl4     | ADD_TBL test        |                |         0
 myGroup2   | myschema2   | mytbl5     | ADD_TBL test        |                |         0
 myGroup2   | myschema2   | mytbl6     | ADD_TBL test        |                |         0
 myGroup2   | myschema2   | mytbl7     | Alter to add mytbl7 |                |         3
(7 rows)

select emaj.emaj_set_mark_group('myGroup2','After ADD_TBL');
 emaj_set_mark_group 
---------------------
                   9
(1 row)

select stat_group, stat_schema, stat_table, stat_first_mark, stat_last_mark, stat_role, stat_verb, stat_rows 
  from emaj.emaj_detailed_log_stat_group('myGroup2','ADD_TBL test','After ADD_TBL');
 stat_group | stat_schema | stat_table |   stat_first_mark   | stat_last_mark | stat_role | stat_verb | stat_rows 
------------+-------------+------------+---------------------+----------------+-----------+-----------+-----------
 myGroup2   | myschema2   | mytbl7     | Alter to add mytbl7 | After ADD_TBL  | postgres  | INSERT    |         2
 myGroup2   | myschema2   | mytbl7     | Alter to add mytbl7 | After ADD_TBL  | postgres  | UPDATE    |         1
(2 rows)

--testing snap and sql generation
\! mkdir -p /tmp/emaj_test/alter
\! rm -Rf /tmp/emaj_test/alter/*
  select emaj.emaj_snap_group('myGroup2','/tmp/emaj_test/alter','');
 emaj_snap_group 
-----------------
               9
(1 row)

\! ls /tmp/emaj_test/alter
_INFO
myschema2_myTbl3.snap
myschema2_myTbl3_col31_seq.snap
myschema2_myseq1.snap
myschema2_mytbl1.snap
myschema2_mytbl2.snap
myschema2_mytbl4.snap
myschema2_mytbl5.snap
myschema2_mytbl6.snap
myschema2_mytbl7.snap
\! rm -R /tmp/emaj_test/alter/*
  select emaj.emaj_snap_log_group('myGroup2',NULL,'After ADD_TBL','/tmp/emaj_test/alter',NULL);
 emaj_snap_log_group 
---------------------
                  10
(1 row)

\! ls /tmp/emaj_test/alter/myschema2*
/tmp/emaj_test/alter/myschema2_myTbl3_log.snap
/tmp/emaj_test/alter/myschema2_mytbl1_log.snap
/tmp/emaj_test/alter/myschema2_mytbl2_log.snap
/tmp/emaj_test/alter/myschema2_mytbl4_log.snap
/tmp/emaj_test/alter/myschema2_mytbl6_log.snap
/tmp/emaj_test/alter/myschema2_mytbl7_log.snap
\! rm -R /tmp/emaj_test/alter/*
  select emaj.emaj_gen_sql_group('myGroup2', 'Before ADD_TBL', NULL, '/tmp/emaj_test/alter/myFile',array['myschema2.mytbl7']);
ERROR:  _gen_sql_groups: 1 table/sequence (myschema2.mytbl7) did not belong to any of the selected tables groups at Before ADD_TBL mark time.
CONTEXT:  PL/pgSQL function emaj.emaj_gen_sql_group(text,text,text,text,text[]) line 13 at RETURN
\! rm -R /tmp/emaj_test
-- testing mark deletions
begin;
  -- testing delete a single mark set after the table addition
  select emaj.emaj_delete_mark_group('myGroup2','After ADD_TBL');
 emaj_delete_mark_group 
------------------------
                      1
(1 row)

  select 'Should not exist' from emaj.emaj_mark where mark_group = 'myGroup2' and mark_name = 'After ADD_TBL';
 ?column? 
----------
(0 rows)

  -- testing delete all marks up to a mark set after the alter_group
  select emaj.emaj_delete_before_mark_group('myGroup2','EMAJ_LAST_MARK');
 emaj_delete_before_mark_group 
-------------------------------
                             8
(1 row)

  select * from emaj.emaj_mark where mark_group = 'myGroup2';
 mark_group |     mark_name      | mark_id | mark_time_id | mark_is_deleted | mark_is_rlbk_protected | mark_comment | mark_log_rows_before_next | mark_logged_rlbk_target_mark 
------------+--------------------+---------+--------------+-----------------+------------------------+--------------+---------------------------+------------------------------
 myGroup2   | Just after ADD_TBL |    6031 |         6070 | f               | f                      |              |                           | 
(1 row)

  select * from emaj.emaj_sequence where sequ_name = 'myschema2_mytbl7_log_seq' order by sequ_time_id;
 sequ_schema |        sequ_name         | sequ_time_id | sequ_last_val | sequ_start_val | sequ_increment |    sequ_max_val     | sequ_min_val | sequ_cache_val | sequ_is_cycled | sequ_is_called 
-------------+--------------------------+--------------+---------------+----------------+----------------+---------------------+--------------+----------------+----------------+----------------
 emaj        | myschema2_mytbl7_log_seq |         6068 |             1 |              1 |              1 | 9223372036854775807 |            1 |              1 | f              | f
 emaj        | myschema2_mytbl7_log_seq |         6070 |             2 |              1 |              1 | 9223372036854775807 |            1 |              1 | f              | t
(2 rows)

rollback;
begin;
  -- testing the alter_group mark deletion
  select mark_time_id from emaj.emaj_mark where mark_group = 'myGroup2' and mark_name = 'Alter to add mytbl7';
 mark_time_id 
--------------
         6068
(1 row)

  select emaj.emaj_delete_mark_group('myGroup2','Alter to add mytbl7');
 emaj_delete_mark_group 
------------------------
                      1
(1 row)

  select * from emaj.emaj_sequence where sequ_name = 'myschema2_mytbl7_log_seq' order by sequ_time_id limit 1;
 sequ_schema |        sequ_name         | sequ_time_id | sequ_last_val | sequ_start_val | sequ_increment |    sequ_max_val     | sequ_min_val | sequ_cache_val | sequ_is_cycled | sequ_is_called 
-------------+--------------------------+--------------+---------------+----------------+----------------+---------------------+--------------+----------------+----------------+----------------
 emaj        | myschema2_mytbl7_log_seq |         6068 |             1 |              1 |              1 | 9223372036854775807 |            1 |              1 | f              | f
(1 row)

rollback;
-- test sequences and holes at bounds following a rollback targeting a mark set before an ADD_TBL
begin;
  delete from emaj.emaj_param where param_key = 'dblink_user_password';
  select mark_time_id from emaj.emaj_mark where mark_group = 'myGroup2' and mark_name = 'Alter to add mytbl7';
 mark_time_id 
--------------
         6068
(1 row)

  select rlbk_severity, regexp_replace(rlbk_message,E'\\d\\d\\d\\d/\\d\\d\\/\\d\\d\\ \\d\\d\\:\\d\\d:\\d\\d .*?\\)','<timestamp>)','g')
    from emaj.emaj_rollback_group('myGroup2','Before ADD_TBL',true);
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean,boolean) line 67 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup, v_isAlterGroupAllowed)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean,boolean) line 22 at SQL statement
PL/pgSQL function emaj.emaj_rollback_group(text,text,boolean) line 7 at RETURN QUERY
 rlbk_severity |                                            regexp_replace                                            
---------------+------------------------------------------------------------------------------------------------------
 Notice        | 1 / 7 tables effectively processed.
 Notice        | 2 sequences processed.
 Warning       | The table myschema2.mytbl7 has only been rolled back up to its latest group attachment (<timestamp>)
(3 rows)

  select * from emaj.emaj_sequence where sequ_schema = 'emaj' and sequ_name = 'myschema2_mytbl7_log_seq';
 sequ_schema |        sequ_name         | sequ_time_id | sequ_last_val | sequ_start_val | sequ_increment |    sequ_max_val     | sequ_min_val | sequ_cache_val | sequ_is_cycled | sequ_is_called 
-------------+--------------------------+--------------+---------------+----------------+----------------+---------------------+--------------+----------------+----------------+----------------
 emaj        | myschema2_mytbl7_log_seq |         6068 |             1 |              1 |              1 | 9223372036854775807 |            1 |              1 | f              | f
(1 row)

  select * from emaj.emaj_seq_hole where sqhl_schema = 'myschema2' and sqhl_table = 'mytbl7';
 sqhl_schema | sqhl_table | sqhl_begin_time_id | sqhl_end_time_id | sqhl_hole_size 
-------------+------------+--------------------+------------------+----------------
 myschema2   | mytbl7     |               6068 |             6072 |              3
(1 row)

  select stat_group, stat_schema, stat_table, stat_first_mark, stat_last_mark, stat_rows from emaj.emaj_log_stat_group('myGroup2','ADD_TBL test',NULL);
 stat_group | stat_schema | stat_table | stat_first_mark | stat_last_mark | stat_rows 
------------+-------------+------------+-----------------+----------------+-----------
 myGroup2   | myschema2   | myTbl3     | ADD_TBL test    |                |         0
 myGroup2   | myschema2   | mytbl1     | ADD_TBL test    |                |         0
 myGroup2   | myschema2   | mytbl2     | ADD_TBL test    |                |         0
 myGroup2   | myschema2   | mytbl4     | ADD_TBL test    |                |         0
 myGroup2   | myschema2   | mytbl5     | ADD_TBL test    |                |         0
 myGroup2   | myschema2   | mytbl6     | ADD_TBL test    |                |         0
 myGroup2   | myschema2   | mytbl7     | [deleted mark]  |                |         0
(7 rows)

rollback;
-- estimate and then perform a logged rollback to reach a mark prior the ADD_TBL operation and check
select * from emaj.emaj_estimate_rollback_group('myGroup2','Before ADD_TBL',true);
 emaj_estimate_rollback_group 
------------------------------
 @ 0.028815 secs
(1 row)

select rlbk_severity, regexp_replace(rlbk_message,E'\\d\\d\\d\\d/\\d\\d\\/\\d\\d\\ \\d\\d\\:\\d\\d:\\d\\d .*?\\)','<timestamp>)','g')
  from emaj.emaj_logged_rollback_group('myGroup2','Before ADD_TBL',true);
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean,boolean) line 67 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup, v_isAlterGroupAllowed)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean,boolean) line 22 at SQL statement
PL/pgSQL function emaj.emaj_logged_rollback_group(text,text,boolean) line 11 at RETURN QUERY
 rlbk_severity |                                            regexp_replace                                            
---------------+------------------------------------------------------------------------------------------------------
 Notice        | 1 / 7 tables effectively processed.
 Notice        | 2 sequences processed.
 Warning       | The table myschema2.mytbl7 has only been rolled back up to its latest group attachment (<timestamp>)
(3 rows)

select col71, emaj_verb, emaj_tuple from emaj.myschema2_mytbl7_log order by emaj_gid;
 col71 | emaj_verb | emaj_tuple 
-------+-----------+------------
     4 | INS       | NEW
     5 | INS       | NEW
     2 | UPD       | OLD
     6 | UPD       | NEW
     5 | DEL       | OLD
     6 | DEL       | OLD
     4 | DEL       | OLD
     2 | INS       | NEW
(8 rows)

select * from myschema2.mytbl7 order by col71;
 col71 
-------
     1
     2
(2 rows)

-- consolidate this logged rollback
select emaj.emaj_rename_mark_group('myGroup2','EMAJ_LAST_MARK','Logged_Rlbk_End');
 emaj_rename_mark_group 
------------------------
 
(1 row)

select mark_time_id from emaj.emaj_mark where mark_group = 'myGroup2' and mark_name = 'Alter to add mytbl7';
 mark_time_id 
--------------
         6068
(1 row)

select * from emaj.emaj_get_consolidable_rollbacks() where cons_group = 'myGroup2'; -- should report 1 row to consolidate
 cons_group | cons_target_rlbk_mark_name | cons_target_rlbk_mark_id | cons_end_rlbk_mark_name | cons_end_rlbk_mark_id | cons_rows | cons_marks 
------------+----------------------------+--------------------------+-------------------------+-----------------------+-----------+------------
 myGroup2   | Before ADD_TBL             |                     6028 | Logged_Rlbk_End         |                  6034 |         7 |          4
(1 row)

select * from emaj.emaj_consolidate_rollback_group('myGroup2', 'Logged_Rlbk_End');
 emaj_consolidate_rollback_group 
---------------------------------
                               3
(1 row)

select * from emaj.emaj_sequence where sequ_schema = 'emaj' and sequ_name = 'myschema2_mytbl7_log_seq';
 sequ_schema |        sequ_name         | sequ_time_id | sequ_last_val | sequ_start_val | sequ_increment |    sequ_max_val     | sequ_min_val | sequ_cache_val | sequ_is_cycled | sequ_is_called 
-------------+--------------------------+--------------+---------------+----------------+----------------+---------------------+--------------+----------------+----------------+----------------
 emaj        | myschema2_mytbl7_log_seq |         6068 |             1 |              1 |              1 | 9223372036854775807 |            1 |              1 | f              | f
 emaj        | myschema2_mytbl7_log_seq |         6074 |             7 |              1 |              1 | 9223372036854775807 |            1 |              1 | f              | t
(2 rows)

-- perform some other updates
insert into myschema2.myTbl7 values (7),(8),(9);
-- verify the group and detect the lack of the new log table
begin;
  select emaj.emaj_disable_protection_by_event_triggers();
 emaj_disable_protection_by_event_triggers 
-------------------------------------------
                                         2
(1 row)

  drop table emaj.myschema2_mytbl7_log;
  select * from emaj.emaj_verify_all();
                                                                emaj_verify_all                                                                
-----------------------------------------------------------------------------------------------------------------------------------------------
 Warning: Some E-Maj event triggers exist but are disabled. You may enable them using the emaj_enable_protection_by_event_triggers() function.
 In group "myGroup2", the log table "emaj"."myschema2_mytbl7_log" is not found.
(2 rows)

  select emaj.emaj_enable_protection_by_event_triggers();
 emaj_enable_protection_by_event_triggers 
------------------------------------------
                                        2
(1 row)

rollback;
-- remove myTbl7 from the group, then re-add it
delete from emaj.emaj_group_def where grpdef_schema = 'myschema2' and grpdef_tblseq = 'mytbl7';
select emaj.emaj_alter_group('myGroup2', 'Alter to remove mytbl7');
WARNING:  _check_fk_groups: The foreign key "mytbl6_col61_fkey" on the table "myschema2.mytbl6" references the table "myschema2.mytbl7" that is outside the groups (myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 56 at PERFORM
PL/pgSQL function emaj.emaj_alter_group(text,text) line 6 at RETURN
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 56 at PERFORM
PL/pgSQL function emaj.emaj_alter_group(text,text) line 6 at RETURN
 emaj_alter_group 
------------------
                8
(1 row)

insert into emaj.emaj_group_def values ('myGroup2','myschema2','mytbl7');
select emaj.emaj_alter_group('myGroup2', 'Alter to re-add mytbl7');
NOTICE:  table "myschema2_mytbl7_log" does not exist, skipping
CONTEXT:  SQL statement "DROP TABLE IF EXISTS emaj.myschema2_mytbl7_log"
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,bigint,boolean) line 66 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_timeId, v_isRollbackable)"
PL/pgSQL function emaj._add_tbl(emaj.emaj_alter_plan,bigint) line 24 at PERFORM
SQL statement "SELECT emaj._add_tbl(r_plan, v_timeId)"
PL/pgSQL function emaj._alter_exec(bigint) line 121 at PERFORM
SQL statement "SELECT emaj._alter_exec(v_timeId)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 44 at PERFORM
PL/pgSQL function emaj.emaj_alter_group(text,text) line 6 at RETURN
NOTICE:  trigger "emaj_log_trg" for table "myschema2.mytbl7" does not exist, skipping
CONTEXT:  SQL statement "DROP TRIGGER IF EXISTS emaj_log_trg ON myschema2.mytbl7"
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,bigint,boolean) line 120 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_timeId, v_isRollbackable)"
PL/pgSQL function emaj._add_tbl(emaj.emaj_alter_plan,bigint) line 24 at PERFORM
SQL statement "SELECT emaj._add_tbl(r_plan, v_timeId)"
PL/pgSQL function emaj._alter_exec(bigint) line 121 at PERFORM
SQL statement "SELECT emaj._alter_exec(v_timeId)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 44 at PERFORM
PL/pgSQL function emaj.emaj_alter_group(text,text) line 6 at RETURN
NOTICE:  trigger "emaj_trunc_trg" for table "myschema2.mytbl7" does not exist, skipping
CONTEXT:  SQL statement "DROP TRIGGER IF EXISTS emaj_trunc_trg ON myschema2.mytbl7"
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,bigint,boolean) line 127 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_timeId, v_isRollbackable)"
PL/pgSQL function emaj._add_tbl(emaj.emaj_alter_plan,bigint) line 24 at PERFORM
SQL statement "SELECT emaj._add_tbl(r_plan, v_timeId)"
PL/pgSQL function emaj._alter_exec(bigint) line 121 at PERFORM
SQL statement "SELECT emaj._alter_exec(v_timeId)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 44 at PERFORM
PL/pgSQL function emaj.emaj_alter_group(text,text) line 6 at RETURN
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 56 at PERFORM
PL/pgSQL function emaj.emaj_alter_group(text,text) line 6 at RETURN
 emaj_alter_group 
------------------
                9
(1 row)

select * from emaj.emaj_relation where rel_schema = 'myschema2' and rel_tblseq = 'mytbl7' order by rel_time_range;
 rel_schema | rel_tblseq | rel_time_range | rel_group | rel_kind | rel_priority | rel_log_schema |     rel_log_table      | rel_log_dat_tsp |       rel_log_index        | rel_log_idx_tsp |     rel_log_sequence     |     rel_log_function      | rel_sql_columns | rel_sql_pk_columns | rel_sql_pk_eq_conditions | rel_log_seq_last_value 
------------+------------+----------------+-----------+----------+--------------+----------------+------------------------+-----------------+----------------------------+-----------------+--------------------------+---------------------------+-----------------+--------------------+--------------------------+------------------------
 myschema2  | mytbl7     | [6068,6075)    | myGroup2  | r        |              | emaj           | myschema2_mytbl7_log_1 |                 | myschema2_mytbl7_log_idx_1 |                 | myschema2_mytbl7_log_seq |                           |                 |                    |                          |                     10
 myschema2  | mytbl7     | [6076,)        | myGroup2  | r        |              | emaj           | myschema2_mytbl7_log   |                 | myschema2_mytbl7_log_idx   |                 | myschema2_mytbl7_log_seq | myschema2_mytbl7_log_fnct | tbl.col71       | col71              | tbl.col71 = keys.col71   |                       
(2 rows)

delete from myschema2.myTbl7 where col71 = 9;
-- get statistics
select stat_group, stat_schema, stat_table, stat_first_mark, stat_last_mark, stat_rows from emaj.emaj_log_stat_group('myGroup2','ADD_TBL test',NULL);
 stat_group | stat_schema | stat_table |    stat_first_mark     |     stat_last_mark     | stat_rows 
------------+-------------+------------+------------------------+------------------------+-----------
 myGroup2   | myschema2   | myTbl3     | ADD_TBL test           |                        |         0
 myGroup2   | myschema2   | mytbl1     | ADD_TBL test           |                        |         0
 myGroup2   | myschema2   | mytbl2     | ADD_TBL test           |                        |         0
 myGroup2   | myschema2   | mytbl4     | ADD_TBL test           |                        |         0
 myGroup2   | myschema2   | mytbl5     | ADD_TBL test           |                        |         0
 myGroup2   | myschema2   | mytbl6     | ADD_TBL test           |                        |         0
 myGroup2   | myschema2   | mytbl7     | [deleted mark]         | Alter to remove mytbl7 |         3
 myGroup2   | myschema2   | mytbl7     | Alter to re-add mytbl7 |                        |         1
(8 rows)

select stat_group, stat_schema, stat_table, stat_first_mark, stat_last_mark, stat_role, stat_verb, stat_rows
  from emaj.emaj_detailed_log_stat_group('myGroup2','ADD_TBL test',NULL);
 stat_group | stat_schema | stat_table |    stat_first_mark     |     stat_last_mark     | stat_role | stat_verb | stat_rows 
------------+-------------+------------+------------------------+------------------------+-----------+-----------+-----------
 myGroup2   | myschema2   | mytbl7     | [deleted mark]         | Alter to remove mytbl7 | postgres  | INSERT    |         3
 myGroup2   | myschema2   | mytbl7     | Alter to re-add mytbl7 |                        | postgres  | DELETE    |         1
(2 rows)

-- snap the logs
\! mkdir -p /tmp/emaj_test/alter
select emaj.emaj_snap_log_group('myGroup2',NULL,NULL,'/tmp/emaj_test/alter',NULL);
 emaj_snap_log_group 
---------------------
                  11
(1 row)

\! ls /tmp/emaj_test/alter/myschema2_mytbl7_log*
/tmp/emaj_test/alter/myschema2_mytbl7_log.snap
/tmp/emaj_test/alter/myschema2_mytbl7_log_1.snap
\! rm -R /tmp/emaj_test
-- and finaly remove myTbl7 from the group
delete from emaj.emaj_group_def where grpdef_schema = 'myschema2' and grpdef_tblseq = 'mytbl7';
select emaj.emaj_alter_group('myGroup2', 'Alter to really remove mytbl7');
WARNING:  _check_fk_groups: The foreign key "mytbl6_col61_fkey" on the table "myschema2.mytbl6" references the table "myschema2.mytbl7" that is outside the groups (myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 56 at PERFORM
PL/pgSQL function emaj.emaj_alter_group(text,text) line 6 at RETURN
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 56 at PERFORM
PL/pgSQL function emaj.emaj_alter_group(text,text) line 6 at RETURN
 emaj_alter_group 
------------------
                8
(1 row)

-- and perform a full rollback (that do not process myTbl7)
select rlbk_severity, regexp_replace(rlbk_message,E'\\d\\d\\d\\d/\\d\\d\\/\\d\\d\\ \\d\\d\\:\\d\\d:\\d\\d .*?\\)','<timestamp>)','g')
  from emaj.emaj_rollback_group('myGroup2', 'ADD_TBL test',true);
WARNING:  _check_fk_groups: The foreign key "mytbl6_col61_fkey" on the table "myschema2.mytbl6" references the table "myschema2.mytbl7" that is outside the groups (myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean,boolean) line 67 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup, v_isAlterGroupAllowed)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean,boolean) line 22 at SQL statement
PL/pgSQL function emaj.emaj_rollback_group(text,text,boolean) line 7 at RETURN QUERY
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean,boolean) line 67 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup, v_isAlterGroupAllowed)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean,boolean) line 22 at SQL statement
PL/pgSQL function emaj.emaj_rollback_group(text,text,boolean) line 7 at RETURN QUERY
 rlbk_severity |                                       regexp_replace                                        
---------------+---------------------------------------------------------------------------------------------
 Notice        | 0 / 6 tables effectively processed.
 Notice        | 2 sequences processed.
 Warning       | The table myschema2.mytbl7 has been left unchanged (not in group anymore since <timestamp>)
(3 rows)

select * from myschema2.mytbl7 order by col71;
 col71 
-------
     1
     2
     7
     8
(4 rows)

-----------------------------
-- remove tables
-----------------------------
insert into myschema1."myTbl3" (col33) values (1.);
select emaj.emaj_set_mark_group('myGroup1','Mk2c');
 emaj_set_mark_group 
---------------------
                   7
(1 row)

insert into myschema1."myTbl3" (col33) values (1.);
update emaj.emaj_group_def set grpdef_group = 'temporarily_removed'
  where grpdef_group = 'myGroup1' and grpdef_schema = 'myschema1' and (grpdef_tblseq = 'myTbl3' or grpdef_tblseq = 'mytbl2b');
select emaj.emaj_alter_group('myGroup1', '2 tables removed from myGroup1');
 emaj_alter_group 
------------------
                5
(1 row)

select group_nb_table, group_nb_sequence from emaj.emaj_group where group_name = 'myGroup1';
 group_nb_table | group_nb_sequence 
----------------+-------------------
              3 |                 2
(1 row)

select * from emaj.emaj_relation where rel_schema = 'myschema1' and (rel_tblseq = 'myTbl3' or rel_tblseq = 'mytbl2b') order by 1,2;
 rel_schema | rel_tblseq | rel_time_range | rel_group | rel_kind | rel_priority | rel_log_schema |      rel_log_table      | rel_log_dat_tsp |        rel_log_index        | rel_log_idx_tsp |     rel_log_sequence      | rel_log_function | rel_sql_columns | rel_sql_pk_columns | rel_sql_pk_eq_conditions | rel_log_seq_last_value 
------------+------------+----------------+-----------+----------+--------------+----------------+-------------------------+-----------------+-----------------------------+-----------------+---------------------------+------------------+-----------------+--------------------+--------------------------+------------------------
 myschema1  | myTbl3     | [6041,6081)    | myGroup1  | r        |           10 | emajC          | myschema1_myTbl3_log_1  | tsplog1         | myschema1_myTbl3_log_idx_1  |                 | myschema1_myTbl3_log_seq  |                  |                 |                    |                          |                      2
 myschema1  | mytbl2b    | [6041,6081)    | myGroup1  | r        |              | emajb          | myschema1_mytbl2b_log_1 | tsp log'2       | myschema1_mytbl2b_log_idx_1 | tsp log'2       | myschema1_mytbl2b_log_seq |                  |                 |                    |                          |                      0
(2 rows)

delete from myschema1."myTbl3" where col33 = 1.;
select count(*) from "emajC"."myschema1_myTbl3_log_1";
 count 
-------
     2
(1 row)

select * from emaj.emaj_verify_all();
  emaj_verify_all  
-------------------
 No error detected
(1 row)

-- test statistics following a rollback targeting a mark set before a REMOVE_TBL
begin;
  delete from emaj.emaj_param where param_key = 'dblink_user_password';
  select rlbk_severity, regexp_replace(rlbk_message,E'\\d\\d\\d\\d/\\d\\d\\/\\d\\d\\ \\d\\d\\:\\d\\d:\\d\\d .*?\\)','<timestamp>)','g')
    from emaj.emaj_rollback_group('myGroup1','Mk2c',true);
 rlbk_severity |                                        regexp_replace                                         
---------------+-----------------------------------------------------------------------------------------------
 Notice        | 0 / 3 tables effectively processed.
 Notice        | 2 sequences processed.
 Warning       | The table myschema1."myTbl3" has been left unchanged (not in group anymore since <timestamp>)
 Warning       | The table myschema1.mytbl2b has been left unchanged (not in group anymore since <timestamp>)
(4 rows)

  select stat_group, stat_schema, stat_table, stat_first_mark, stat_last_mark, stat_rows
    from emaj.emaj_log_stat_group('myGroup1','Mk2b',NULL) order by 1,2,3,4;
 stat_group | stat_schema | stat_table | stat_first_mark | stat_last_mark | stat_rows 
------------+-------------+------------+-----------------+----------------+-----------
 myGroup1   | myschema1   | myTbl3     | Mk2b            | [deleted mark] |         2
 myGroup1   | myschema1   | mytbl1     | Mk2b            |                |         0
 myGroup1   | myschema1   | mytbl2     | Mk2b            |                |         0
 myGroup1   | myschema1   | mytbl2b    | Mk2b            | [deleted mark] |         0
 myGroup1   | myschema1   | mytbl4     | Mk2b            |                |         0
(5 rows)

rollback;
-- testing log stat
select stat_group, stat_schema, stat_table, stat_first_mark, stat_last_mark, stat_rows from emaj.emaj_log_stat_group('myGroup1',NULL,NULL);
 stat_group | stat_schema | stat_table | stat_first_mark |         stat_last_mark         | stat_rows 
------------+-------------+------------+-----------------+--------------------------------+-----------
 myGroup1   | myschema1   | myTbl3     | Mk1             | 2 tables removed from myGroup1 |         2
 myGroup1   | myschema1   | mytbl1     | Mk1             |                                |         0
 myGroup1   | myschema1   | mytbl2     | Mk1             |                                |         0
 myGroup1   | myschema1   | mytbl2b    | Mk1             | 2 tables removed from myGroup1 |         0
 myGroup1   | myschema1   | mytbl4     | Mk1             |                                |         0
(5 rows)

select stat_group, stat_schema, stat_table, stat_first_mark, stat_last_mark, stat_role, stat_verb, stat_rows
  from emaj.emaj_detailed_log_stat_group('myGroup1',NULL,NULL);
 stat_group | stat_schema | stat_table | stat_first_mark |         stat_last_mark         | stat_role | stat_verb | stat_rows 
------------+-------------+------------+-----------------+--------------------------------+-----------+-----------+-----------
 myGroup1   | myschema1   | myTbl3     | Mk1             | 2 tables removed from myGroup1 | postgres  | INSERT    |         2
(1 row)

--testing snap and sql generation
\! mkdir -p /tmp/emaj_test/alter
\! rm -Rf /tmp/emaj_test/alter/*
select emaj.emaj_snap_group('myGroup1','/tmp/emaj_test/alter','');
 emaj_snap_group 
-----------------
               5
(1 row)

\! ls /tmp/emaj_test/alter
_INFO
myschema1_myTbl3_col31_seq.snap
myschema1_mytbl1.snap
myschema1_mytbl2.snap
myschema1_mytbl2b_col20_seq.snap
myschema1_mytbl4.snap
\! rm -R /tmp/emaj_test/alter/*
select emaj.emaj_snap_log_group('myGroup1',NULL,NULL,'/tmp/emaj_test/alter',NULL);
 emaj_snap_log_group 
---------------------
                   8
(1 row)

\! ls /tmp/emaj_test/alter/myschema1*
/tmp/emaj_test/alter/myschema1_myTbl3_log_1.snap
/tmp/emaj_test/alter/myschema1_mytbl1_log.snap
/tmp/emaj_test/alter/myschema1_mytbl2_log.snap
/tmp/emaj_test/alter/myschema1_mytbl2b_log_1.snap
/tmp/emaj_test/alter/myschema1_mytbl4_log.snap
\! rm -R /tmp/emaj_test/alter/*
  select emaj.emaj_gen_sql_group('myGroup1', NULL, NULL, '/tmp/emaj_test/alter/myFile',array['myschema1.myTbl3']);
 emaj_gen_sql_group 
--------------------
                  2
(1 row)

\! rm -R /tmp/emaj_test
-- test marks deletions
begin;
-- testing delete a single mark set before the table removal
  select emaj.emaj_delete_mark_group('myGroup1','Mk2c');
 emaj_delete_mark_group 
------------------------
                      1
(1 row)

  select * from emaj.emaj_mark where mark_group = 'myGroup1' and mark_name = 'Mk2b';
 mark_group | mark_name | mark_id | mark_time_id | mark_is_deleted | mark_is_rlbk_protected | mark_comment | mark_log_rows_before_next | mark_logged_rlbk_target_mark 
------------+-----------+---------+--------------+-----------------+------------------------+--------------+---------------------------+------------------------------
 myGroup1   | Mk2b      |    6019 |         6056 | f               | f                      |              |                         2 | 
(1 row)

-- testing marks deletion (delete all marks before the alter_group)
  select emaj.emaj_delete_before_mark_group('myGroup1','EMAJ_LAST_MARK');
 emaj_delete_before_mark_group 
-------------------------------
                             7
(1 row)

  select 'should not exist' from pg_namespace where nspname = 'emajb';
 ?column? 
----------
(0 rows)

  select 'should not exist' from pg_class, pg_namespace 
    where relnamespace = pg_namespace.oid and relname = 'myschema1_mytbl2b_log' and nspname = 'emajb';
 ?column? 
----------
(0 rows)

rollback;
begin;
-- testing the alter_group mark deletion
  select mark_id, mark_group, mark_name, mark_time_id, mark_is_deleted, mark_is_rlbk_protected, mark_comment, mark_log_rows_before_next,
         mark_logged_rlbk_target_mark
    from emaj.emaj_mark where mark_group = 'myGroup1' order by mark_id desc limit 2;
 mark_id | mark_group |           mark_name            | mark_time_id | mark_is_deleted | mark_is_rlbk_protected | mark_comment | mark_log_rows_before_next | mark_logged_rlbk_target_mark 
---------+------------+--------------------------------+--------------+-----------------+------------------------+--------------+---------------------------+------------------------------
    6039 | myGroup1   | 2 tables removed from myGroup1 |         6081 | f               | f                      |              |                           | 
    6038 | myGroup1   | Mk2c                           |         6080 | f               | f                      |              |                         1 | 
(2 rows)

  select emaj.emaj_delete_mark_group('myGroup1','2 tables removed from myGroup1');
 emaj_delete_mark_group 
------------------------
                      1
(1 row)

  select * from emaj.emaj_relation where rel_schema = 'myschema1' and (rel_tblseq = 'myTbl3' or rel_tblseq = 'mytbl2b') order by rel_tblseq;
 rel_schema | rel_tblseq | rel_time_range | rel_group | rel_kind | rel_priority | rel_log_schema |      rel_log_table      | rel_log_dat_tsp |        rel_log_index        | rel_log_idx_tsp |     rel_log_sequence      | rel_log_function | rel_sql_columns | rel_sql_pk_columns | rel_sql_pk_eq_conditions | rel_log_seq_last_value 
------------+------------+----------------+-----------+----------+--------------+----------------+-------------------------+-----------------+-----------------------------+-----------------+---------------------------+------------------+-----------------+--------------------+--------------------------+------------------------
 myschema1  | myTbl3     | [6041,6081)    | myGroup1  | r        |           10 | emajC          | myschema1_myTbl3_log_1  | tsplog1         | myschema1_myTbl3_log_idx_1  |                 | myschema1_myTbl3_log_seq  |                  |                 |                    |                          |                      2
 myschema1  | mytbl2b    | [6041,6081)    | myGroup1  | r        |              | emajb          | myschema1_mytbl2b_log_1 | tsp log'2       | myschema1_mytbl2b_log_idx_1 | tsp log'2       | myschema1_mytbl2b_log_seq |                  |                 |                    |                          |                      0
(2 rows)

  select * from emaj.emaj_sequence where 
    sequ_name in ('myschema1_mytbl2b_log_seq', 'myschema1_myTbl3_log_seq') order by sequ_time_id desc, sequ_name limit 2;
 sequ_schema |         sequ_name         | sequ_time_id | sequ_last_val | sequ_start_val | sequ_increment |    sequ_max_val     | sequ_min_val | sequ_cache_val | sequ_is_cycled | sequ_is_called 
-------------+---------------------------+--------------+---------------+----------------+----------------+---------------------+--------------+----------------+----------------+----------------
 emajC       | myschema1_myTbl3_log_seq  |         6081 |             2 |              1 |              1 | 9223372036854775807 |            1 |              1 | f              | t
 emajb       | myschema1_mytbl2b_log_seq |         6081 |             1 |              1 |              1 | 9223372036854775807 |            1 |              1 | f              | f
(2 rows)

  select * from emaj.emaj_mark where mark_group = 'myGroup1' and mark_name = '2 tables removed from myGroup1';
 mark_group | mark_name | mark_id | mark_time_id | mark_is_deleted | mark_is_rlbk_protected | mark_comment | mark_log_rows_before_next | mark_logged_rlbk_target_mark 
------------+-----------+---------+--------------+-----------------+------------------------+--------------+---------------------------+------------------------------
(0 rows)

rollback;
begin;
-- testing marks deletion (other cases)
  select emaj.emaj_set_mark_group('myGroup1','Mk2d');
 emaj_set_mark_group 
---------------------
                   5
(1 row)

  select emaj.emaj_delete_before_mark_group('myGroup1','Mk2b');
 emaj_delete_before_mark_group 
-------------------------------
                             6
(1 row)

  select * from emaj.emaj_relation where rel_group = 'myGroup1' and not upper_inf(rel_time_range) order by 1,2;
 rel_schema | rel_tblseq | rel_time_range | rel_group | rel_kind | rel_priority | rel_log_schema |      rel_log_table      | rel_log_dat_tsp |        rel_log_index        | rel_log_idx_tsp |     rel_log_sequence      | rel_log_function | rel_sql_columns | rel_sql_pk_columns | rel_sql_pk_eq_conditions | rel_log_seq_last_value 
------------+------------+----------------+-----------+----------+--------------+----------------+-------------------------+-----------------+-----------------------------+-----------------+---------------------------+------------------+-----------------+--------------------+--------------------------+------------------------
 myschema1  | myTbl3     | [6041,6081)    | myGroup1  | r        |           10 | emajC          | myschema1_myTbl3_log_1  | tsplog1         | myschema1_myTbl3_log_idx_1  |                 | myschema1_myTbl3_log_seq  |                  |                 |                    |                          |                      2
 myschema1  | mytbl2b    | [6041,6081)    | myGroup1  | r        |              | emajb          | myschema1_mytbl2b_log_1 | tsp log'2       | myschema1_mytbl2b_log_idx_1 | tsp log'2       | myschema1_mytbl2b_log_seq |                  |                 |                    |                          |                      0
(2 rows)

  select 'found' from pg_class, pg_namespace where relnamespace = pg_namespace.oid and relname = 'myschema1_mytbl2b_log_1' and nspname = 'emajb';
 ?column? 
----------
 found
(1 row)

  select emaj.emaj_delete_before_mark_group('myGroup1','Mk2d');
 emaj_delete_before_mark_group 
-------------------------------
                             3
(1 row)

  select * from emaj.emaj_relation where rel_group = 'myGroup1' and not upper_inf(rel_time_range) order by 1,2;
 rel_schema | rel_tblseq | rel_time_range | rel_group | rel_kind | rel_priority | rel_log_schema | rel_log_table | rel_log_dat_tsp | rel_log_index | rel_log_idx_tsp | rel_log_sequence | rel_log_function | rel_sql_columns | rel_sql_pk_columns | rel_sql_pk_eq_conditions | rel_log_seq_last_value 
------------+------------+----------------+-----------+----------+--------------+----------------+---------------+-----------------+---------------+-----------------+------------------+------------------+-----------------+--------------------+--------------------------+------------------------
(0 rows)

  select 'should not exist' from pg_class, pg_namespace where relnamespace = pg_namespace.oid and relname = 'myschema1_mytbl2b_log' and nspname = 'emajb';
 ?column? 
----------
(0 rows)

rollback;
-- testing rollback and consolidation
insert into myschema1.mytbl1 values (100, 'Alter_logg', E'\\000'::bytea);
select rlbk_severity, regexp_replace(rlbk_message,E'\\d\\d\\d\\d/\\d\\d\\/\\d\\d\\ \\d\\d\\:\\d\\d:\\d\\d .*?\\)','<timestamp>)','g')
  from emaj.emaj_logged_rollback_group('myGroup1','Mk2b',true) order by 1,2;
 rlbk_severity |                                        regexp_replace                                         
---------------+-----------------------------------------------------------------------------------------------
 Notice        | 1 / 3 tables effectively processed.
 Notice        | 2 sequences processed.
 Warning       | The table myschema1."myTbl3" has been left unchanged (not in group anymore since <timestamp>)
 Warning       | The table myschema1.mytbl2b has been left unchanged (not in group anymore since <timestamp>)
(4 rows)

select emaj.emaj_rename_mark_group('myGroup1','EMAJ_LAST_MARK','Logged_Rlbk_End');
 emaj_rename_mark_group 
------------------------
 
(1 row)

update emaj.emaj_group_def set grpdef_group = 'temporarily_removed'
  where grpdef_group = 'myGroup1' and grpdef_schema = 'myschema1' and grpdef_tblseq = 'mytbl1';
select emaj.emaj_alter_group('myGroup1','2nd remove_tbl');
WARNING:  _check_fk_groups: The foreign key "mytbl4_col44_fkey" on the table "myschema1.mytbl4" references the table "myschema1.mytbl1" that is outside the groups (myGroup1).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 56 at PERFORM
PL/pgSQL function emaj.emaj_alter_group(text,text) line 6 at RETURN
 emaj_alter_group 
------------------
                4
(1 row)

select * from emaj.emaj_get_consolidable_rollbacks() where cons_group = 'myGroup1';
 cons_group | cons_target_rlbk_mark_name | cons_target_rlbk_mark_id | cons_end_rlbk_mark_name | cons_end_rlbk_mark_id | cons_rows | cons_marks 
------------+----------------------------+--------------------------+-------------------------+-----------------------+-----------+------------
 myGroup1   | Mk2b                       |                     6019 | Logged_Rlbk_End         |                  6042 |         2 |          3
(1 row)

select * from emaj.emaj_consolidate_rollback_group('myGroup1', 'Logged_Rlbk_End');
 emaj_consolidate_rollback_group 
---------------------------------
                               3
(1 row)

select count(*) from emaj.myschema1_mytbl1_log_1;   -- the log table should be empty
 count 
-------
     0
(1 row)

select rlbk_severity, regexp_replace(rlbk_message,E'\\d\\d\\d\\d/\\d\\d\\/\\d\\d\\ \\d\\d\\:\\d\\d:\\d\\d .*?\\)','<timestamp>)','g')
  from emaj.emaj_rollback_group('myGroup1','Mk2b',true) order by 1,2;
WARNING:  _check_fk_groups: The foreign key "mytbl4_col44_fkey" on the table "myschema1.mytbl4" references the table "myschema1.mytbl1" that is outside the groups (myGroup1).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean,boolean) line 67 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup, v_isAlterGroupAllowed)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean,boolean) line 22 at SQL statement
PL/pgSQL function emaj.emaj_rollback_group(text,text,boolean) line 7 at RETURN QUERY
 rlbk_severity |                                       regexp_replace                                        
---------------+---------------------------------------------------------------------------------------------
 Notice        | 0 / 2 tables effectively processed.
 Notice        | 2 sequences processed.
 Warning       | The table myschema1.mytbl1 has been left unchanged (not in group anymore since <timestamp>)
(3 rows)

-- testing group's reset
begin;
  select emaj.emaj_stop_group('myGroup1');
 emaj_stop_group 
-----------------
               4
(1 row)

  select emaj.emaj_reset_group('myGroup1');
 emaj_reset_group 
------------------
                4
(1 row)

  select * from emaj.emaj_relation where rel_group = 'myGroup1' and not upper_inf(rel_time_range) order by 1,2;
 rel_schema | rel_tblseq | rel_time_range | rel_group | rel_kind | rel_priority | rel_log_schema | rel_log_table | rel_log_dat_tsp | rel_log_index | rel_log_idx_tsp | rel_log_sequence | rel_log_function | rel_sql_columns | rel_sql_pk_columns | rel_sql_pk_eq_conditions | rel_log_seq_last_value 
------------+------------+----------------+-----------+----------+--------------+----------------+---------------+-----------------+---------------+-----------------+------------------+------------------+-----------------+--------------------+--------------------------+------------------------
(0 rows)

  select 'should not exist' from pg_namespace where nspname = 'emajb';
 ?column? 
----------
(0 rows)

  select 'should not exist' from pg_class, pg_namespace where relnamespace = pg_namespace.oid and relname = 'myschema1_mytbl2b_log' and nspname = 'emajb';
 ?column? 
----------
(0 rows)

rollback;
-- testing group's stop and start
begin;
  select emaj.emaj_stop_group('myGroup1');
 emaj_stop_group 
-----------------
               4
(1 row)

  select emaj.emaj_start_group('myGroup1');
WARNING:  _check_fk_groups: The foreign key "mytbl4_col44_fkey" on the table "myschema1.mytbl4" references the table "myschema1.mytbl1" that is outside the groups (myGroup1).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._start_groups(text[],text,boolean,boolean) line 25 at PERFORM
PL/pgSQL function emaj.emaj_start_group(text,text,boolean) line 12 at RETURN
 emaj_start_group 
------------------
                4
(1 row)

  select * from emaj.emaj_relation where rel_group = 'myGroup1' and not upper_inf(rel_time_range) order by 1,2;
 rel_schema | rel_tblseq | rel_time_range | rel_group | rel_kind | rel_priority | rel_log_schema | rel_log_table | rel_log_dat_tsp | rel_log_index | rel_log_idx_tsp | rel_log_sequence | rel_log_function | rel_sql_columns | rel_sql_pk_columns | rel_sql_pk_eq_conditions | rel_log_seq_last_value 
------------+------------+----------------+-----------+----------+--------------+----------------+---------------+-----------------+---------------+-----------------+------------------+------------------+-----------------+--------------------+--------------------------+------------------------
(0 rows)

  select 'should not exist' from pg_namespace where nspname = 'emajb';
 ?column? 
----------
(0 rows)

  select 'should not exist' from pg_class, pg_namespace where relnamespace = pg_namespace.oid and relname = 'myschema1_mytbl2b_log' and nspname = 'emajb';
 ?column? 
----------
(0 rows)

rollback;
-- testing the table drop (remove first the sequence linked to the table, otherwise an event triger fires)
begin;
  delete from emaj.emaj_group_def where grpdef_schema = 'myschema1' and grpdef_tblseq = 'myTbl3_col31_seq';
  select emaj.emaj_alter_group('myGroup1','alter_before_drop_mytbl3');
WARNING:  _check_fk_groups: The foreign key "mytbl4_col44_fkey" on the table "myschema1.mytbl4" references the table "myschema1.mytbl1" that is outside the groups (myGroup1).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 56 at PERFORM
PL/pgSQL function emaj.emaj_alter_group(text,text) line 6 at RETURN
 emaj_alter_group 
------------------
                3
(1 row)

  drop table mySchema1."myTbl3";
rollback;
-- re-add all removed tables
update emaj.emaj_group_def set grpdef_group = 'myGroup1' where grpdef_group = 'temporarily_removed';
select emaj.emaj_alter_group('myGroup1', 'tables re-added to myGroup1');
NOTICE:  table "myschema1_myTbl3_log" does not exist, skipping
CONTEXT:  SQL statement "DROP TABLE IF EXISTS "emajC"."myschema1_myTbl3_log""
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,bigint,boolean) line 66 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_timeId, v_isRollbackable)"
PL/pgSQL function emaj._add_tbl(emaj.emaj_alter_plan,bigint) line 24 at PERFORM
SQL statement "SELECT emaj._add_tbl(r_plan, v_timeId)"
PL/pgSQL function emaj._alter_exec(bigint) line 121 at PERFORM
SQL statement "SELECT emaj._alter_exec(v_timeId)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 44 at PERFORM
PL/pgSQL function emaj.emaj_alter_group(text,text) line 6 at RETURN
NOTICE:  trigger "emaj_log_trg" for table "myschema1.myTbl3" does not exist, skipping
CONTEXT:  SQL statement "DROP TRIGGER IF EXISTS emaj_log_trg ON myschema1."myTbl3""
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,bigint,boolean) line 120 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_timeId, v_isRollbackable)"
PL/pgSQL function emaj._add_tbl(emaj.emaj_alter_plan,bigint) line 24 at PERFORM
SQL statement "SELECT emaj._add_tbl(r_plan, v_timeId)"
PL/pgSQL function emaj._alter_exec(bigint) line 121 at PERFORM
SQL statement "SELECT emaj._alter_exec(v_timeId)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 44 at PERFORM
PL/pgSQL function emaj.emaj_alter_group(text,text) line 6 at RETURN
NOTICE:  trigger "emaj_trunc_trg" for table "myschema1.myTbl3" does not exist, skipping
CONTEXT:  SQL statement "DROP TRIGGER IF EXISTS emaj_trunc_trg ON myschema1."myTbl3""
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,bigint,boolean) line 127 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_timeId, v_isRollbackable)"
PL/pgSQL function emaj._add_tbl(emaj.emaj_alter_plan,bigint) line 24 at PERFORM
SQL statement "SELECT emaj._add_tbl(r_plan, v_timeId)"
PL/pgSQL function emaj._alter_exec(bigint) line 121 at PERFORM
SQL statement "SELECT emaj._alter_exec(v_timeId)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 44 at PERFORM
PL/pgSQL function emaj.emaj_alter_group(text,text) line 6 at RETURN
NOTICE:  table "myschema1_mytbl1_log" does not exist, skipping
CONTEXT:  SQL statement "DROP TABLE IF EXISTS emaj.myschema1_mytbl1_log"
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,bigint,boolean) line 66 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_timeId, v_isRollbackable)"
PL/pgSQL function emaj._add_tbl(emaj.emaj_alter_plan,bigint) line 24 at PERFORM
SQL statement "SELECT emaj._add_tbl(r_plan, v_timeId)"
PL/pgSQL function emaj._alter_exec(bigint) line 121 at PERFORM
SQL statement "SELECT emaj._alter_exec(v_timeId)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 44 at PERFORM
PL/pgSQL function emaj.emaj_alter_group(text,text) line 6 at RETURN
NOTICE:  trigger "emaj_log_trg" for table "myschema1.mytbl1" does not exist, skipping
CONTEXT:  SQL statement "DROP TRIGGER IF EXISTS emaj_log_trg ON myschema1.mytbl1"
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,bigint,boolean) line 120 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_timeId, v_isRollbackable)"
PL/pgSQL function emaj._add_tbl(emaj.emaj_alter_plan,bigint) line 24 at PERFORM
SQL statement "SELECT emaj._add_tbl(r_plan, v_timeId)"
PL/pgSQL function emaj._alter_exec(bigint) line 121 at PERFORM
SQL statement "SELECT emaj._alter_exec(v_timeId)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 44 at PERFORM
PL/pgSQL function emaj.emaj_alter_group(text,text) line 6 at RETURN
NOTICE:  trigger "emaj_trunc_trg" for table "myschema1.mytbl1" does not exist, skipping
CONTEXT:  SQL statement "DROP TRIGGER IF EXISTS emaj_trunc_trg ON myschema1.mytbl1"
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,bigint,boolean) line 127 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_timeId, v_isRollbackable)"
PL/pgSQL function emaj._add_tbl(emaj.emaj_alter_plan,bigint) line 24 at PERFORM
SQL statement "SELECT emaj._add_tbl(r_plan, v_timeId)"
PL/pgSQL function emaj._alter_exec(bigint) line 121 at PERFORM
SQL statement "SELECT emaj._alter_exec(v_timeId)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 44 at PERFORM
PL/pgSQL function emaj.emaj_alter_group(text,text) line 6 at RETURN
NOTICE:  table "myschema1_mytbl2b_log" does not exist, skipping
CONTEXT:  SQL statement "DROP TABLE IF EXISTS emajb.myschema1_mytbl2b_log"
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,bigint,boolean) line 66 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_timeId, v_isRollbackable)"
PL/pgSQL function emaj._add_tbl(emaj.emaj_alter_plan,bigint) line 24 at PERFORM
SQL statement "SELECT emaj._add_tbl(r_plan, v_timeId)"
PL/pgSQL function emaj._alter_exec(bigint) line 121 at PERFORM
SQL statement "SELECT emaj._alter_exec(v_timeId)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 44 at PERFORM
PL/pgSQL function emaj.emaj_alter_group(text,text) line 6 at RETURN
NOTICE:  trigger "emaj_log_trg" for table "myschema1.mytbl2b" does not exist, skipping
CONTEXT:  SQL statement "DROP TRIGGER IF EXISTS emaj_log_trg ON myschema1.mytbl2b"
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,bigint,boolean) line 120 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_timeId, v_isRollbackable)"
PL/pgSQL function emaj._add_tbl(emaj.emaj_alter_plan,bigint) line 24 at PERFORM
SQL statement "SELECT emaj._add_tbl(r_plan, v_timeId)"
PL/pgSQL function emaj._alter_exec(bigint) line 121 at PERFORM
SQL statement "SELECT emaj._alter_exec(v_timeId)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 44 at PERFORM
PL/pgSQL function emaj.emaj_alter_group(text,text) line 6 at RETURN
NOTICE:  trigger "emaj_trunc_trg" for table "myschema1.mytbl2b" does not exist, skipping
CONTEXT:  SQL statement "DROP TRIGGER IF EXISTS emaj_trunc_trg ON myschema1.mytbl2b"
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,bigint,boolean) line 127 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_timeId, v_isRollbackable)"
PL/pgSQL function emaj._add_tbl(emaj.emaj_alter_plan,bigint) line 24 at PERFORM
SQL statement "SELECT emaj._add_tbl(r_plan, v_timeId)"
PL/pgSQL function emaj._alter_exec(bigint) line 121 at PERFORM
SQL statement "SELECT emaj._alter_exec(v_timeId)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 44 at PERFORM
PL/pgSQL function emaj.emaj_alter_group(text,text) line 6 at RETURN
 emaj_alter_group 
------------------
                7
(1 row)

select emaj.emaj_cleanup_rollback_state();
 emaj_cleanup_rollback_state 
-----------------------------
                           0
(1 row)

-- set an intermediate mark
select emaj.emaj_set_mark_groups('{"myGroup1","myGroup2"}','Mk3');
 emaj_set_mark_groups 
----------------------
                   15
(1 row)

select mark_id, mark_group, regexp_replace(mark_name,E'\\d\\d\.\\d\\d\\.\\d\\d\\.\\d\\d\\d','%','g'), mark_time_id, mark_is_deleted,
       mark_is_rlbk_protected, mark_comment, mark_log_rows_before_next, mark_logged_rlbk_target_mark
  from emaj.emaj_mark where mark_id > 6000 order by mark_id;
 mark_id | mark_group |       regexp_replace        | mark_time_id | mark_is_deleted | mark_is_rlbk_protected | mark_comment | mark_log_rows_before_next | mark_logged_rlbk_target_mark 
---------+------------+-----------------------------+--------------+-----------------+------------------------+--------------+---------------------------+------------------------------
    6008 | myGroup1   | Mk1                         |         6050 | f               | f                      |              |                         0 | 
    6009 | myGroup2   | Mk1                         |         6050 | f               | f                      |              |                         0 | 
    6010 | myGroup1   | Priority Changed            |         6051 | f               | f                      |              |                         0 | 
    6011 | myGroup1   | Attributes_changed          |         6052 | f               | f                      |              |                         0 | 
    6012 | myGroup2   | Attributes_changed          |         6052 | f               | f                      |              |                         0 | 
    6013 | myGroup1   | Mk2                         |         6053 | f               | f                      |              |                         0 | 
    6014 | myGroup2   | Mk2                         |         6053 | f               | f                      |              |                         0 | 
    6015 | myGroup1   | ALTER_%                     |         6054 | f               | f                      |              |                         0 | 
    6016 | myGroup2   | ALTER_%                     |         6054 | f               | f                      |              |                         0 | 
    6017 | myGroup1   | ALTER_%                     |         6055 | f               | f                      |              |                         0 | 
    6018 | myGroup2   | ALTER_%                     |         6055 | f               | f                      |              |                         0 | 
    6019 | myGroup1   | Mk2b                        |         6056 | f               | f                      |              |                         0 | 
    6027 | myGroup2   | ADD_TBL test                |         6066 | f               | f                      |              |                         0 | 
    6048 | myGroup1   | tables re-added to myGroup1 |         6093 | f               | f                      |              |                         0 | 
    6049 | myGroup1   | Mk3                         |         6094 | f               | f                      |              |                           | 
    6050 | myGroup2   | Mk3                         |         6094 | f               | f                      |              |                           | 
(16 rows)

-- estimate a rollback crossing alter group operations
delete from emaj.emaj_rlbk_stat;    -- to avoid unstable results in estimates
select emaj.emaj_estimate_rollback_groups('{"myGroup1","myGroup2"}','Mk1',false);
 emaj_estimate_rollback_groups 
-------------------------------
 @ 0.015 secs
(1 row)

-- execute a rollback not crossing any alter group operation
select * from emaj.emaj_rollback_groups('{"myGroup1","myGroup2"}','Mk3',false) order by 1,2;
WARNING:  _check_fk_groups: The foreign key "mytbl6_col61_fkey" on the table "myschema2.mytbl6" references the table "myschema2.mytbl7" that is outside the groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean,boolean) line 67 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup, v_isAlterGroupAllowed)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean,boolean) line 22 at SQL statement
PL/pgSQL function emaj.emaj_rollback_groups(text[],text,boolean) line 7 at RETURN QUERY
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean,boolean) line 67 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup, v_isAlterGroupAllowed)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean,boolean) line 22 at SQL statement
PL/pgSQL function emaj.emaj_rollback_groups(text[],text,boolean) line 7 at RETURN QUERY
 rlbk_severity |             rlbk_message             
---------------+--------------------------------------
 Notice        | 0 / 11 tables effectively processed.
 Notice        | 4 sequences processed.
(2 rows)

-- execute rollbacks crossing alter group operations
select emaj.emaj_logged_rollback_groups('{"myGroup1","myGroup2"}','Mk2');
ERROR:  _rlbk_check: This rollback operation would cross some previously executed alter group operations, which is not allowed by the current function parameters.
CONTEXT:  SQL statement "SELECT emaj._rlbk_check(v_groupNames, v_mark, v_isAlterGroupAllowed, FALSE)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean,boolean) line 22 at SQL statement
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup, v_isAlterGroupAllowed)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean,boolean) line 22 at SQL statement
SQL statement "SELECT rlbk_message::INT FROM emaj._rlbk_groups(v_groupNames, v_mark, TRUE, TRUE, NULL) WHERE rlbk_severity = 'Notice'"
PL/pgSQL function emaj.emaj_logged_rollback_groups(text[],text) line 11 at RETURN
select * from emaj.emaj_logged_rollback_groups('{"myGroup1","myGroup2"}','Mk2',false) order by 1,2;
ERROR:  _rlbk_check: This rollback operation would cross some previously executed alter group operations, which is not allowed by the current function parameters.
CONTEXT:  SQL statement "SELECT emaj._rlbk_check(v_groupNames, v_mark, v_isAlterGroupAllowed, FALSE)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean,boolean) line 22 at SQL statement
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup, v_isAlterGroupAllowed)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean,boolean) line 22 at SQL statement
PL/pgSQL function emaj.emaj_logged_rollback_groups(text[],text,boolean) line 11 at RETURN QUERY
select rlbk_severity, regexp_replace(rlbk_message,E'\\d\\d\\d\\d/\\d\\d\\/\\d\\d\\ \\d\\d\\:\\d\\d:\\d\\d .*?\\)','<timestamp>)','g')
  from emaj.emaj_logged_rollback_groups('{"myGroup1","myGroup2"}','Mk2',true) order by 1,2;
WARNING:  _check_fk_groups: The foreign key "mytbl6_col61_fkey" on the table "myschema2.mytbl6" references the table "myschema2.mytbl7" that is outside the groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean,boolean) line 67 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup, v_isAlterGroupAllowed)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean,boolean) line 22 at SQL statement
PL/pgSQL function emaj.emaj_logged_rollback_groups(text[],text,boolean) line 11 at RETURN QUERY
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean,boolean) line 67 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup, v_isAlterGroupAllowed)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean,boolean) line 22 at SQL statement
PL/pgSQL function emaj.emaj_logged_rollback_groups(text[],text,boolean) line 11 at RETURN QUERY
 rlbk_severity |                                             regexp_replace                                             
---------------+--------------------------------------------------------------------------------------------------------
 Notice        | 0 / 11 tables effectively processed.
 Notice        | 4 sequences processed.
 Warning       | Tables group change not rolled back: E-Maj log schema for myschema2."myTbl3"
 Warning       | Tables group change not rolled back: E-Maj names prefix for myschema1."myTbl3"
 Warning       | Tables group change not rolled back: E-Maj priority for myschema1.mytbl1
 Warning       | Tables group change not rolled back: log data tablespace for myschema1.mytbl2b
 Warning       | Tables group change not rolled back: log index tablespace for myschema2.mytbl6
 Warning       | The table myschema1."myTbl3" has only been rolled back up to its latest group attachment (<timestamp>)
 Warning       | The table myschema1.mytbl1 has only been rolled back up to its latest group attachment (<timestamp>)
 Warning       | The table myschema1.mytbl2b has only been rolled back up to its latest group attachment (<timestamp>)
(10 rows)

select * from emaj.emaj_rollback_groups('{"myGroup1","myGroup2"}','Mk2',false) order by 1,2;
WARNING:  _check_fk_groups: The foreign key "mytbl6_col61_fkey" on the table "myschema2.mytbl6" references the table "myschema2.mytbl7" that is outside the groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean,boolean) line 67 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup, v_isAlterGroupAllowed)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean,boolean) line 22 at SQL statement
PL/pgSQL function emaj.emaj_rollback_groups(text[],text,boolean) line 7 at RETURN QUERY
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean,boolean) line 67 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup, v_isAlterGroupAllowed)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean,boolean) line 22 at SQL statement
PL/pgSQL function emaj.emaj_rollback_groups(text[],text,boolean) line 7 at RETURN QUERY
 rlbk_severity |             rlbk_message             
---------------+--------------------------------------
 Notice        | 0 / 11 tables effectively processed.
 Notice        | 4 sequences processed.
(2 rows)

select * from emaj.emaj_rollback_groups('{"myGroup1","myGroup2"}','Mk1',true) order by 1,2;
WARNING:  _check_fk_groups: The foreign key "mytbl6_col61_fkey" on the table "myschema2.mytbl6" references the table "myschema2.mytbl7" that is outside the groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean,boolean) line 67 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup, v_isAlterGroupAllowed)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean,boolean) line 22 at SQL statement
PL/pgSQL function emaj.emaj_rollback_groups(text[],text,boolean) line 7 at RETURN QUERY
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean,boolean) line 67 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup, v_isAlterGroupAllowed)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean,boolean) line 22 at SQL statement
PL/pgSQL function emaj.emaj_rollback_groups(text[],text,boolean) line 7 at RETURN QUERY
 rlbk_severity |                                  rlbk_message                                  
---------------+--------------------------------------------------------------------------------
 Notice        | 0 / 11 tables effectively processed.
 Notice        | 4 sequences processed.
 Warning       | Tables group change not rolled back: E-Maj log schema for myschema2."myTbl3"
 Warning       | Tables group change not rolled back: E-Maj names prefix for myschema1."myTbl3"
 Warning       | Tables group change not rolled back: E-Maj priority for myschema1.mytbl1
 Warning       | Tables group change not rolled back: log data tablespace for myschema1.mytbl2b
 Warning       | Tables group change not rolled back: log index tablespace for myschema2.mytbl6
(7 rows)

-- execute additional rollback not crossing alter operations anymore
select * from emaj.emaj_logged_rollback_groups('{"myGroup1","myGroup2"}','Mk1',false) order by 1,2;
WARNING:  _check_fk_groups: The foreign key "mytbl6_col61_fkey" on the table "myschema2.mytbl6" references the table "myschema2.mytbl7" that is outside the groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean,boolean) line 67 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup, v_isAlterGroupAllowed)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean,boolean) line 22 at SQL statement
PL/pgSQL function emaj.emaj_logged_rollback_groups(text[],text,boolean) line 11 at RETURN QUERY
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean,boolean) line 67 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup, v_isAlterGroupAllowed)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean,boolean) line 22 at SQL statement
PL/pgSQL function emaj.emaj_logged_rollback_groups(text[],text,boolean) line 11 at RETURN QUERY
 rlbk_severity |             rlbk_message             
---------------+--------------------------------------
 Notice        | 0 / 11 tables effectively processed.
 Notice        | 4 sequences processed.
(2 rows)

select * from emaj.emaj_rollback_groups('{"myGroup1","myGroup2"}','Mk1',false) order by 1,2;
WARNING:  _check_fk_groups: The foreign key "mytbl6_col61_fkey" on the table "myschema2.mytbl6" references the table "myschema2.mytbl7" that is outside the groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean,boolean) line 67 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup, v_isAlterGroupAllowed)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean,boolean) line 22 at SQL statement
PL/pgSQL function emaj.emaj_rollback_groups(text[],text,boolean) line 7 at RETURN QUERY
WARNING:  _check_fk_groups: The table "myschema2.mytbl6" is referenced by the foreign key "mytbl8_col81_fkey" on the table "myschema2.mytbl8" that is outside the groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._rlbk_init(text[],text,boolean,integer,boolean,boolean) line 67 at PERFORM
SQL statement "SELECT emaj._rlbk_init(v_groupNames, v_mark, v_isLoggedRlbk, 1, v_multiGroup, v_isAlterGroupAllowed)"
PL/pgSQL function emaj._rlbk_groups(text[],text,boolean,boolean,boolean) line 22 at SQL statement
PL/pgSQL function emaj.emaj_rollback_groups(text[],text,boolean) line 7 at RETURN QUERY
 rlbk_severity |             rlbk_message             
---------------+--------------------------------------
 Notice        | 0 / 11 tables effectively processed.
 Notice        | 4 sequences processed.
(2 rows)

-- empty logging groups
begin;
  delete from emaj.emaj_group_def where grpdef_group IN ('myGroup1','myGroup2');
  select emaj.emaj_alter_groups('{"myGroup1","myGroup2"}','empty groups');
 emaj_alter_groups 
-------------------
                 0
(1 row)

  select * from emaj.emaj_relation where rel_group IN ('myGroup1','myGroup2') order by rel_schema, rel_tblseq, rel_time_range;
 rel_schema |    rel_tblseq     | rel_time_range | rel_group | rel_kind | rel_priority | rel_log_schema |      rel_log_table       | rel_log_dat_tsp |        rel_log_index         | rel_log_idx_tsp |      rel_log_sequence      | rel_log_function | rel_sql_columns | rel_sql_pk_columns | rel_sql_pk_eq_conditions | rel_log_seq_last_value 
------------+-------------------+----------------+-----------+----------+--------------+----------------+--------------------------+-----------------+------------------------------+-----------------+----------------------------+------------------+-----------------+--------------------+--------------------------+------------------------
 myschema1  | myTbl3            | [6041,6081)    | myGroup1  | r        |           10 | emajC          | myschema1_myTbl3_log_1   | tsplog1         | myschema1_myTbl3_log_idx_1   |                 | myschema1_myTbl3_log_seq   |                  |                 |                    |                          |                      2
 myschema1  | myTbl3            | [6093,6103)    | myGroup1  | r        |           10 | emajC          | myschema1_myTbl3_log_2   | tsplog1         | myschema1_myTbl3_log_idx_2   |                 | myschema1_myTbl3_log_seq   |                  |                 |                    |                          |                      2
 myschema1  | myTbl3_col31_seq  | [6041,6103)    | myGroup1  | S        |            1 |                |                          |                 |                              |                 |                            |                  |                 |                    |                          |                       
 myschema1  | mytbl1            | [6037,6087)    | myGroup1  | r        |           20 | emaj           | myschema1_mytbl1_log_1   |                 | myschema1_mytbl1_log_idx_1   |                 | myschema1_mytbl1_log_seq   |                  |                 |                    |                          |                      2
 myschema1  | mytbl1            | [6093,6103)    | myGroup1  | r        |           20 | emaj           | myschema1_mytbl1_log_2   |                 | myschema1_mytbl1_log_idx_2   |                 | myschema1_mytbl1_log_seq   |                  |                 |                    |                          |                      2
 myschema1  | mytbl2            | [6002,6103)    | myGroup1  | r        |              | emaj           | myschema1_mytbl2_log_1   | tsplog1         | myschema1_mytbl2_log_idx_1   | tsplog1         | myschema1_mytbl2_log_seq   |                  |                 |                    |                          |                      0
 myschema1  | mytbl2b           | [6041,6081)    | myGroup1  | r        |              | emajb          | myschema1_mytbl2b_log_1  | tsp log'2       | myschema1_mytbl2b_log_idx_1  | tsp log'2       | myschema1_mytbl2b_log_seq  |                  |                 |                    |                          |                      0
 myschema1  | mytbl2b           | [6093,6103)    | myGroup1  | r        |              | emajb          | myschema1_mytbl2b_log_2  | tsp log'2       | myschema1_mytbl2b_log_idx_2  | tsp log'2       | myschema1_mytbl2b_log_seq  |                  |                 |                    |                          |                      0
 myschema1  | mytbl2b_col20_seq | [6002,6103)    | myGroup1  | S        |              |                |                          |                 |                              |                 |                            |                  |                 |                    |                          |                       
 myschema1  | mytbl4            | [6012,6103)    | myGroup1  | r        |           20 | emaj           | myschema1_mytbl4_log_1   | tsplog1         | myschema1_mytbl4_log_idx_1   | tsp log'2       | myschema1_mytbl4_log_seq   |                  |                 |                    |                          |                      0
 myschema2  | myTbl3            | [6003,6103)    | myGroup2  | r        |              | emajC          | myschema2_myTbl3_log_1   |                 | myschema2_myTbl3_log_idx_1   |                 | myschema2_myTbl3_log_seq   |                  |                 |                    |                          |                      0
 myschema2  | myTbl3_col31_seq  | [6003,6103)    | myGroup2  | S        |              |                |                          |                 |                              |                 |                            |                  |                 |                    |                          |                       
 myschema2  | myseq1            | [6003,6103)    | myGroup2  | S        |              |                |                          |                 |                              |                 |                            |                  |                 |                    |                          |                       
 myschema2  | mytbl1            | [6003,6103)    | myGroup2  | r        |              | emaj           | myschema2_mytbl1_log_1   |                 | myschema2_mytbl1_log_idx_1   |                 | myschema2_mytbl1_log_seq   |                  |                 |                    |                          |                      0
 myschema2  | mytbl2            | [6003,6103)    | myGroup2  | r        |              | emaj           | myschema2_mytbl2_log_1   |                 | myschema2_mytbl2_log_idx_1   |                 | myschema2_mytbl2_log_seq   |                  |                 |                    |                          |                      0
 myschema2  | mytbl4            | [6041,6103)    | myGroup2  | r        |              | emaj           | myschema2_mytbl4_log_1   |                 | myschema2_mytbl4_log_idx_1   |                 | myschema2_mytbl4_log_seq   |                  |                 |                    |                          |                      0
 myschema2  | mytbl5            | [6003,6103)    | myGroup2  | r        |              | emaj           | otherPrefix4mytbl5_log_1 |                 | otherPrefix4mytbl5_log_idx_1 |                 | otherPrefix4mytbl5_log_seq |                  |                 |                    |                          |                      0
 myschema2  | mytbl6            | [6003,6103)    | myGroup2  | r        |              | emaj           | myschema2_mytbl6_log_1   |                 | myschema2_mytbl6_log_idx_1   |                 | myschema2_mytbl6_log_seq   |                  |                 |                    |                          |                      0
 myschema2  | mytbl7            | [6068,6075)    | myGroup2  | r        |              | emaj           | myschema2_mytbl7_log_1   |                 | myschema2_mytbl7_log_idx_1   |                 | myschema2_mytbl7_log_seq   |                  |                 |                    |                          |                     10
 myschema2  | mytbl7            | [6076,6078)    | myGroup2  | r        |              | emaj           | myschema2_mytbl7_log_2   |                 | myschema2_mytbl7_log_idx_2   |                 | myschema2_mytbl7_log_seq   |                  |                 |                    |                          |                     11
(20 rows)

-- add one table and sequence to the empty groups
  insert into emaj.emaj_group_def values ('myGroup1','myschema1','mytbl1',20);
-- TODO: uncomment the next line once it will be possible to add a sequence to a logging group
--  insert into emaj.emaj_group_def values ('myGroup2','myschema2','myseq1');
  select emaj.emaj_alter_groups('{"myGroup1","myGroup2"}','add a single table');
NOTICE:  table "myschema1_mytbl1_log" does not exist, skipping
CONTEXT:  SQL statement "DROP TABLE IF EXISTS emaj.myschema1_mytbl1_log"
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,bigint,boolean) line 66 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_timeId, v_isRollbackable)"
PL/pgSQL function emaj._add_tbl(emaj.emaj_alter_plan,bigint) line 24 at PERFORM
SQL statement "SELECT emaj._add_tbl(r_plan, v_timeId)"
PL/pgSQL function emaj._alter_exec(bigint) line 121 at PERFORM
SQL statement "SELECT emaj._alter_exec(v_timeId)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 44 at PERFORM
PL/pgSQL function emaj.emaj_alter_groups(text[],text) line 6 at RETURN
NOTICE:  trigger "emaj_log_trg" for table "myschema1.mytbl1" does not exist, skipping
CONTEXT:  SQL statement "DROP TRIGGER IF EXISTS emaj_log_trg ON myschema1.mytbl1"
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,bigint,boolean) line 120 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_timeId, v_isRollbackable)"
PL/pgSQL function emaj._add_tbl(emaj.emaj_alter_plan,bigint) line 24 at PERFORM
SQL statement "SELECT emaj._add_tbl(r_plan, v_timeId)"
PL/pgSQL function emaj._alter_exec(bigint) line 121 at PERFORM
SQL statement "SELECT emaj._alter_exec(v_timeId)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 44 at PERFORM
PL/pgSQL function emaj.emaj_alter_groups(text[],text) line 6 at RETURN
NOTICE:  trigger "emaj_trunc_trg" for table "myschema1.mytbl1" does not exist, skipping
CONTEXT:  SQL statement "DROP TRIGGER IF EXISTS emaj_trunc_trg ON myschema1.mytbl1"
PL/pgSQL function emaj._create_tbl(emaj.emaj_group_def,bigint,boolean) line 127 at EXECUTE statement
SQL statement "SELECT emaj._create_tbl(r_grpdef, v_timeId, v_isRollbackable)"
PL/pgSQL function emaj._add_tbl(emaj.emaj_alter_plan,bigint) line 24 at PERFORM
SQL statement "SELECT emaj._add_tbl(r_plan, v_timeId)"
PL/pgSQL function emaj._alter_exec(bigint) line 121 at PERFORM
SQL statement "SELECT emaj._alter_exec(v_timeId)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 44 at PERFORM
PL/pgSQL function emaj.emaj_alter_groups(text[],text) line 6 at RETURN
WARNING:  _check_fk_groups: The table "myschema1.mytbl1" is referenced by the foreign key "mytbl4_col44_fkey" on the table "myschema1.mytbl4" that is outside the groups (myGroup1,myGroup2).
CONTEXT:  SQL statement "SELECT emaj._check_fk_groups(v_groupNames)"
PL/pgSQL function emaj._alter_groups(text[],boolean,text) line 56 at PERFORM
PL/pgSQL function emaj.emaj_alter_groups(text[],text) line 6 at RETURN
 emaj_alter_groups 
-------------------
                 1
(1 row)

  select * from emaj.emaj_relation
    where (rel_schema = 'myschema1' and rel_tblseq = 'mytbl1') or (rel_schema = 'myschema2' and rel_tblseq = 'myseq1')
    order by rel_schema, rel_tblseq, rel_time_range;
 rel_schema | rel_tblseq | rel_time_range | rel_group | rel_kind | rel_priority | rel_log_schema |     rel_log_table      | rel_log_dat_tsp |       rel_log_index        | rel_log_idx_tsp |     rel_log_sequence     |     rel_log_function      |        rel_sql_columns        | rel_sql_pk_columns |             rel_sql_pk_eq_conditions              | rel_log_seq_last_value 
------------+------------+----------------+-----------+----------+--------------+----------------+------------------------+-----------------+----------------------------+-----------------+--------------------------+---------------------------+-------------------------------+--------------------+---------------------------------------------------+------------------------
 myschema1  | mytbl1     | [6037,6087)    | myGroup1  | r        |           20 | emaj           | myschema1_mytbl1_log_1 |                 | myschema1_mytbl1_log_idx_1 |                 | myschema1_mytbl1_log_seq |                           |                               |                    |                                                   |                      2
 myschema1  | mytbl1     | [6093,6103)    | myGroup1  | r        |           20 | emaj           | myschema1_mytbl1_log_2 |                 | myschema1_mytbl1_log_idx_2 |                 | myschema1_mytbl1_log_seq |                           |                               |                    |                                                   |                      2
 myschema1  | mytbl1     | [6104,)        | myGroup1  | r        |           20 | emaj           | myschema1_mytbl1_log   |                 | myschema1_mytbl1_log_idx   |                 | myschema1_mytbl1_log_seq | myschema1_mytbl1_log_fnct | tbl.col11,tbl.col12,tbl.col13 | col11,col12        | tbl.col11 = keys.col11 AND tbl.col12 = keys.col12 |                       
 myschema2  | myseq1     | [6003,6103)    | myGroup2  | S        |              |                |                        |                 |                            |                 |                          |                           |                               |                    |                                                   |                       
(4 rows)

rollback;
-----------------------------
-- test end: check
-----------------------------
select emaj.emaj_force_drop_group('myGroup1');
 emaj_force_drop_group 
-----------------------
                     7
(1 row)

select emaj.emaj_force_drop_group('myGroup2');
 emaj_force_drop_group 
-----------------------
                     8
(1 row)

select emaj.emaj_force_drop_group('myGroup4');
 emaj_force_drop_group 
-----------------------
                     5
(1 row)

select nspname from pg_namespace where nspname like 'emaj%' order by nspname;
 nspname 
---------
 emaj
(1 row)

select sch_name from emaj.emaj_schema order by 1;
 sch_name 
----------
 emaj
(1 row)

select hist_function, hist_event, hist_object,
       regexp_replace(regexp_replace(regexp_replace(hist_wording,
            E'\\d\\d\.\\d\\d\\.\\d\\d\\.\\d\\d\\d','%','g'),
            E'\\d\\d\\d\\d/\\d\\d\\/\\d\\d\\ \\d\\d\\:\\d\\d:\\d\\d .*?\\)','<timestamp>)','g'),
            E'\\[.+\\]','(timestamp)','g'), 
       hist_user 
  from emaj.emaj_hist where hist_id > 6000 order by hist_id;
     hist_function      |          hist_event          |         hist_object          |                                               regexp_replace                                               | hist_user 
------------------------+------------------------------+------------------------------+------------------------------------------------------------------------------------------------------------+-----------
 LOCK_GROUP             | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 LOCK_GROUP             | END                          | myGroup1                     | 5 tables locked, 0 deadlock(s)                                                                             | postgres
 SET_MARK_GROUP         | BEGIN                        | myGroup1                     | STOP_%                                                                                                     | postgres
 SET_MARK_GROUP         | END                          | myGroup1                     | STOP_%                                                                                                     | postgres
 STOP_GROUP             | END                          | myGroup1                     | 7 tables/sequences processed                                                                               | postgres
 RESET_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 RESET_GROUP            | END                          | myGroup1                     | 7 tables/sequences processed                                                                               | postgres
 DROP_GROUP             | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 DROP_GROUP             | SCHEMA DROPPED               | emajb                        |                                                                                                            | postgres
 DROP_GROUP             | END                          | myGroup1                     | 7 tables/sequences processed                                                                               | postgres
 FORCE_DROP_GROUP       | BEGIN                        | myGroup2                     |                                                                                                            | postgres
 FORCE_DROP_GROUP       | SCHEMA DROPPED               | "emajC"                      |                                                                                                            | postgres
 FORCE_DROP_GROUP       | END                          | myGroup2                     | 8 tables/sequences processed                                                                               | postgres
 STOP_GROUP             | BEGIN                        | phil's group#3",             |                                                                                                            | postgres
 LOCK_GROUP             | BEGIN                        | phil's group#3",             |                                                                                                            | postgres
 LOCK_GROUP             | END                          | phil's group#3",             | 2 tables locked, 0 deadlock(s)                                                                             | postgres
 SET_MARK_GROUP         | BEGIN                        | phil's group#3",             | Simple stop mark                                                                                           | postgres
 SET_MARK_GROUP         | END                          | phil's group#3",             | Simple stop mark                                                                                           | postgres
 STOP_GROUP             | END                          | phil's group#3",             | 4 tables/sequences processed                                                                               | postgres
 DROP_GROUP             | BEGIN                        | phil's group#3",             |                                                                                                            | postgres
 DROP_GROUP             | SCHEMA DROPPED               | "emaj #'3"                   |                                                                                                            | postgres
 DROP_GROUP             | END                          | phil's group#3",             | 4 tables/sequences processed                                                                               | postgres
 FORCE_STOP_GROUP       | BEGIN                        | myGroup4                     |                                                                                                            | postgres
 LOCK_GROUP             | BEGIN                        | myGroup4                     |                                                                                                            | postgres
 LOCK_GROUP             | END                          | myGroup4                     | 5 tables locked, 0 deadlock(s)                                                                             | postgres
 FORCE_STOP_GROUP       | END                          | myGroup4                     | 5 tables/sequences processed                                                                               | postgres
 DROP_GROUP             | BEGIN                        | myGroup4                     |                                                                                                            | postgres
 DROP_GROUP             | END                          | myGroup4                     | 5 tables/sequences processed                                                                               | postgres
 FORCE_STOP_GROUP       | BEGIN                        | emptyGroup                   |                                                                                                            | postgres
 LOCK_GROUP             | BEGIN                        | emptyGroup                   |                                                                                                            | postgres
 LOCK_GROUP             | END                          | emptyGroup                   | 0 tables locked, 0 deadlock(s)                                                                             | postgres
 FORCE_STOP_GROUP       | END                          | emptyGroup                   | 0 tables/sequences processed                                                                               | postgres
 DROP_GROUP             | BEGIN                        | emptyGroup                   |                                                                                                            | postgres
 DROP_GROUP             | END                          | emptyGroup                   | 0 tables/sequences processed                                                                               | postgres
 CREATE_GROUP           | BEGIN                        | myGroup1                     | rollbackable                                                                                               | postgres
 CREATE_GROUP           | SCHEMA CREATED               | "emajC"                      |                                                                                                            | postgres
 CREATE_GROUP           | SCHEMA CREATED               | emajb                        |                                                                                                            | postgres
 CREATE_GROUP           | END                          | myGroup1                     | 7 tables/sequences processed                                                                               | postgres
 CREATE_GROUP           | BEGIN                        | myGroup2                     | rollbackable                                                                                               | postgres
 CREATE_GROUP           | END                          | myGroup2                     | 8 tables/sequences processed                                                                               | postgres
 CREATE_GROUP           | BEGIN                        | emptyGroup                   | rollbackable                                                                                               | postgres
 CREATE_GROUP           | END                          | emptyGroup                   | 0 tables/sequences processed                                                                               | postgres
 CREATE_GROUP           | BEGIN                        | myGroup4                     | rollbackable                                                                                               | postgres
 CREATE_GROUP           | END                          | myGroup4                     | 5 tables/sequences processed                                                                               | postgres
 ALTER_GROUP            | BEGIN                        | emptyGroup                   |                                                                                                            | postgres
 ALTER_GROUP            | END                          | emptyGroup                   | Timestamp Id : 6008                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6009                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | SCHEMA DROPPED               | emajb                        |                                                                                                            | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6010                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6011                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | SCHEMA CREATED               | emajb                        |                                                                                                            | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6012                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6013                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | LOG SCHEMA CHANGED           | myschema1."myTbl3"           | emajC => emaj                                                                                              | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6014                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | LOG SCHEMA CHANGED           | myschema1."myTbl3"           | emaj => emajC                                                                                              | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6015                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | NAMES PREFIX CHANGED         | myschema1."myTbl3"           | myschema1_myTbl3 => s1t3                                                                                   | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6016                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | NAMES PREFIX CHANGED         | myschema1."myTbl3"           | s1t3 => myschema1_myTbl3                                                                                   | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6017                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl2b            | tsp log'2 => Default tablespace                                                                            | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6018                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl2b            | Default tablespace => tsp log'2                                                                            | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6019                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | LOG DATA TABLESPACE CHANGED  | myschema1."myTbl3"           | tsplog1 => tsp log'2                                                                                       | postgres
 ALTER_GROUP            | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl1             | Default tablespace => tsplog1                                                                              | postgres
 ALTER_GROUP            | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl4             | tsplog1 => tsp log'2                                                                                       | postgres
 ALTER_GROUP            | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl2             | tsplog1 => tsp log'2                                                                                       | postgres
 ALTER_GROUP            | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl2b            | tsp log'2 => Default tablespace                                                                            | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6020                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | LOG DATA TABLESPACE CHANGED  | myschema1."myTbl3"           | tsp log'2 => tsplog1                                                                                       | postgres
 ALTER_GROUP            | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl1             | tsplog1 => Default tablespace                                                                              | postgres
 ALTER_GROUP            | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl4             | tsp log'2 => tsplog1                                                                                       | postgres
 ALTER_GROUP            | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl2             | tsp log'2 => tsplog1                                                                                       | postgres
 ALTER_GROUP            | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl2b            | Default tablespace => tsp log'2                                                                            | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6021                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | LOG INDEX TABLESPACE CHANGED | myschema1.mytbl2b            | tsp log'2 => Default tablespace                                                                            | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6022                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | LOG INDEX TABLESPACE CHANGED | myschema1.mytbl2b            | Default tablespace => tsp log'2                                                                            | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6023                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6024                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6025                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6026                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6027                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6028                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6029                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6030                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6031                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6032                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6033                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6034                                                                                        | postgres
 DISABLE_PROTECTION     | EVENT TRIGGERS DISABLED      |                              | emaj_protection_trg, emaj_sql_drop_trg                                                                     | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6035                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6036                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6037                                                                                        | postgres
 ENABLE_PROTECTION      | EVENT TRIGGERS ENABLED       |                              | emaj_protection_trg, emaj_sql_drop_trg                                                                     | postgres
 ALTER_GROUPS           | BEGIN                        |                              |                                                                                                            | postgres
 ALTER_GROUPS           | END                          |                              |                                                                                                            | postgres
 ALTER_GROUPS           | BEGIN                        | myGroup1,myGroup2            |                                                                                                            | postgres
 ALTER_GROUP            | SCHEMA DROPPED               | emajb                        |                                                                                                            | postgres
 ALTER_GROUPS           | END                          | myGroup1,myGroup2            | Timestamp Id : 6040                                                                                        | postgres
 ALTER_GROUPS           | BEGIN                        | myGroup1,myGroup2            |                                                                                                            | postgres
 ALTER_GROUP            | SCHEMA CREATED               | emajb                        |                                                                                                            | postgres
 ALTER_GROUPS           | END                          | myGroup1,myGroup2            | Timestamp Id : 6041                                                                                        | postgres
 ALTER_GROUPS           | BEGIN                        | myGroup1,myGroup2            |                                                                                                            | postgres
 ALTER_GROUP            | SCHEMA CREATED               | emajtmp                      |                                                                                                            | postgres
 ALTER_GROUP            | LOG SCHEMA CHANGED           | myschema2."myTbl3"           | emajC => emajtmp                                                                                           | postgres
 ALTER_GROUP            | NAMES PREFIX CHANGED         | myschema1."myTbl3"           | myschema1_myTbl3 => s1t3                                                                                   | postgres
 ALTER_GROUPS           | END                          | myGroup1,myGroup2            | Timestamp Id : 6042                                                                                        | postgres
 ALTER_GROUPS           | BEGIN                        | myGroup1,myGroup2            |                                                                                                            | postgres
 ALTER_GROUP            | LOG SCHEMA CHANGED           | myschema2."myTbl3"           | emajtmp => emajC                                                                                           | postgres
 ALTER_GROUP            | NAMES PREFIX CHANGED         | myschema1."myTbl3"           | s1t3 => myschema1_myTbl3                                                                                   | postgres
 ALTER_GROUP            | SCHEMA DROPPED               | emajtmp                      |                                                                                                            | postgres
 ALTER_GROUPS           | END                          | myGroup1,myGroup2            | Timestamp Id : 6043                                                                                        | postgres
 ALTER_GROUPS           | BEGIN                        | myGroup1,myGroup2            |                                                                                                            | postgres
 ALTER_GROUP            | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl2b            | tsp log'2 => Default tablespace                                                                            | postgres
 ALTER_GROUP            | LOG INDEX TABLESPACE CHANGED | myschema2.mytbl6             | Default tablespace => tsplog1                                                                              | postgres
 ALTER_GROUPS           | END                          | myGroup1,myGroup2            | Timestamp Id : 6044                                                                                        | postgres
 ALTER_GROUPS           | BEGIN                        | myGroup1,myGroup2            |                                                                                                            | postgres
 ALTER_GROUP            | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl2b            | Default tablespace => tsp log'2                                                                            | postgres
 ALTER_GROUP            | LOG INDEX TABLESPACE CHANGED | myschema2.mytbl6             | tsplog1 => Default tablespace                                                                              | postgres
 ALTER_GROUPS           | END                          | myGroup1,myGroup2            | Timestamp Id : 6045                                                                                        | postgres
 ALTER_GROUPS           | BEGIN                        | myGroup1,myGroup2            |                                                                                                            | postgres
 ALTER_GROUPS           | END                          | myGroup1,myGroup2            | Timestamp Id : 6046                                                                                        | postgres
 ALTER_GROUPS           | BEGIN                        | myGroup1,myGroup2            |                                                                                                            | postgres
 ALTER_GROUPS           | END                          | myGroup1,myGroup2            | Timestamp Id : 6047                                                                                        | postgres
 START_GROUPS           | BEGIN                        | myGroup1,myGroup2            | With log reset                                                                                             | postgres
 LOCK_GROUPS            | BEGIN                        | myGroup1,myGroup2            |                                                                                                            | postgres
 LOCK_GROUPS            | END                          | myGroup1,myGroup2            | 11 tables locked, 0 deadlock(s)                                                                            | postgres
 SET_MARK_GROUPS        | BEGIN                        | myGroup1,myGroup2            | Mk1                                                                                                        | postgres
 SET_MARK_GROUPS        | END                          | myGroup1,myGroup2            | Mk1                                                                                                        | postgres
 START_GROUPS           | END                          | myGroup1,myGroup2            | 15 tables/sequences processed                                                                              | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 LOCK_GROUP             | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 LOCK_GROUP             | END                          | myGroup1                     | 5 tables locked, 0 deadlock(s)                                                                             | postgres
 SET_MARK_GROUP         | BEGIN                        | myGroup1                     | Priority Changed                                                                                           | postgres
 SET_MARK_GROUP         | END                          | myGroup1                     | Priority Changed                                                                                           | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6051                                                                                        | postgres
 ALTER_GROUPS           | BEGIN                        | myGroup1,myGroup2            |                                                                                                            | postgres
 LOCK_GROUPS            | BEGIN                        | myGroup1,myGroup2            |                                                                                                            | postgres
 LOCK_GROUPS            | END                          | myGroup1,myGroup2            | 11 tables locked, 0 deadlock(s)                                                                            | postgres
 SET_MARK_GROUPS        | BEGIN                        | myGroup1,myGroup2            | Attributes_changed                                                                                         | postgres
 SET_MARK_GROUPS        | END                          | myGroup1,myGroup2            | Attributes_changed                                                                                         | postgres
 ALTER_GROUP            | LOG SCHEMA CHANGED           | myschema2."myTbl3"           | emajC => emaj                                                                                              | postgres
 ALTER_GROUP            | NAMES PREFIX CHANGED         | myschema1."myTbl3"           | myschema1_myTbl3 => s1t3                                                                                   | postgres
 ALTER_GROUP            | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl2b            | tsp log'2 => Default tablespace                                                                            | postgres
 ALTER_GROUP            | LOG INDEX TABLESPACE CHANGED | myschema2.mytbl6             | Default tablespace => tsplog1                                                                              | postgres
 ALTER_GROUPS           | END                          | myGroup1,myGroup2            | Timestamp Id : 6052                                                                                        | postgres
 SET_MARK_GROUPS        | BEGIN                        | myGroup1,myGroup2            | Mk2                                                                                                        | postgres
 LOCK_GROUPS            | BEGIN                        | myGroup1,myGroup2            |                                                                                                            | postgres
 LOCK_GROUPS            | END                          | myGroup1,myGroup2            | 11 tables locked, 0 deadlock(s)                                                                            | postgres
 SET_MARK_GROUPS        | END                          | myGroup1,myGroup2            | Mk2                                                                                                        | postgres
 ALTER_GROUPS           | BEGIN                        | myGroup1,myGroup2            |                                                                                                            | postgres
 LOCK_GROUPS            | BEGIN                        | myGroup1,myGroup2            |                                                                                                            | postgres
 LOCK_GROUPS            | END                          | myGroup1,myGroup2            | 11 tables locked, 0 deadlock(s)                                                                            | postgres
 SET_MARK_GROUPS        | BEGIN                        | myGroup1,myGroup2            | ALTER_%                                                                                                    | postgres
 SET_MARK_GROUPS        | END                          | myGroup1,myGroup2            | ALTER_%                                                                                                    | postgres
 ALTER_GROUPS           | END                          | myGroup1,myGroup2            | Timestamp Id : 6054                                                                                        | postgres
 ALTER_GROUPS           | BEGIN                        | myGroup1,myGroup2            |                                                                                                            | postgres
 LOCK_GROUPS            | BEGIN                        | myGroup1,myGroup2            |                                                                                                            | postgres
 LOCK_GROUPS            | END                          | myGroup1,myGroup2            | 11 tables locked, 0 deadlock(s)                                                                            | postgres
 SET_MARK_GROUPS        | BEGIN                        | myGroup1,myGroup2            | ALTER_%                                                                                                    | postgres
 SET_MARK_GROUPS        | END                          | myGroup1,myGroup2            | ALTER_%                                                                                                    | postgres
 ALTER_GROUP            | LOG SCHEMA CHANGED           | myschema2."myTbl3"           | emaj => emajC                                                                                              | postgres
 ALTER_GROUP            | NAMES PREFIX CHANGED         | myschema1."myTbl3"           | s1t3 => myschema1_myTbl3                                                                                   | postgres
 ALTER_GROUP            | LOG DATA TABLESPACE CHANGED  | myschema1.mytbl2b            | Default tablespace => tsp log'2                                                                            | postgres
 ALTER_GROUP            | LOG INDEX TABLESPACE CHANGED | myschema2.mytbl6             | tsplog1 => Default tablespace                                                                              | postgres
 ALTER_GROUPS           | END                          | myGroup1,myGroup2            | Timestamp Id : 6055                                                                                        | postgres
 SET_MARK_GROUP         | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 LOCK_GROUP             | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 LOCK_GROUP             | END                          | myGroup1                     | 5 tables locked, 0 deadlock(s)                                                                             | postgres
 SET_MARK_GROUP         | END                          | myGroup1                     | Mk2b                                                                                                       | postgres
 SET_MARK_GROUP         | BEGIN                        | myGroup2                     |                                                                                                            | postgres
 LOCK_GROUP             | BEGIN                        | myGroup2                     |                                                                                                            | postgres
 LOCK_GROUP             | END                          | myGroup2                     | 6 tables locked, 0 deadlock(s)                                                                             | postgres
 CLEANUP_RLBK_STATE     |                              | Rollback id 6000             | set to ABORTED                                                                                             | postgres
 CLEANUP_RLBK_STATE     |                              | Rollback id 6001             | set to ABORTED                                                                                             | postgres
 SET_MARK_GROUP         | END                          | myGroup2                     | ADD_TBL test                                                                                               | postgres
 SET_MARK_GROUP         | BEGIN                        | myGroup2                     |                                                                                                            | postgres
 LOCK_GROUP             | BEGIN                        | myGroup2                     |                                                                                                            | postgres
 LOCK_GROUP             | END                          | myGroup2                     | 6 tables locked, 0 deadlock(s)                                                                             | postgres
 SET_MARK_GROUP         | END                          | myGroup2                     | Before ADD_TBL                                                                                             | postgres
 ALTER_GROUP            | BEGIN                        | myGroup2                     |                                                                                                            | postgres
 LOCK_GROUP             | BEGIN                        | myGroup2                     |                                                                                                            | postgres
 LOCK_GROUP             | END                          | myGroup2                     | 6 tables locked, 0 deadlock(s)                                                                             | postgres
 SET_MARK_GROUP         | BEGIN                        | myGroup2                     | Alter to add mytbl7                                                                                        | postgres
 SET_MARK_GROUP         | END                          | myGroup2                     | Alter to add mytbl7                                                                                        | postgres
 ALTER_GROUP            | TABLE ADDED                  | myschema2.mytbl7             | To logging group myGroup2                                                                                  | postgres
 ALTER_GROUP            | END                          | myGroup2                     | Timestamp Id : 6068                                                                                        | postgres
 SET_MARK_GROUP         | BEGIN                        | myGroup2                     |                                                                                                            | postgres
 LOCK_GROUP             | BEGIN                        | myGroup2                     |                                                                                                            | postgres
 LOCK_GROUP             | END                          | myGroup2                     | 7 tables locked, 0 deadlock(s)                                                                             | postgres
 SET_MARK_GROUP         | END                          | myGroup2                     | Just after ADD_TBL                                                                                         | postgres
 SET_MARK_GROUP         | BEGIN                        | myGroup2                     |                                                                                                            | postgres
 LOCK_GROUP             | BEGIN                        | myGroup2                     |                                                                                                            | postgres
 LOCK_GROUP             | END                          | myGroup2                     | 7 tables locked, 0 deadlock(s)                                                                             | postgres
 SET_MARK_GROUP         | END                          | myGroup2                     | After ADD_TBL                                                                                              | postgres
 SNAP_GROUP             | BEGIN                        | myGroup2                     | /tmp/emaj_test/alter                                                                                       | postgres
 SNAP_GROUP             | END                          | myGroup2                     | 9 tables/sequences processed                                                                               | postgres
 SNAP_LOG_GROUP         | BEGIN                        | myGroup2                     | From initial mark to mark After ADD_TBL towards /tmp/emaj_test/alter                                       | postgres
 SNAP_LOG_GROUP         | END                          | myGroup2                     | 10 generated files                                                                                         | postgres
 ROLLBACK_GROUP         | BEGIN                        | myGroup2                     | Logged rollback to mark Before ADD_TBL (timestamp)                                                         | postgres
 DBLINK_OPEN_CNX        |                              | rlbk#1                       | Status = 1                                                                                                 | postgres
 LOCK_GROUP             | BEGIN                        | myGroup2                     | Rollback session #1                                                                                        | postgres
 LOCK_GROUP             | END                          | myGroup2                     | Rollback session #1: 7 tables locked, 0 deadlock(s)                                                        | postgres
 SET_MARK_GROUP         | BEGIN                        | myGroup2                     | RLBK_Before ADD_TBL_%_START                                                                                | postgres
 SET_MARK_GROUP         | END                          | myGroup2                     | RLBK_Before ADD_TBL_%_START                                                                                | postgres
 ROLLBACK_TABLE         | BEGIN                        | myschema2.mytbl7             | All log rows with emaj_gid > 11861 and <= 11864                                                            | postgres
 ROLLBACK_TABLE         | END                          | myschema2.mytbl7             | 4 rolled back primary keys                                                                                 | postgres
 ROLLBACK_SEQUENCE      |                              | myschema2."myTbl3_col31_seq" |                                                                                                            | postgres
 ROLLBACK_SEQUENCE      |                              | myschema2.myseq1             |                                                                                                            | postgres
 SET_MARK_GROUP         | BEGIN                        | myGroup2                     | RLBK_Before ADD_TBL_%_DONE                                                                                 | postgres
 SET_MARK_GROUP         | END                          | myGroup2                     | RLBK_Before ADD_TBL_%_DONE                                                                                 | postgres
 ROLLBACK_GROUP         | NOTICE                       | Rollback id 6003             | 1 / 7 tables effectively processed.                                                                        | postgres
 ROLLBACK_GROUP         | NOTICE                       | Rollback id 6003             | 2 sequences processed.                                                                                     | postgres
 ROLLBACK_GROUP         | WARNING                      | Rollback id 6003             | The table myschema2.mytbl7 has only been rolled back up to its latest group attachment (<timestamp>)       | postgres
 DBLINK_CLOSE_CNX       |                              | rlbk#1                       |                                                                                                            | postgres
 ROLLBACK_GROUP         | END                          | myGroup2                     | Rollback_id 6003, 1 tables and 2 sequences effectively processed                                           | postgres
 RENAME_MARK_GROUP      | BEGIN                        | myGroup2                     | EMAJ_LAST_MARK                                                                                             | postgres
 RENAME_MARK_GROUP      | END                          | myGroup2                     | RLBK_Before ADD_TBL_%_DONE renamed Logged_Rlbk_End                                                         | postgres
 CONSOLIDATE_RLBK_GROUP | BEGIN                        | myGroup2                     | Erase all between marks Before ADD_TBL and Logged_Rlbk_End                                                 | postgres
 CONSOLIDATE_RLBK_GROUP | END                          | myGroup2                     | 1 tables and 2 sequences processed ; 4 marks deleted                                                       | postgres
 ALTER_GROUP            | BEGIN                        | myGroup2                     |                                                                                                            | postgres
 LOCK_GROUP             | BEGIN                        | myGroup2                     |                                                                                                            | postgres
 LOCK_GROUP             | END                          | myGroup2                     | 7 tables locked, 0 deadlock(s)                                                                             | postgres
 SET_MARK_GROUP         | BEGIN                        | myGroup2                     | Alter to remove mytbl7                                                                                     | postgres
 CLEANUP_RLBK_STATE     |                              | Rollback id 6003             | set to COMMITTED                                                                                           | postgres
 SET_MARK_GROUP         | END                          | myGroup2                     | Alter to remove mytbl7                                                                                     | postgres
 ALTER_GROUP            | TABLE REMOVED                | myschema2.mytbl7             | From logging group myGroup2                                                                                | postgres
 ALTER_GROUP            | END                          | myGroup2                     | Timestamp Id : 6075                                                                                        | postgres
 ALTER_GROUP            | BEGIN                        | myGroup2                     |                                                                                                            | postgres
 LOCK_GROUP             | BEGIN                        | myGroup2                     |                                                                                                            | postgres
 LOCK_GROUP             | END                          | myGroup2                     | 6 tables locked, 0 deadlock(s)                                                                             | postgres
 SET_MARK_GROUP         | BEGIN                        | myGroup2                     | Alter to re-add mytbl7                                                                                     | postgres
 SET_MARK_GROUP         | END                          | myGroup2                     | Alter to re-add mytbl7                                                                                     | postgres
 ALTER_GROUP            | TABLE ADDED                  | myschema2.mytbl7             | To logging group myGroup2                                                                                  | postgres
 ALTER_GROUP            | END                          | myGroup2                     | Timestamp Id : 6076                                                                                        | postgres
 SNAP_LOG_GROUP         | BEGIN                        | myGroup2                     | From initial mark to current situation towards /tmp/emaj_test/alter                                        | postgres
 SNAP_LOG_GROUP         | END                          | myGroup2                     | 11 generated files                                                                                         | postgres
 ALTER_GROUP            | BEGIN                        | myGroup2                     |                                                                                                            | postgres
 LOCK_GROUP             | BEGIN                        | myGroup2                     |                                                                                                            | postgres
 LOCK_GROUP             | END                          | myGroup2                     | 7 tables locked, 0 deadlock(s)                                                                             | postgres
 SET_MARK_GROUP         | BEGIN                        | myGroup2                     | Alter to really remove mytbl7                                                                              | postgres
 SET_MARK_GROUP         | END                          | myGroup2                     | Alter to really remove mytbl7                                                                              | postgres
 ALTER_GROUP            | TABLE REMOVED                | myschema2.mytbl7             | From logging group myGroup2                                                                                | postgres
 ALTER_GROUP            | END                          | myGroup2                     | Timestamp Id : 6078                                                                                        | postgres
 ROLLBACK_GROUP         | BEGIN                        | myGroup2                     | Unlogged rollback to mark ADD_TBL test (timestamp)                                                         | postgres
 DBLINK_OPEN_CNX        |                              | rlbk#1                       | Status = 1                                                                                                 | postgres
 LOCK_GROUP             | BEGIN                        | myGroup2                     | Rollback session #1                                                                                        | postgres
 LOCK_GROUP             | END                          | myGroup2                     | Rollback session #1: 6 tables locked, 0 deadlock(s)                                                        | postgres
 ROLLBACK_GROUP         | MARK DELETED                 | myGroup2                     | mark Before ADD_TBL is deleted                                                                             | postgres
 ROLLBACK_GROUP         | MARK DELETED                 | myGroup2                     | mark Logged_Rlbk_End is deleted                                                                            | postgres
 ROLLBACK_GROUP         | MARK DELETED                 | myGroup2                     | mark Alter to remove mytbl7 is deleted                                                                     | postgres
 ROLLBACK_GROUP         | MARK DELETED                 | myGroup2                     | mark Alter to re-add mytbl7 is deleted                                                                     | postgres
 ROLLBACK_GROUP         | MARK DELETED                 | myGroup2                     | mark Alter to really remove mytbl7 is deleted                                                              | postgres
 ROLLBACK_SEQUENCE      |                              | myschema2."myTbl3_col31_seq" |                                                                                                            | postgres
 ROLLBACK_SEQUENCE      |                              | myschema2.myseq1             |                                                                                                            | postgres
 ROLLBACK_GROUP         | NOTICE                       | Rollback id 6004             | 0 / 6 tables effectively processed.                                                                        | postgres
 ROLLBACK_GROUP         | NOTICE                       | Rollback id 6004             | 2 sequences processed.                                                                                     | postgres
 ROLLBACK_GROUP         | WARNING                      | Rollback id 6004             | The table myschema2.mytbl7 has been left unchanged (not in group anymore since <timestamp>)                | postgres
 DBLINK_CLOSE_CNX       |                              | rlbk#1                       |                                                                                                            | postgres
 ROLLBACK_GROUP         | END                          | myGroup2                     | Rollback_id 6004, 0 tables and 2 sequences effectively processed                                           | postgres
 SET_MARK_GROUP         | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 LOCK_GROUP             | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 LOCK_GROUP             | END                          | myGroup1                     | 5 tables locked, 0 deadlock(s)                                                                             | postgres
 CLEANUP_RLBK_STATE     |                              | Rollback id 6004             | set to COMMITTED                                                                                           | postgres
 SET_MARK_GROUP         | END                          | myGroup1                     | Mk2c                                                                                                       | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 LOCK_GROUP             | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 LOCK_GROUP             | END                          | myGroup1                     | 5 tables locked, 0 deadlock(s)                                                                             | postgres
 SET_MARK_GROUP         | BEGIN                        | myGroup1                     | 2 tables removed from myGroup1                                                                             | postgres
 SET_MARK_GROUP         | END                          | myGroup1                     | 2 tables removed from myGroup1                                                                             | postgres
 ALTER_GROUP            | TABLE REMOVED                | myschema1."myTbl3"           | From logging group myGroup1                                                                                | postgres
 ALTER_GROUP            | TABLE REMOVED                | myschema1.mytbl2b            | From logging group myGroup1                                                                                | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6081                                                                                        | postgres
 SNAP_GROUP             | BEGIN                        | myGroup1                     | /tmp/emaj_test/alter                                                                                       | postgres
 SNAP_GROUP             | END                          | myGroup1                     | 5 tables/sequences processed                                                                               | postgres
 SNAP_LOG_GROUP         | BEGIN                        | myGroup1                     | From initial mark to current situation towards /tmp/emaj_test/alter                                        | postgres
 SNAP_LOG_GROUP         | END                          | myGroup1                     | 8 generated files                                                                                          | postgres
 GEN_SQL_GROUP          | BEGIN                        | myGroup1                     | From initial mark to current situation towards /tmp/emaj_test/alter/myFile with tables/sequences filtering | postgres
 GEN_SQL_GROUP          | END                          | myGroup1                     | 2 generated statements                                                                                     | postgres
 ROLLBACK_GROUP         | BEGIN                        | myGroup1                     | Logged rollback to mark Mk2b (timestamp)                                                                   | postgres
 DBLINK_OPEN_CNX        |                              | rlbk#1                       | Status = 1                                                                                                 | postgres
 LOCK_GROUP             | BEGIN                        | myGroup1                     | Rollback session #1                                                                                        | postgres
 LOCK_GROUP             | END                          | myGroup1                     | Rollback session #1: 3 tables locked, 0 deadlock(s)                                                        | postgres
 SET_MARK_GROUP         | BEGIN                        | myGroup1                     | RLBK_Mk2b_%_START                                                                                          | postgres
 SET_MARK_GROUP         | END                          | myGroup1                     | RLBK_Mk2b_%_START                                                                                          | postgres
 ROLLBACK_TABLE         | BEGIN                        | myschema1.mytbl1             | All log rows with emaj_gid > 11861 and <= 11875                                                            | postgres
 ROLLBACK_TABLE         | END                          | myschema1.mytbl1             | 1 rolled back primary keys                                                                                 | postgres
 ROLLBACK_SEQUENCE      |                              | myschema1."myTbl3_col31_seq" | RESTART 11                                                                                                 | postgres
 ROLLBACK_SEQUENCE      |                              | myschema1.mytbl2b_col20_seq  |                                                                                                            | postgres
 SET_MARK_GROUP         | BEGIN                        | myGroup1                     | RLBK_Mk2b_%_DONE                                                                                           | postgres
 SET_MARK_GROUP         | END                          | myGroup1                     | RLBK_Mk2b_%_DONE                                                                                           | postgres
 ROLLBACK_GROUP         | NOTICE                       | Rollback id 6006             | 1 / 3 tables effectively processed.                                                                        | postgres
 ROLLBACK_GROUP         | NOTICE                       | Rollback id 6006             | 2 sequences processed.                                                                                     | postgres
 ROLLBACK_GROUP         | WARNING                      | Rollback id 6006             | The table myschema1."myTbl3" has been left unchanged (not in group anymore since <timestamp>)              | postgres
 ROLLBACK_GROUP         | WARNING                      | Rollback id 6006             | The table myschema1.mytbl2b has been left unchanged (not in group anymore since <timestamp>)               | postgres
 DBLINK_CLOSE_CNX       |                              | rlbk#1                       |                                                                                                            | postgres
 ROLLBACK_GROUP         | END                          | myGroup1                     | Rollback_id 6006, 1 tables and 2 sequences effectively processed                                           | postgres
 RENAME_MARK_GROUP      | BEGIN                        | myGroup1                     | EMAJ_LAST_MARK                                                                                             | postgres
 RENAME_MARK_GROUP      | END                          | myGroup1                     | RLBK_Mk2b_%_DONE renamed Logged_Rlbk_End                                                                   | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 LOCK_GROUP             | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 LOCK_GROUP             | END                          | myGroup1                     | 3 tables locked, 0 deadlock(s)                                                                             | postgres
 SET_MARK_GROUP         | BEGIN                        | myGroup1                     | 2nd remove_tbl                                                                                             | postgres
 CLEANUP_RLBK_STATE     |                              | Rollback id 6006             | set to COMMITTED                                                                                           | postgres
 SET_MARK_GROUP         | END                          | myGroup1                     | 2nd remove_tbl                                                                                             | postgres
 ALTER_GROUP            | TABLE REMOVED                | myschema1.mytbl1             | From logging group myGroup1                                                                                | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6087                                                                                        | postgres
 CONSOLIDATE_RLBK_GROUP | BEGIN                        | myGroup1                     | Erase all between marks Mk2b and Logged_Rlbk_End                                                           | postgres
 CONSOLIDATE_RLBK_GROUP | END                          | myGroup1                     | 1 tables and 2 sequences processed ; 3 marks deleted                                                       | postgres
 ROLLBACK_GROUP         | BEGIN                        | myGroup1                     | Unlogged rollback to mark Mk2b (timestamp)                                                                 | postgres
 DBLINK_OPEN_CNX        |                              | rlbk#1                       | Status = 1                                                                                                 | postgres
 LOCK_GROUP             | BEGIN                        | myGroup1                     | Rollback session #1                                                                                        | postgres
 LOCK_GROUP             | END                          | myGroup1                     | Rollback session #1: 2 tables locked, 0 deadlock(s)                                                        | postgres
 ROLLBACK_GROUP         | MARK DELETED                 | myGroup1                     | mark Logged_Rlbk_End is deleted                                                                            | postgres
 ROLLBACK_GROUP         | MARK DELETED                 | myGroup1                     | mark 2nd remove_tbl is deleted                                                                             | postgres
 ROLLBACK_SEQUENCE      |                              | myschema1."myTbl3_col31_seq" |                                                                                                            | postgres
 ROLLBACK_SEQUENCE      |                              | myschema1.mytbl2b_col20_seq  |                                                                                                            | postgres
 ROLLBACK_GROUP         | NOTICE                       | Rollback id 6007             | 0 / 2 tables effectively processed.                                                                        | postgres
 ROLLBACK_GROUP         | NOTICE                       | Rollback id 6007             | 2 sequences processed.                                                                                     | postgres
 ROLLBACK_GROUP         | WARNING                      | Rollback id 6007             | The table myschema1.mytbl1 has been left unchanged (not in group anymore since <timestamp>)                | postgres
 DBLINK_CLOSE_CNX       |                              | rlbk#1                       |                                                                                                            | postgres
 ROLLBACK_GROUP         | END                          | myGroup1                     | Rollback_id 6007, 0 tables and 2 sequences effectively processed                                           | postgres
 ALTER_GROUP            | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 LOCK_GROUP             | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 LOCK_GROUP             | END                          | myGroup1                     | 2 tables locked, 0 deadlock(s)                                                                             | postgres
 SET_MARK_GROUP         | BEGIN                        | myGroup1                     | tables re-added to myGroup1                                                                                | postgres
 CLEANUP_RLBK_STATE     |                              | Rollback id 6007             | set to COMMITTED                                                                                           | postgres
 SET_MARK_GROUP         | END                          | myGroup1                     | tables re-added to myGroup1                                                                                | postgres
 ALTER_GROUP            | TABLE ADDED                  | myschema1."myTbl3"           | To logging group myGroup1                                                                                  | postgres
 ALTER_GROUP            | TABLE ADDED                  | myschema1.mytbl1             | To logging group myGroup1                                                                                  | postgres
 ALTER_GROUP            | TABLE ADDED                  | myschema1.mytbl2b            | To logging group myGroup1                                                                                  | postgres
 ALTER_GROUP            | END                          | myGroup1                     | Timestamp Id : 6093                                                                                        | postgres
 SET_MARK_GROUPS        | BEGIN                        | myGroup1,myGroup2            | Mk3                                                                                                        | postgres
 LOCK_GROUPS            | BEGIN                        | myGroup1,myGroup2            |                                                                                                            | postgres
 LOCK_GROUPS            | END                          | myGroup1,myGroup2            | 11 tables locked, 0 deadlock(s)                                                                            | postgres
 SET_MARK_GROUPS        | END                          | myGroup1,myGroup2            | Mk3                                                                                                        | postgres
 ROLLBACK_GROUPS        | BEGIN                        | myGroup1,myGroup2            | Unlogged rollback to mark Mk3 (timestamp)                                                                  | postgres
 DBLINK_OPEN_CNX        |                              | rlbk#1                       | Status = 1                                                                                                 | postgres
 LOCK_GROUP             | BEGIN                        | myGroup1,myGroup2            | Rollback session #1                                                                                        | postgres
 LOCK_GROUP             | END                          | myGroup1,myGroup2            | Rollback session #1: 11 tables locked, 0 deadlock(s)                                                       | postgres
 ROLLBACK_SEQUENCE      |                              | myschema1."myTbl3_col31_seq" |                                                                                                            | postgres
 ROLLBACK_SEQUENCE      |                              | myschema1.mytbl2b_col20_seq  |                                                                                                            | postgres
 ROLLBACK_SEQUENCE      |                              | myschema2."myTbl3_col31_seq" |                                                                                                            | postgres
 ROLLBACK_SEQUENCE      |                              | myschema2.myseq1             |                                                                                                            | postgres
 ROLLBACK_GROUPS        | NOTICE                       | Rollback id 6008             | 0 / 11 tables effectively processed.                                                                       | postgres
 ROLLBACK_GROUPS        | NOTICE                       | Rollback id 6008             | 4 sequences processed.                                                                                     | postgres
 DBLINK_CLOSE_CNX       |                              | rlbk#1                       |                                                                                                            | postgres
 ROLLBACK_GROUPS        | END                          | myGroup1,myGroup2            | Rollback_id 6008, 0 tables and 4 sequences effectively processed                                           | postgres
 ROLLBACK_GROUPS        | BEGIN                        | myGroup1,myGroup2            | Logged rollback to mark Mk2 (timestamp)                                                                    | postgres
 DBLINK_OPEN_CNX        |                              | rlbk#1                       | Status = 1                                                                                                 | postgres
 LOCK_GROUP             | BEGIN                        | myGroup1,myGroup2            | Rollback session #1                                                                                        | postgres
 LOCK_GROUP             | END                          | myGroup1,myGroup2            | Rollback session #1: 11 tables locked, 0 deadlock(s)                                                       | postgres
 SET_MARK_GROUPS        | BEGIN                        | myGroup1,myGroup2            | RLBK_Mk2_%_START                                                                                           | postgres
 CLEANUP_RLBK_STATE     |                              | Rollback id 6008             | set to COMMITTED                                                                                           | postgres
 SET_MARK_GROUPS        | END                          | myGroup1,myGroup2            | RLBK_Mk2_%_START                                                                                           | postgres
 ROLLBACK_SEQUENCE      |                              | myschema1."myTbl3_col31_seq" |                                                                                                            | postgres
 ROLLBACK_SEQUENCE      |                              | myschema1.mytbl2b_col20_seq  |                                                                                                            | postgres
 ROLLBACK_SEQUENCE      |                              | myschema2."myTbl3_col31_seq" |                                                                                                            | postgres
 ROLLBACK_SEQUENCE      |                              | myschema2.myseq1             |                                                                                                            | postgres
 SET_MARK_GROUPS        | BEGIN                        | myGroup1,myGroup2            | RLBK_Mk2_%_DONE                                                                                            | postgres
 SET_MARK_GROUPS        | END                          | myGroup1,myGroup2            | RLBK_Mk2_%_DONE                                                                                            | postgres
 ROLLBACK_GROUPS        | NOTICE                       | Rollback id 6009             | 0 / 11 tables effectively processed.                                                                       | postgres
 ROLLBACK_GROUPS        | NOTICE                       | Rollback id 6009             | 4 sequences processed.                                                                                     | postgres
 ROLLBACK_GROUPS        | WARNING                      | Rollback id 6009             | Tables group change not rolled back: E-Maj priority for myschema1.mytbl1                                   | postgres
 ROLLBACK_GROUPS        | WARNING                      | Rollback id 6009             | Tables group change not rolled back: E-Maj log schema for myschema2."myTbl3"                               | postgres
 ROLLBACK_GROUPS        | WARNING                      | Rollback id 6009             | Tables group change not rolled back: E-Maj names prefix for myschema1."myTbl3"                             | postgres
 ROLLBACK_GROUPS        | WARNING                      | Rollback id 6009             | Tables group change not rolled back: log data tablespace for myschema1.mytbl2b                             | postgres
 ROLLBACK_GROUPS        | WARNING                      | Rollback id 6009             | Tables group change not rolled back: log index tablespace for myschema2.mytbl6                             | postgres
 ROLLBACK_GROUPS        | WARNING                      | Rollback id 6009             | The table myschema1."myTbl3" has only been rolled back up to its latest group attachment (<timestamp>)     | postgres
 ROLLBACK_GROUPS        | WARNING                      | Rollback id 6009             | The table myschema1.mytbl1 has only been rolled back up to its latest group attachment (<timestamp>)       | postgres
 ROLLBACK_GROUPS        | WARNING                      | Rollback id 6009             | The table myschema1.mytbl2b has only been rolled back up to its latest group attachment (<timestamp>)      | postgres
 DBLINK_CLOSE_CNX       |                              | rlbk#1                       |                                                                                                            | postgres
 ROLLBACK_GROUPS        | END                          | myGroup1,myGroup2            | Rollback_id 6009, 0 tables and 4 sequences effectively processed                                           | postgres
 ROLLBACK_GROUPS        | BEGIN                        | myGroup1,myGroup2            | Unlogged rollback to mark Mk2 (timestamp)                                                                  | postgres
 DBLINK_OPEN_CNX        |                              | rlbk#1                       | Status = 1                                                                                                 | postgres
 LOCK_GROUP             | BEGIN                        | myGroup1,myGroup2            | Rollback session #1                                                                                        | postgres
 LOCK_GROUP             | END                          | myGroup1,myGroup2            | Rollback session #1: 11 tables locked, 0 deadlock(s)                                                       | postgres
 ROLLBACK_GROUPS        | MARK DELETED                 | myGroup1                     | mark ALTER_% is deleted                                                                                    | postgres
 ROLLBACK_GROUPS        | MARK DELETED                 | myGroup2                     | mark ALTER_% is deleted                                                                                    | postgres
 ROLLBACK_GROUPS        | MARK DELETED                 | myGroup1                     | mark ALTER_% is deleted                                                                                    | postgres
 ROLLBACK_GROUPS        | MARK DELETED                 | myGroup2                     | mark ALTER_% is deleted                                                                                    | postgres
 ROLLBACK_GROUPS        | MARK DELETED                 | myGroup1                     | mark Mk2b is deleted                                                                                       | postgres
 ROLLBACK_GROUPS        | MARK DELETED                 | myGroup2                     | mark ADD_TBL test is deleted                                                                               | postgres
 ROLLBACK_GROUPS        | MARK DELETED                 | myGroup1                     | mark tables re-added to myGroup1 is deleted                                                                | postgres
 ROLLBACK_GROUPS        | MARK DELETED                 | myGroup1                     | mark Mk3 is deleted                                                                                        | postgres
 ROLLBACK_GROUPS        | MARK DELETED                 | myGroup2                     | mark Mk3 is deleted                                                                                        | postgres
 ROLLBACK_GROUPS        | MARK DELETED                 | myGroup1                     | mark RLBK_Mk2_%_START is deleted                                                                           | postgres
 ROLLBACK_GROUPS        | MARK DELETED                 | myGroup2                     | mark RLBK_Mk2_%_START is deleted                                                                           | postgres
 ROLLBACK_GROUPS        | MARK DELETED                 | myGroup1                     | mark RLBK_Mk2_%_DONE is deleted                                                                            | postgres
 ROLLBACK_GROUPS        | MARK DELETED                 | myGroup2                     | mark RLBK_Mk2_%_DONE is deleted                                                                            | postgres
 ROLLBACK_SEQUENCE      |                              | myschema1."myTbl3_col31_seq" |                                                                                                            | postgres
 ROLLBACK_SEQUENCE      |                              | myschema1.mytbl2b_col20_seq  |                                                                                                            | postgres
 ROLLBACK_SEQUENCE      |                              | myschema2."myTbl3_col31_seq" |                                                                                                            | postgres
 ROLLBACK_SEQUENCE      |                              | myschema2.myseq1             |                                                                                                            | postgres
 ROLLBACK_GROUPS        | NOTICE                       | Rollback id 6010             | 0 / 11 tables effectively processed.                                                                       | postgres
 ROLLBACK_GROUPS        | NOTICE                       | Rollback id 6010             | 4 sequences processed.                                                                                     | postgres
 DBLINK_CLOSE_CNX       |                              | rlbk#1                       |                                                                                                            | postgres
 ROLLBACK_GROUPS        | END                          | myGroup1,myGroup2            | Rollback_id 6010, 0 tables and 4 sequences effectively processed                                           | postgres
 ROLLBACK_GROUPS        | BEGIN                        | myGroup1,myGroup2            | Unlogged rollback to mark Mk1 (timestamp)                                                                  | postgres
 DBLINK_OPEN_CNX        |                              | rlbk#1                       | Status = 1                                                                                                 | postgres
 LOCK_GROUP             | BEGIN                        | myGroup1,myGroup2            | Rollback session #1                                                                                        | postgres
 LOCK_GROUP             | END                          | myGroup1,myGroup2            | Rollback session #1: 11 tables locked, 0 deadlock(s)                                                       | postgres
 ROLLBACK_GROUPS        | MARK DELETED                 | myGroup1                     | mark Priority Changed is deleted                                                                           | postgres
 ROLLBACK_GROUPS        | MARK DELETED                 | myGroup1                     | mark Attributes_changed is deleted                                                                         | postgres
 ROLLBACK_GROUPS        | MARK DELETED                 | myGroup2                     | mark Attributes_changed is deleted                                                                         | postgres
 ROLLBACK_GROUPS        | MARK DELETED                 | myGroup1                     | mark Mk2 is deleted                                                                                        | postgres
 ROLLBACK_GROUPS        | MARK DELETED                 | myGroup2                     | mark Mk2 is deleted                                                                                        | postgres
 ROLLBACK_SEQUENCE      |                              | myschema1."myTbl3_col31_seq" |                                                                                                            | postgres
 ROLLBACK_SEQUENCE      |                              | myschema1.mytbl2b_col20_seq  |                                                                                                            | postgres
 ROLLBACK_SEQUENCE      |                              | myschema2."myTbl3_col31_seq" |                                                                                                            | postgres
 ROLLBACK_SEQUENCE      |                              | myschema2.myseq1             |                                                                                                            | postgres
 ROLLBACK_GROUPS        | NOTICE                       | Rollback id 6011             | 0 / 11 tables effectively processed.                                                                       | postgres
 ROLLBACK_GROUPS        | NOTICE                       | Rollback id 6011             | 4 sequences processed.                                                                                     | postgres
 ROLLBACK_GROUPS        | WARNING                      | Rollback id 6011             | Tables group change not rolled back: E-Maj priority for myschema1.mytbl1                                   | postgres
 ROLLBACK_GROUPS        | WARNING                      | Rollback id 6011             | Tables group change not rolled back: E-Maj log schema for myschema2."myTbl3"                               | postgres
 ROLLBACK_GROUPS        | WARNING                      | Rollback id 6011             | Tables group change not rolled back: E-Maj names prefix for myschema1."myTbl3"                             | postgres
 ROLLBACK_GROUPS        | WARNING                      | Rollback id 6011             | Tables group change not rolled back: log data tablespace for myschema1.mytbl2b                             | postgres
 ROLLBACK_GROUPS        | WARNING                      | Rollback id 6011             | Tables group change not rolled back: log index tablespace for myschema2.mytbl6                             | postgres
 DBLINK_CLOSE_CNX       |                              | rlbk#1                       |                                                                                                            | postgres
 ROLLBACK_GROUPS        | END                          | myGroup1,myGroup2            | Rollback_id 6011, 0 tables and 4 sequences effectively processed                                           | postgres
 ROLLBACK_GROUPS        | BEGIN                        | myGroup1,myGroup2            | Logged rollback to mark Mk1 (timestamp)                                                                    | postgres
 DBLINK_OPEN_CNX        |                              | rlbk#1                       | Status = 1                                                                                                 | postgres
 LOCK_GROUP             | BEGIN                        | myGroup1,myGroup2            | Rollback session #1                                                                                        | postgres
 LOCK_GROUP             | END                          | myGroup1,myGroup2            | Rollback session #1: 11 tables locked, 0 deadlock(s)                                                       | postgres
 SET_MARK_GROUPS        | BEGIN                        | myGroup1,myGroup2            | RLBK_Mk1_%_START                                                                                           | postgres
 CLEANUP_RLBK_STATE     |                              | Rollback id 6009             | set to COMMITTED                                                                                           | postgres
 CLEANUP_RLBK_STATE     |                              | Rollback id 6010             | set to COMMITTED                                                                                           | postgres
 CLEANUP_RLBK_STATE     |                              | Rollback id 6011             | set to COMMITTED                                                                                           | postgres
 SET_MARK_GROUPS        | END                          | myGroup1,myGroup2            | RLBK_Mk1_%_START                                                                                           | postgres
 ROLLBACK_SEQUENCE      |                              | myschema1."myTbl3_col31_seq" |                                                                                                            | postgres
 ROLLBACK_SEQUENCE      |                              | myschema1.mytbl2b_col20_seq  |                                                                                                            | postgres
 ROLLBACK_SEQUENCE      |                              | myschema2."myTbl3_col31_seq" |                                                                                                            | postgres
 ROLLBACK_SEQUENCE      |                              | myschema2.myseq1             |                                                                                                            | postgres
 SET_MARK_GROUPS        | BEGIN                        | myGroup1,myGroup2            | RLBK_Mk1_%_DONE                                                                                            | postgres
 SET_MARK_GROUPS        | END                          | myGroup1,myGroup2            | RLBK_Mk1_%_DONE                                                                                            | postgres
 ROLLBACK_GROUPS        | NOTICE                       | Rollback id 6012             | 0 / 11 tables effectively processed.                                                                       | postgres
 ROLLBACK_GROUPS        | NOTICE                       | Rollback id 6012             | 4 sequences processed.                                                                                     | postgres
 DBLINK_CLOSE_CNX       |                              | rlbk#1                       |                                                                                                            | postgres
 ROLLBACK_GROUPS        | END                          | myGroup1,myGroup2            | Rollback_id 6012, 0 tables and 4 sequences effectively processed                                           | postgres
 ROLLBACK_GROUPS        | BEGIN                        | myGroup1,myGroup2            | Unlogged rollback to mark Mk1 (timestamp)                                                                  | postgres
 DBLINK_OPEN_CNX        |                              | rlbk#1                       | Status = 1                                                                                                 | postgres
 LOCK_GROUP             | BEGIN                        | myGroup1,myGroup2            | Rollback session #1                                                                                        | postgres
 LOCK_GROUP             | END                          | myGroup1,myGroup2            | Rollback session #1: 11 tables locked, 0 deadlock(s)                                                       | postgres
 ROLLBACK_GROUPS        | MARK DELETED                 | myGroup1                     | mark RLBK_Mk1_%_START is deleted                                                                           | postgres
 ROLLBACK_GROUPS        | MARK DELETED                 | myGroup2                     | mark RLBK_Mk1_%_START is deleted                                                                           | postgres
 ROLLBACK_GROUPS        | MARK DELETED                 | myGroup1                     | mark RLBK_Mk1_%_DONE is deleted                                                                            | postgres
 ROLLBACK_GROUPS        | MARK DELETED                 | myGroup2                     | mark RLBK_Mk1_%_DONE is deleted                                                                            | postgres
 ROLLBACK_SEQUENCE      |                              | myschema1."myTbl3_col31_seq" |                                                                                                            | postgres
 ROLLBACK_SEQUENCE      |                              | myschema1.mytbl2b_col20_seq  |                                                                                                            | postgres
 ROLLBACK_SEQUENCE      |                              | myschema2."myTbl3_col31_seq" |                                                                                                            | postgres
 ROLLBACK_SEQUENCE      |                              | myschema2.myseq1             |                                                                                                            | postgres
 ROLLBACK_GROUPS        | NOTICE                       | Rollback id 6013             | 0 / 11 tables effectively processed.                                                                       | postgres
 ROLLBACK_GROUPS        | NOTICE                       | Rollback id 6013             | 4 sequences processed.                                                                                     | postgres
 DBLINK_CLOSE_CNX       |                              | rlbk#1                       |                                                                                                            | postgres
 ROLLBACK_GROUPS        | END                          | myGroup1,myGroup2            | Rollback_id 6013, 0 tables and 4 sequences effectively processed                                           | postgres
 FORCE_DROP_GROUP       | BEGIN                        | myGroup1                     |                                                                                                            | postgres
 FORCE_DROP_GROUP       | SCHEMA DROPPED               | emajb                        |                                                                                                            | postgres
 FORCE_DROP_GROUP       | END                          | myGroup1                     | 7 tables/sequences processed                                                                               | postgres
 FORCE_DROP_GROUP       | BEGIN                        | myGroup2                     |                                                                                                            | postgres
 FORCE_DROP_GROUP       | SCHEMA DROPPED               | "emajC"                      |                                                                                                            | postgres
 FORCE_DROP_GROUP       | END                          | myGroup2                     | 8 tables/sequences processed                                                                               | postgres
 FORCE_DROP_GROUP       | BEGIN                        | myGroup4                     |                                                                                                            | postgres
 FORCE_DROP_GROUP       | END                          | myGroup4                     | 5 tables/sequences processed                                                                               | postgres
(495 rows)

select time_id, time_last_emaj_gid, time_event from emaj.emaj_time_stamp where time_id > 6000 order by time_id;
 time_id | time_last_emaj_gid | time_event 
---------+--------------------+------------
    6001 |              11861 | M
    6002 |              11861 | C
    6003 |              11861 | C
    6004 |              11861 | C
    6005 |              11861 | C
    6008 |              11861 | A
    6009 |              11861 | A
    6010 |              11861 | A
    6011 |              11861 | A
    6012 |              11861 | A
    6013 |              11861 | A
    6014 |              11861 | A
    6015 |              11861 | A
    6016 |              11861 | A
    6017 |              11861 | A
    6018 |              11861 | A
    6019 |              11861 | A
    6020 |              11861 | A
    6021 |              11861 | A
    6022 |              11861 | A
    6023 |              11861 | A
    6024 |              11861 | A
    6025 |              11861 | A
    6026 |              11861 | A
    6027 |              11861 | A
    6028 |              11861 | A
    6029 |              11861 | A
    6030 |              11861 | A
    6031 |              11861 | A
    6032 |              11861 | A
    6033 |              11861 | A
    6034 |              11861 | A
    6035 |              11861 | A
    6036 |              11861 | A
    6037 |              11861 | A
    6040 |              11861 | A
    6041 |              11861 | A
    6042 |              11861 | A
    6043 |              11861 | A
    6044 |              11861 | A
    6045 |              11861 | A
    6046 |              11861 | A
    6047 |              11861 | A
    6050 |              11861 | M
    6051 |              11861 | A
    6052 |              11861 | A
    6053 |              11861 | M
    6054 |              11861 | A
    6055 |              11861 | A
    6056 |              11861 | M
    6061 |              11861 | R
    6063 |              11861 | R
    6066 |              11861 | M
    6067 |              11861 | M
    6068 |              11861 | A
    6070 |              11863 | M
    6071 |              11864 | M
    6073 |              11864 | R
    6074 |              11868 | M
    6075 |              11871 | A
    6076 |              11871 | A
    6077 |              11872 | S
    6078 |              11872 | A
    6079 |              11872 | R
    6080 |              11873 | M
    6081 |              11874 | A
    6083 |              11874 | S
    6085 |              11875 | R
    6086 |              11876 | M
    6087 |              11876 | A
    6088 |              11876 | R
    6093 |              11876 | A
    6094 |              11876 | M
    6095 |              11876 | R
    6096 |              11876 | R
    6097 |              11876 | M
    6098 |              11876 | R
    6099 |              11876 | R
    6100 |              11876 | R
    6101 |              11876 | M
    6102 |              11876 | R
(81 rows)

select * from emaj.emaj_alter_plan order by 1,2,3,4,5;
 altr_time_id |        altr_step         | altr_schema |   altr_tblseq    | altr_group | altr_priority | altr_group_is_logging | altr_new_group | altr_new_priority | altr_new_group_is_logging | altr_rlbk_id 
--------------+--------------------------+-------------+------------------+------------+---------------+-----------------------+----------------+-------------------+---------------------------+--------------
         6008 | RESET_GROUP              |             |                  | emptyGroup |               | f                     |                |                   |                           |             
         6009 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6010 | REMOVE_TBL               | myschema1   | myTbl3           | myGroup1   |            10 | f                     |                |                   |                           |             
         6010 | REMOVE_TBL               | myschema1   | mytbl2b          | myGroup1   |               | f                     |                |                   |                           |             
         6010 | REMOVE_TBL               | myschema1   | mytbl4           | myGroup1   |            20 | f                     |                |                   |                           |             
         6010 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6011 | REMOVE_SEQ               | myschema1   | myTbl3_col31_seq | myGroup1   |             1 | f                     |                |                   |                           |             
         6011 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6012 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6012 | ADD_TBL                  | myschema1   | myTbl3           | myGroup1   |            10 | f                     |                |                   |                           |             
         6012 | ADD_TBL                  | myschema1   | mytbl2b          | myGroup1   |               | f                     |                |                   |                           |             
         6012 | ADD_TBL                  | myschema1   | mytbl4           | myGroup1   |            20 | f                     |                |                   |                           |             
         6013 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6013 | ADD_SEQ                  | myschema1   | myTbl3_col31_seq | myGroup1   |             1 | f                     |                |                   |                           |             
         6014 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6014 | CHANGE_TBL_LOG_SCHEMA    | myschema1   | myTbl3           | myGroup1   |            10 | f                     |                |                   |                           |             
         6015 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6015 | CHANGE_TBL_LOG_SCHEMA    | myschema1   | myTbl3           | myGroup1   |            10 | f                     |                |                   |                           |             
         6016 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6016 | CHANGE_TBL_NAMES_PREFIX  | myschema1   | myTbl3           | myGroup1   |            10 | f                     |                |                   |                           |             
         6017 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6017 | CHANGE_TBL_NAMES_PREFIX  | myschema1   | myTbl3           | myGroup1   |            10 | f                     |                |                   |                           |             
         6018 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6018 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl2b          | myGroup1   |               | f                     |                |                   |                           |             
         6019 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6019 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl2b          | myGroup1   |               | f                     |                |                   |                           |             
         6020 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6020 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | myTbl3           | myGroup1   |            10 | f                     |                |                   |                           |             
         6020 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl1           | myGroup1   |            20 | f                     |                |                   |                           |             
         6020 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl2           | myGroup1   |               | f                     |                |                   |                           |             
         6020 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl2b          | myGroup1   |               | f                     |                |                   |                           |             
         6020 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl4           | myGroup1   |            20 | f                     |                |                   |                           |             
         6021 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6021 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | myTbl3           | myGroup1   |            10 | f                     |                |                   |                           |             
         6021 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl1           | myGroup1   |            20 | f                     |                |                   |                           |             
         6021 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl2           | myGroup1   |               | f                     |                |                   |                           |             
         6021 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl2b          | myGroup1   |               | f                     |                |                   |                           |             
         6021 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl4           | myGroup1   |            20 | f                     |                |                   |                           |             
         6022 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6022 | CHANGE_TBL_LOG_INDEX_TSP | myschema1   | mytbl2b          | myGroup1   |               | f                     |                |                   |                           |             
         6023 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6023 | CHANGE_TBL_LOG_INDEX_TSP | myschema1   | mytbl2b          | myGroup1   |               | f                     |                |                   |                           |             
         6024 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6024 | CHANGE_REL_PRIORITY      | myschema1   | mytbl1           | myGroup1   |            20 | f                     |                |                30 |                           |             
         6025 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6025 | CHANGE_REL_PRIORITY      | myschema1   | mytbl1           | myGroup1   |            30 | f                     |                |                   |                           |             
         6026 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6026 | CHANGE_REL_PRIORITY      | myschema1   | mytbl1           | myGroup1   |               | f                     |                |                20 |                           |             
         6027 | REPAIR_TBL               | myschema1   | mytbl1           | myGroup1   |            20 | f                     |                |                   |                           |             
         6027 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6028 | REPAIR_TBL               | myschema1   | mytbl1           | myGroup1   |            20 | f                     |                |                   |                           |             
         6028 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6029 | REPAIR_TBL               | myschema1   | mytbl1           | myGroup1   |            20 | f                     |                |                   |                           |             
         6029 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6030 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6031 | REPAIR_TBL               | myschema1   | mytbl1           | myGroup1   |            20 | f                     |                |                   |                           |             
         6031 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6032 | REMOVE_TBL               | myschema1   | mytbl1           | myGroup1   |            20 | f                     |                |                   |                           |             
         6032 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6032 | ADD_TBL                  | myschema1   | mytbl1_new_name  | myGroup1   |            20 | f                     |                |                   |                           |             
         6033 | REMOVE_TBL               | myschema1   | mytbl1_new_name  | myGroup1   |            20 | f                     |                |                   |                           |             
         6033 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6033 | ADD_TBL                  | public      | mytbl1_new_name  | myGroup1   |            20 | f                     |                |                   |                           |             
         6034 | REMOVE_TBL               | public      | mytbl1_new_name  | myGroup1   |            20 | f                     |                |                   |                           |             
         6034 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6034 | ADD_TBL                  | myschema1   | mytbl1           | myGroup1   |            20 | f                     |                |                   |                           |             
         6035 | REPAIR_TBL               | myschema1   | mytbl1           | myGroup1   |            20 | f                     |                |                   |                           |             
         6035 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6036 | REPAIR_TBL               | myschema1   | mytbl1           | myGroup1   |            20 | f                     |                |                   |                           |             
         6036 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6037 | REPAIR_TBL               | myschema1   | mytbl1           | myGroup1   |            20 | f                     |                |                   |                           |             
         6037 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6040 | REMOVE_TBL               | myschema1   | myTbl3           | myGroup1   |            10 | f                     |                |                   |                           |             
         6040 | REMOVE_TBL               | myschema1   | mytbl2b          | myGroup1   |               | f                     |                |                   |                           |             
         6040 | REMOVE_TBL               | myschema2   | mytbl4           | myGroup2   |               | f                     |                |                   |                           |             
         6040 | REMOVE_SEQ               | myschema1   | myTbl3_col31_seq | myGroup1   |             1 | f                     |                |                   |                           |             
         6040 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6040 | RESET_GROUP              |             |                  | myGroup2   |               | f                     |                |                   |                           |             
         6041 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6041 | RESET_GROUP              |             |                  | myGroup2   |               | f                     |                |                   |                           |             
         6041 | ADD_TBL                  | myschema1   | myTbl3           | myGroup1   |            10 | f                     |                |                   |                           |             
         6041 | ADD_TBL                  | myschema1   | mytbl2b          | myGroup1   |               | f                     |                |                   |                           |             
         6041 | ADD_TBL                  | myschema2   | mytbl4           | myGroup2   |               | f                     |                |                   |                           |             
         6041 | ADD_SEQ                  | myschema1   | myTbl3_col31_seq | myGroup1   |             1 | f                     |                |                   |                           |             
         6042 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6042 | RESET_GROUP              |             |                  | myGroup2   |               | f                     |                |                   |                           |             
         6042 | CHANGE_TBL_LOG_SCHEMA    | myschema2   | myTbl3           | myGroup2   |               | f                     |                |                   |                           |             
         6042 | CHANGE_TBL_NAMES_PREFIX  | myschema1   | myTbl3           | myGroup1   |            10 | f                     |                |                   |                           |             
         6043 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6043 | RESET_GROUP              |             |                  | myGroup2   |               | f                     |                |                   |                           |             
         6043 | CHANGE_TBL_LOG_SCHEMA    | myschema2   | myTbl3           | myGroup2   |               | f                     |                |                   |                           |             
         6043 | CHANGE_TBL_NAMES_PREFIX  | myschema1   | myTbl3           | myGroup1   |            10 | f                     |                |                   |                           |             
         6044 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6044 | RESET_GROUP              |             |                  | myGroup2   |               | f                     |                |                   |                           |             
         6044 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl2b          | myGroup1   |               | f                     |                |                   |                           |             
         6044 | CHANGE_TBL_LOG_INDEX_TSP | myschema2   | mytbl6           | myGroup2   |               | f                     |                |                   |                           |             
         6044 | CHANGE_REL_PRIORITY      | myschema1   | mytbl1           | myGroup1   |            20 | f                     |                |                30 |                           |             
         6045 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6045 | RESET_GROUP              |             |                  | myGroup2   |               | f                     |                |                   |                           |             
         6045 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl2b          | myGroup1   |               | f                     |                |                   |                           |             
         6045 | CHANGE_TBL_LOG_INDEX_TSP | myschema2   | mytbl6           | myGroup2   |               | f                     |                |                   |                           |             
         6045 | CHANGE_REL_PRIORITY      | myschema1   | mytbl1           | myGroup1   |            30 | f                     |                |                20 |                           |             
         6046 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6046 | RESET_GROUP              |             |                  | myGroup2   |               | f                     |                |                   |                           |             
         6046 | ASSIGN_REL               | myschema2   | myTbl3           | myGroup2   |               | f                     | myGroup1       |                   | f                         |             
         6046 | ASSIGN_REL               | myschema2   | myTbl3_col31_seq | myGroup2   |               | f                     | myGroup1       |                   | f                         |             
         6047 | RESET_GROUP              |             |                  | myGroup1   |               | f                     |                |                   |                           |             
         6047 | RESET_GROUP              |             |                  | myGroup2   |               | f                     |                |                   |                           |             
         6047 | ASSIGN_REL               | myschema2   | myTbl3           | myGroup1   |               | f                     | myGroup2       |                   | f                         |             
         6047 | ASSIGN_REL               | myschema2   | myTbl3_col31_seq | myGroup1   |               | f                     | myGroup2       |                   | f                         |             
         6051 | CHANGE_REL_PRIORITY      | myschema1   | mytbl1           | myGroup1   |            20 | t                     |                |                30 |                           |         6011
         6052 | CHANGE_TBL_LOG_SCHEMA    | myschema2   | myTbl3           | myGroup2   |               | t                     |                |                   |                           |         6011
         6052 | CHANGE_TBL_NAMES_PREFIX  | myschema1   | myTbl3           | myGroup1   |            10 | t                     |                |                   |                           |         6011
         6052 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl2b          | myGroup1   |               | t                     |                |                   |                           |         6011
         6052 | CHANGE_TBL_LOG_INDEX_TSP | myschema2   | mytbl6           | myGroup2   |               | t                     |                |                   |                           |         6011
         6054 | CHANGE_REL_PRIORITY      | myschema1   | mytbl1           | myGroup1   |            30 | t                     |                |                20 |                           |         6009
         6055 | CHANGE_TBL_LOG_SCHEMA    | myschema2   | myTbl3           | myGroup2   |               | t                     |                |                   |                           |         6009
         6055 | CHANGE_TBL_NAMES_PREFIX  | myschema1   | myTbl3           | myGroup1   |            10 | t                     |                |                   |                           |         6009
         6055 | CHANGE_TBL_LOG_DATA_TSP  | myschema1   | mytbl2b          | myGroup1   |               | t                     |                |                   |                           |         6009
         6055 | CHANGE_TBL_LOG_INDEX_TSP | myschema2   | mytbl6           | myGroup2   |               | t                     |                |                   |                           |         6009
         6068 | ADD_TBL                  | myschema2   | mytbl7           | myGroup2   |               | t                     |                |                   |                           |         6003
         6075 | REMOVE_TBL               | myschema2   | mytbl7           | myGroup2   |               | t                     |                |                   |                           |         6004
         6076 | ADD_TBL                  | myschema2   | mytbl7           | myGroup2   |               | t                     |                |                   |                           |         6004
         6078 | REMOVE_TBL               | myschema2   | mytbl7           | myGroup2   |               | t                     |                |                   |                           |         6004
         6081 | REMOVE_TBL               | myschema1   | myTbl3           | myGroup1   |            10 | t                     |                |                   |                           |         6006
         6081 | REMOVE_TBL               | myschema1   | mytbl2b          | myGroup1   |               | t                     |                |                   |                           |         6006
         6087 | REMOVE_TBL               | myschema1   | mytbl1           | myGroup1   |            20 | t                     |                |                   |                           |         6007
         6093 | ADD_TBL                  | myschema1   | myTbl3           | myGroup1   |            10 | t                     |                |                   |                           |         6009
         6093 | ADD_TBL                  | myschema1   | mytbl1           | myGroup1   |            20 | t                     |                |                   |                           |         6009
         6093 | ADD_TBL                  | myschema1   | mytbl2b          | myGroup1   |               | t                     |                |                   |                           |         6009
(130 rows)

truncate emaj.emaj_hist;
